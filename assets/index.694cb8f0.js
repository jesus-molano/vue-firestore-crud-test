const up=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}};up();function ma(n,t){const s=Object.create(null),r=n.split(",");for(let i=0;i<r.length;i++)s[r[i]]=!0;return t?i=>!!s[i.toLowerCase()]:i=>!!s[i]}const hp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",fp=ma(hp);function Ru(n){return!!n||n===""}function ya(n){if(W(n)){const t={};for(let s=0;s<n.length;s++){const r=n[s],i=Le(r)?gp(r):ya(r);if(i)for(const o in i)t[o]=i[o]}return t}else{if(Le(n))return n;if(ke(n))return n}}const dp=/;(?![^(]*\))/g,pp=/:(.+)/;function gp(n){const t={};return n.split(dp).forEach(s=>{if(s){const r=s.split(pp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function va(n){let t="";if(Le(n))t=n;else if(W(n))for(let s=0;s<n.length;s++){const r=va(n[s]);r&&(t+=r+" ")}else if(ke(n))for(const s in n)n[s]&&(t+=s+" ");return t.trim()}const xn=n=>Le(n)?n:n==null?"":W(n)||ke(n)&&(n.toString===Ou||!Z(n.toString))?JSON.stringify(n,xu,2):String(n),xu=(n,t)=>t&&t.__v_isRef?xu(n,t.value):$n(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,i])=>(s[`${r} =>`]=i,s),{})}:Du(t)?{[`Set(${t.size})`]:[...t.values()]}:ke(t)&&!W(t)&&!Pu(t)?String(t):t,ve={},Un=[],_t=()=>{},mp=()=>!1,yp=/^on[^a-z]/,ui=n=>yp.test(n),wa=n=>n.startsWith("onUpdate:"),Xe=Object.assign,Ea=(n,t)=>{const s=n.indexOf(t);s>-1&&n.splice(s,1)},vp=Object.prototype.hasOwnProperty,se=(n,t)=>vp.call(n,t),W=Array.isArray,$n=n=>hi(n)==="[object Map]",Du=n=>hi(n)==="[object Set]",Z=n=>typeof n=="function",Le=n=>typeof n=="string",_a=n=>typeof n=="symbol",ke=n=>n!==null&&typeof n=="object",ku=n=>ke(n)&&Z(n.then)&&Z(n.catch),Ou=Object.prototype.toString,hi=n=>Ou.call(n),wp=n=>hi(n).slice(8,-1),Pu=n=>hi(n)==="[object Object]",ba=n=>Le(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,xr=ma(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fi=n=>{const t=Object.create(null);return s=>t[s]||(t[s]=n(s))},Ep=/-(\w)/g,zn=fi(n=>n.replace(Ep,(t,s)=>s?s.toUpperCase():"")),_p=/\B([A-Z])/g,os=fi(n=>n.replace(_p,"-$1").toLowerCase()),Mu=fi(n=>n.charAt(0).toUpperCase()+n.slice(1)),Yi=fi(n=>n?`on${Mu(n)}`:""),Fs=(n,t)=>!Object.is(n,t),Xi=(n,t)=>{for(let s=0;s<n.length;s++)n[s](t)},Br=(n,t,s)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value:s})},bp=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let jc;const Tp=()=>jc||(jc=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:typeof global!="undefined"?global:{});let At;class Lu{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&At&&(this.parent=At,this.index=(At.scopes||(At.scopes=[])).push(this)-1)}run(t){if(this.active){const s=At;try{return At=this,t()}finally{At=s}}}on(){At=this}off(){At=this.parent}stop(t){if(this.active){let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.scopes)for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function Fu(n){return new Lu(n)}function Cp(n,t=At){t&&t.active&&t.effects.push(n)}const Ta=n=>{const t=new Set(n);return t.w=0,t.n=0,t},Bu=n=>(n.w&Jt)>0,Vu=n=>(n.n&Jt)>0,Sp=({deps:n})=>{if(n.length)for(let t=0;t<n.length;t++)n[t].w|=Jt},Ip=n=>{const{deps:t}=n;if(t.length){let s=0;for(let r=0;r<t.length;r++){const i=t[r];Bu(i)&&!Vu(i)?i.delete(n):t[s++]=i,i.w&=~Jt,i.n&=~Jt}t.length=s}},vo=new WeakMap;let bs=0,Jt=1;const wo=30;let vt;const dn=Symbol(""),Eo=Symbol("");class Ca{constructor(t,s=null,r){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,Cp(this,r)}run(){if(!this.active)return this.fn();let t=vt,s=Wt;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=vt,vt=this,Wt=!0,Jt=1<<++bs,bs<=wo?Sp(this):Hc(this),this.fn()}finally{bs<=wo&&Ip(this),Jt=1<<--bs,vt=this.parent,Wt=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){vt===this?this.deferStop=!0:this.active&&(Hc(this),this.onStop&&this.onStop(),this.active=!1)}}function Hc(n){const{deps:t}=n;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(n);t.length=0}}let Wt=!0;const Uu=[];function as(){Uu.push(Wt),Wt=!1}function cs(){const n=Uu.pop();Wt=n===void 0?!0:n}function lt(n,t,s){if(Wt&&vt){let r=vo.get(n);r||vo.set(n,r=new Map);let i=r.get(s);i||r.set(s,i=Ta()),$u(i)}}function $u(n,t){let s=!1;bs<=wo?Vu(n)||(n.n|=Jt,s=!Bu(n)):s=!n.has(vt),s&&(n.add(vt),vt.deps.push(n))}function Vt(n,t,s,r,i,o){const a=vo.get(n);if(!a)return;let c=[];if(t==="clear")c=[...a.values()];else if(s==="length"&&W(n))a.forEach((l,u)=>{(u==="length"||u>=r)&&c.push(l)});else switch(s!==void 0&&c.push(a.get(s)),t){case"add":W(n)?ba(s)&&c.push(a.get("length")):(c.push(a.get(dn)),$n(n)&&c.push(a.get(Eo)));break;case"delete":W(n)||(c.push(a.get(dn)),$n(n)&&c.push(a.get(Eo)));break;case"set":$n(n)&&c.push(a.get(dn));break}if(c.length===1)c[0]&&_o(c[0]);else{const l=[];for(const u of c)u&&l.push(...u);_o(Ta(l))}}function _o(n,t){for(const s of W(n)?n:[...n])(s!==vt||s.allowRecurse)&&(s.scheduler?s.scheduler():s.run())}const Ap=ma("__proto__,__v_isRef,__isVue"),ju=new Set(Object.getOwnPropertyNames(Symbol).map(n=>Symbol[n]).filter(_a)),Np=Sa(),Rp=Sa(!1,!0),xp=Sa(!0),qc=Dp();function Dp(){const n={};return["includes","indexOf","lastIndexOf"].forEach(t=>{n[t]=function(...s){const r=ie(this);for(let o=0,a=this.length;o<a;o++)lt(r,"get",o+"");const i=r[t](...s);return i===-1||i===!1?r[t](...s.map(ie)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{n[t]=function(...s){as();const r=ie(this)[t].apply(this,s);return cs(),r}}),n}function Sa(n=!1,t=!1){return function(r,i,o){if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(n?t?Gp:Gu:t?zu:Ku).get(r))return r;const a=W(r);if(!n&&a&&se(qc,i))return Reflect.get(qc,i,o);const c=Reflect.get(r,i,o);return(_a(i)?ju.has(i):Ap(i))||(n||lt(r,"get",i),t)?c:Se(c)?!a||!ba(i)?c.value:c:ke(c)?n?Wu(c):ls(c):c}}const kp=Hu(),Op=Hu(!0);function Hu(n=!1){return function(s,r,i,o){let a=s[r];if(Bs(a)&&Se(a)&&!Se(i))return!1;if(!n&&!Bs(i)&&(Yu(i)||(i=ie(i),a=ie(a)),!W(s)&&Se(a)&&!Se(i)))return a.value=i,!0;const c=W(s)&&ba(r)?Number(r)<s.length:se(s,r),l=Reflect.set(s,r,i,o);return s===ie(o)&&(c?Fs(i,a)&&Vt(s,"set",r,i):Vt(s,"add",r,i)),l}}function Pp(n,t){const s=se(n,t);n[t];const r=Reflect.deleteProperty(n,t);return r&&s&&Vt(n,"delete",t,void 0),r}function Mp(n,t){const s=Reflect.has(n,t);return(!_a(t)||!ju.has(t))&&lt(n,"has",t),s}function Lp(n){return lt(n,"iterate",W(n)?"length":dn),Reflect.ownKeys(n)}const qu={get:Np,set:kp,deleteProperty:Pp,has:Mp,ownKeys:Lp},Fp={get:xp,set(n,t){return!0},deleteProperty(n,t){return!0}},Bp=Xe({},qu,{get:Rp,set:Op}),Ia=n=>n,di=n=>Reflect.getPrototypeOf(n);function wr(n,t,s=!1,r=!1){n=n.__v_raw;const i=ie(n),o=ie(t);t!==o&&!s&&lt(i,"get",t),!s&&lt(i,"get",o);const{has:a}=di(i),c=r?Ia:s?Ra:Vs;if(a.call(i,t))return c(n.get(t));if(a.call(i,o))return c(n.get(o));n!==i&&n.get(t)}function Er(n,t=!1){const s=this.__v_raw,r=ie(s),i=ie(n);return n!==i&&!t&&lt(r,"has",n),!t&&lt(r,"has",i),n===i?s.has(n):s.has(n)||s.has(i)}function _r(n,t=!1){return n=n.__v_raw,!t&&lt(ie(n),"iterate",dn),Reflect.get(n,"size",n)}function Kc(n){n=ie(n);const t=ie(this);return di(t).has.call(t,n)||(t.add(n),Vt(t,"add",n,n)),this}function zc(n,t){t=ie(t);const s=ie(this),{has:r,get:i}=di(s);let o=r.call(s,n);o||(n=ie(n),o=r.call(s,n));const a=i.call(s,n);return s.set(n,t),o?Fs(t,a)&&Vt(s,"set",n,t):Vt(s,"add",n,t),this}function Gc(n){const t=ie(this),{has:s,get:r}=di(t);let i=s.call(t,n);i||(n=ie(n),i=s.call(t,n)),r&&r.call(t,n);const o=t.delete(n);return i&&Vt(t,"delete",n,void 0),o}function Wc(){const n=ie(this),t=n.size!==0,s=n.clear();return t&&Vt(n,"clear",void 0,void 0),s}function br(n,t){return function(r,i){const o=this,a=o.__v_raw,c=ie(a),l=t?Ia:n?Ra:Vs;return!n&&lt(c,"iterate",dn),a.forEach((u,h)=>r.call(i,l(u),l(h),o))}}function Tr(n,t,s){return function(...r){const i=this.__v_raw,o=ie(i),a=$n(o),c=n==="entries"||n===Symbol.iterator&&a,l=n==="keys"&&a,u=i[n](...r),h=s?Ia:t?Ra:Vs;return!t&&lt(o,"iterate",l?Eo:dn),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:c?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function jt(n){return function(...t){return n==="delete"?!1:this}}function Vp(){const n={get(o){return wr(this,o)},get size(){return _r(this)},has:Er,add:Kc,set:zc,delete:Gc,clear:Wc,forEach:br(!1,!1)},t={get(o){return wr(this,o,!1,!0)},get size(){return _r(this)},has:Er,add:Kc,set:zc,delete:Gc,clear:Wc,forEach:br(!1,!0)},s={get(o){return wr(this,o,!0)},get size(){return _r(this,!0)},has(o){return Er.call(this,o,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:br(!0,!1)},r={get(o){return wr(this,o,!0,!0)},get size(){return _r(this,!0)},has(o){return Er.call(this,o,!0)},add:jt("add"),set:jt("set"),delete:jt("delete"),clear:jt("clear"),forEach:br(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Tr(o,!1,!1),s[o]=Tr(o,!0,!1),t[o]=Tr(o,!1,!0),r[o]=Tr(o,!0,!0)}),[n,s,t,r]}const[Up,$p,jp,Hp]=Vp();function Aa(n,t){const s=t?n?Hp:jp:n?$p:Up;return(r,i,o)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(se(s,i)&&i in r?s:r,i,o)}const qp={get:Aa(!1,!1)},Kp={get:Aa(!1,!0)},zp={get:Aa(!0,!1)},Ku=new WeakMap,zu=new WeakMap,Gu=new WeakMap,Gp=new WeakMap;function Wp(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Yp(n){return n.__v_skip||!Object.isExtensible(n)?0:Wp(wp(n))}function ls(n){return Bs(n)?n:Na(n,!1,qu,qp,Ku)}function Xp(n){return Na(n,!1,Bp,Kp,zu)}function Wu(n){return Na(n,!0,Fp,zp,Gu)}function Na(n,t,s,r,i){if(!ke(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const o=i.get(n);if(o)return o;const a=Yp(n);if(a===0)return n;const c=new Proxy(n,a===2?r:s);return i.set(n,c),c}function Lt(n){return Bs(n)?Lt(n.__v_raw):!!(n&&n.__v_isReactive)}function Bs(n){return!!(n&&n.__v_isReadonly)}function Yu(n){return!!(n&&n.__v_isShallow)}function Xu(n){return Lt(n)||Bs(n)}function ie(n){const t=n&&n.__v_raw;return t?ie(t):n}function Gn(n){return Br(n,"__v_skip",!0),n}const Vs=n=>ke(n)?ls(n):n,Ra=n=>ke(n)?Wu(n):n;function Qu(n){Wt&&vt&&(n=ie(n),$u(n.dep||(n.dep=Ta())))}function Ju(n,t){n=ie(n),n.dep&&_o(n.dep)}function Se(n){return!!(n&&n.__v_isRef===!0)}function pi(n){return Zu(n,!1)}function Qp(n){return Zu(n,!0)}function Zu(n,t){return Se(n)?n:new Jp(n,t)}class Jp{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:ie(t),this._value=s?t:Vs(t)}get value(){return Qu(this),this._value}set value(t){t=this.__v_isShallow?t:ie(t),Fs(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Vs(t),Ju(this))}}function pt(n){return Se(n)?n.value:n}const Zp={get:(n,t,s)=>pt(Reflect.get(n,t,s)),set:(n,t,s,r)=>{const i=n[t];return Se(i)&&!Se(s)?(i.value=s,!0):Reflect.set(n,t,s,r)}};function eh(n){return Lt(n)?n:new Proxy(n,Zp)}function eg(n){const t=W(n)?new Array(n.length):{};for(const s in n)t[s]=th(n,s);return t}class tg{constructor(t,s,r){this._object=t,this._key=s,this._defaultValue=r,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function th(n,t,s){const r=n[t];return Se(r)?r:new tg(n,t,s)}class ng{constructor(t,s,r,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new Ca(t,()=>{this._dirty||(this._dirty=!0,Ju(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=r}get value(){const t=ie(this);return Qu(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function sg(n,t,s=!1){let r,i;const o=Z(n);return o?(r=n,i=_t):(r=n.get,i=n.set),new ng(r,i,o||!i,s)}function Yt(n,t,s,r){let i;try{i=r?n(...r):n()}catch(o){gi(o,t,s)}return i}function gt(n,t,s,r){if(Z(n)){const o=Yt(n,t,s,r);return o&&ku(o)&&o.catch(a=>{gi(a,t,s)}),o}const i=[];for(let o=0;o<n.length;o++)i.push(gt(n[o],t,s,r));return i}function gi(n,t,s,r=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,c=s;for(;o;){const u=o.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](n,a,c)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){Yt(l,null,10,[n,a,c]);return}}rg(n,s,i,r)}function rg(n,t,s,r=!0){console.error(n)}let Vr=!1,bo=!1;const ct=[];let Pt=0;const Is=[];let Ts=null,Pn=0;const As=[];let Kt=null,Mn=0;const nh=Promise.resolve();let xa=null,To=null;function Da(n){const t=xa||nh;return n?t.then(this?n.bind(this):n):t}function ig(n){let t=Pt+1,s=ct.length;for(;t<s;){const r=t+s>>>1;Us(ct[r])<n?t=r+1:s=r}return t}function sh(n){(!ct.length||!ct.includes(n,Vr&&n.allowRecurse?Pt+1:Pt))&&n!==To&&(n.id==null?ct.push(n):ct.splice(ig(n.id),0,n),rh())}function rh(){!Vr&&!bo&&(bo=!0,xa=nh.then(ah))}function og(n){const t=ct.indexOf(n);t>Pt&&ct.splice(t,1)}function ih(n,t,s,r){W(n)?s.push(...n):(!t||!t.includes(n,n.allowRecurse?r+1:r))&&s.push(n),rh()}function ag(n){ih(n,Ts,Is,Pn)}function cg(n){ih(n,Kt,As,Mn)}function ka(n,t=null){if(Is.length){for(To=t,Ts=[...new Set(Is)],Is.length=0,Pn=0;Pn<Ts.length;Pn++)Ts[Pn]();Ts=null,Pn=0,To=null,ka(n,t)}}function oh(n){if(As.length){const t=[...new Set(As)];if(As.length=0,Kt){Kt.push(...t);return}for(Kt=t,Kt.sort((s,r)=>Us(s)-Us(r)),Mn=0;Mn<Kt.length;Mn++)Kt[Mn]();Kt=null,Mn=0}}const Us=n=>n.id==null?1/0:n.id;function ah(n){bo=!1,Vr=!0,ka(n),ct.sort((s,r)=>Us(s)-Us(r));const t=_t;try{for(Pt=0;Pt<ct.length;Pt++){const s=ct[Pt];s&&s.active!==!1&&Yt(s,null,14)}}finally{Pt=0,ct.length=0,oh(),Vr=!1,xa=null,(ct.length||Is.length||As.length)&&ah(n)}}function lg(n,t,...s){if(n.isUnmounted)return;const r=n.vnode.props||ve;let i=s;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in r){const h=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:p}=r[h]||ve;p?i=s.map(m=>m.trim()):f&&(i=s.map(bp))}let c,l=r[c=Yi(t)]||r[c=Yi(zn(t))];!l&&o&&(l=r[c=Yi(os(t))]),l&&gt(l,n,6,i);const u=r[c+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[c])return;n.emitted[c]=!0,gt(u,n,6,i)}}function ch(n,t,s=!1){const r=t.emitsCache,i=r.get(n);if(i!==void 0)return i;const o=n.emits;let a={},c=!1;if(!Z(n)){const l=u=>{const h=ch(u,t,!0);h&&(c=!0,Xe(a,h))};!s&&t.mixins.length&&t.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!o&&!c?(r.set(n,null),null):(W(o)?o.forEach(l=>a[l]=null):Xe(a,o),r.set(n,a),a)}function mi(n,t){return!n||!ui(t)?!1:(t=t.slice(2).replace(/Once$/,""),se(n,t[0].toLowerCase()+t.slice(1))||se(n,os(t))||se(n,t))}let xt=null,yi=null;function Ur(n){const t=xt;return xt=n,yi=n&&n.type.__scopeId||null,t}function lh(n){yi=n}function uh(){yi=null}function Co(n,t=xt,s){if(!t||n._n)return n;const r=(...i)=>{r._d&&rl(-1);const o=Ur(t),a=n(...i);return Ur(o),r._d&&rl(1),a};return r._n=!0,r._c=!0,r._d=!0,r}function Qi(n){const{type:t,vnode:s,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:c,attrs:l,emit:u,render:h,renderCache:f,data:p,setupState:m,ctx:v,inheritAttrs:S}=n;let R,D;const B=Ur(n);try{if(s.shapeFlag&4){const H=i||r;R=Rt(h.call(H,H,f,o,m,p,v)),D=l}else{const H=t;R=Rt(H.length>1?H(o,{attrs:l,slots:c,emit:u}):H(o,null)),D=t.props?l:ug(l)}}catch(H){Rs.length=0,gi(H,n,1),R=Me(bt)}let Q=R;if(D&&S!==!1){const H=Object.keys(D),{shapeFlag:oe}=Q;H.length&&oe&7&&(a&&H.some(wa)&&(D=hg(D,a)),Q=yn(Q,D))}return s.dirs&&(Q.dirs=Q.dirs?Q.dirs.concat(s.dirs):s.dirs),s.transition&&(Q.transition=s.transition),R=Q,Ur(B),R}const ug=n=>{let t;for(const s in n)(s==="class"||s==="style"||ui(s))&&((t||(t={}))[s]=n[s]);return t},hg=(n,t)=>{const s={};for(const r in n)(!wa(r)||!(r.slice(9)in t))&&(s[r]=n[r]);return s};function fg(n,t,s){const{props:r,children:i,component:o}=n,{props:a,children:c,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?Yc(r,a,u):!!a;if(l&8){const h=t.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(a[p]!==r[p]&&!mi(u,p))return!0}}}else return(i||c)&&(!c||!c.$stable)?!0:r===a?!1:r?a?Yc(r,a,u):!0:!!a;return!1}function Yc(n,t,s){const r=Object.keys(t);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==n[o]&&!mi(s,o))return!0}return!1}function dg({vnode:n,parent:t},s){for(;t&&t.subTree===n;)(n=t.vnode).el=s,t=t.parent}const pg=n=>n.__isSuspense;function gg(n,t){t&&t.pendingBranch?W(n)?t.effects.push(...n):t.effects.push(n):cg(n)}function Dr(n,t){if($e){let s=$e.provides;const r=$e.parent&&$e.parent.provides;r===s&&(s=$e.provides=Object.create(r)),s[n]=t}}function Ft(n,t,s=!1){const r=$e||xt;if(r){const i=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&n in i)return i[n];if(arguments.length>1)return s&&Z(t)?t.call(r.proxy):t}}const Xc={};function Ns(n,t,s){return hh(n,t,s)}function hh(n,t,{immediate:s,deep:r,flush:i,onTrack:o,onTrigger:a}=ve){const c=$e;let l,u=!1,h=!1;if(Se(n)?(l=()=>n.value,u=Yu(n)):Lt(n)?(l=()=>n,r=!0):W(n)?(h=!0,u=n.some(Lt),l=()=>n.map(D=>{if(Se(D))return D.value;if(Lt(D))return Fn(D);if(Z(D))return Yt(D,c,2)})):Z(n)?t?l=()=>Yt(n,c,2):l=()=>{if(!(c&&c.isUnmounted))return f&&f(),gt(n,c,3,[p])}:l=_t,t&&r){const D=l;l=()=>Fn(D())}let f,p=D=>{f=R.onStop=()=>{Yt(D,c,4)}};if($s)return p=_t,t?s&&gt(t,c,3,[l(),h?[]:void 0,p]):l(),_t;let m=h?[]:Xc;const v=()=>{if(!!R.active)if(t){const D=R.run();(r||u||(h?D.some((B,Q)=>Fs(B,m[Q])):Fs(D,m)))&&(f&&f(),gt(t,c,3,[D,m===Xc?void 0:m,p]),m=D)}else R.run()};v.allowRecurse=!!t;let S;i==="sync"?S=v:i==="post"?S=()=>nt(v,c&&c.suspense):S=()=>{!c||c.isMounted?ag(v):v()};const R=new Ca(l,S);return t?s?v():m=R.run():i==="post"?nt(R.run.bind(R),c&&c.suspense):R.run(),()=>{R.stop(),c&&c.scope&&Ea(c.scope.effects,R)}}function mg(n,t,s){const r=this.proxy,i=Le(n)?n.includes(".")?fh(r,n):()=>r[n]:n.bind(r,r);let o;Z(t)?o=t:(o=t.handler,s=t);const a=$e;Wn(this);const c=hh(i,o.bind(r),s);return a?Wn(a):gn(),c}function fh(n,t){const s=t.split(".");return()=>{let r=n;for(let i=0;i<s.length&&r;i++)r=r[s[i]];return r}}function Fn(n,t){if(!ke(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),Se(n))Fn(n.value,t);else if(W(n))for(let s=0;s<n.length;s++)Fn(n[s],t);else if(Du(n)||$n(n))n.forEach(s=>{Fn(s,t)});else if(Pu(n))for(const s in n)Fn(n[s],t);return n}function yg(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return yh(()=>{n.isMounted=!0}),vh(()=>{n.isUnmounting=!0}),n}const ft=[Function,Array],vg={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ft,onEnter:ft,onAfterEnter:ft,onEnterCancelled:ft,onBeforeLeave:ft,onLeave:ft,onAfterLeave:ft,onLeaveCancelled:ft,onBeforeAppear:ft,onAppear:ft,onAfterAppear:ft,onAppearCancelled:ft},setup(n,{slots:t}){const s=Ba(),r=yg();let i;return()=>{const o=t.default&&ph(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1){for(const S of o)if(S.type!==bt){a=S;break}}const c=ie(n),{mode:l}=c;if(r.isLeaving)return Ji(a);const u=Qc(a);if(!u)return Ji(a);const h=So(u,c,r,s);Io(u,h);const f=s.subTree,p=f&&Qc(f);let m=!1;const{getTransitionKey:v}=u.type;if(v){const S=v();i===void 0?i=S:S!==i&&(i=S,m=!0)}if(p&&p.type!==bt&&(!ln(u,p)||m)){const S=So(p,c,r,s);if(Io(p,S),l==="out-in")return r.isLeaving=!0,S.afterLeave=()=>{r.isLeaving=!1,s.update()},Ji(a);l==="in-out"&&u.type!==bt&&(S.delayLeave=(R,D,B)=>{const Q=dh(r,p);Q[String(p.key)]=p,R._leaveCb=()=>{D(),R._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=B})}return a}}},wg=vg;function dh(n,t){const{leavingVNodes:s}=n;let r=s.get(t.type);return r||(r=Object.create(null),s.set(t.type,r)),r}function So(n,t,s,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:c,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:f,onLeave:p,onAfterLeave:m,onLeaveCancelled:v,onBeforeAppear:S,onAppear:R,onAfterAppear:D,onAppearCancelled:B}=t,Q=String(n.key),H=dh(s,n),oe=(P,pe)=>{P&&gt(P,r,9,pe)},X={mode:o,persisted:a,beforeEnter(P){let pe=c;if(!s.isMounted)if(i)pe=S||c;else return;P._leaveCb&&P._leaveCb(!0);const le=H[Q];le&&ln(n,le)&&le.el._leaveCb&&le.el._leaveCb(),oe(pe,[P])},enter(P){let pe=l,le=u,Ie=h;if(!s.isMounted)if(i)pe=R||l,le=D||u,Ie=B||h;else return;let Oe=!1;const Ve=P._enterCb=tt=>{Oe||(Oe=!0,tt?oe(Ie,[P]):oe(le,[P]),X.delayedLeave&&X.delayedLeave(),P._enterCb=void 0)};pe?(pe(P,Ve),pe.length<=1&&Ve()):Ve()},leave(P,pe){const le=String(n.key);if(P._enterCb&&P._enterCb(!0),s.isUnmounting)return pe();oe(f,[P]);let Ie=!1;const Oe=P._leaveCb=Ve=>{Ie||(Ie=!0,pe(),Ve?oe(v,[P]):oe(m,[P]),P._leaveCb=void 0,H[le]===n&&delete H[le])};H[le]=n,p?(p(P,Oe),p.length<=1&&Oe()):Oe()},clone(P){return So(P,t,s,r)}};return X}function Ji(n){if(vi(n))return n=yn(n),n.children=null,n}function Qc(n){return vi(n)?n.children?n.children[0]:void 0:n}function Io(n,t){n.shapeFlag&6&&n.component?Io(n.component.subTree,t):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}function ph(n,t=!1,s){let r=[],i=0;for(let o=0;o<n.length;o++){let a=n[o];const c=s==null?a.key:String(s)+String(a.key!=null?a.key:o);a.type===dt?(a.patchFlag&128&&i++,r=r.concat(ph(a.children,t,c))):(t||a.type!==bt)&&r.push(c!=null?yn(a,{key:c}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function gh(n){return Z(n)?{setup:n,name:n.name}:n}const Ao=n=>!!n.type.__asyncLoader,vi=n=>n.type.__isKeepAlive;function Eg(n,t){mh(n,"a",t)}function _g(n,t){mh(n,"da",t)}function mh(n,t,s=$e){const r=n.__wdc||(n.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(wi(t,r,s),s){let i=s.parent;for(;i&&i.parent;)vi(i.parent.vnode)&&bg(r,t,s,i),i=i.parent}}function bg(n,t,s,r){const i=wi(t,n,r,!0);Oa(()=>{Ea(r[t],i)},s)}function wi(n,t,s=$e,r=!1){if(s){const i=s[n]||(s[n]=[]),o=t.__weh||(t.__weh=(...a)=>{if(s.isUnmounted)return;as(),Wn(s);const c=gt(t,s,n,a);return gn(),cs(),c});return r?i.unshift(o):i.push(o),o}}const $t=n=>(t,s=$e)=>(!$s||n==="sp")&&wi(n,t,s),Tg=$t("bm"),yh=$t("m"),Cg=$t("bu"),Sg=$t("u"),vh=$t("bum"),Oa=$t("um"),Ig=$t("sp"),Ag=$t("rtg"),Ng=$t("rtc");function Rg(n,t=$e){wi("ec",n,t)}let No=!0;function xg(n){const t=Eh(n),s=n.proxy,r=n.ctx;No=!1,t.beforeCreate&&Jc(t.beforeCreate,n,"bc");const{data:i,computed:o,methods:a,watch:c,provide:l,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:m,updated:v,activated:S,deactivated:R,beforeDestroy:D,beforeUnmount:B,destroyed:Q,unmounted:H,render:oe,renderTracked:X,renderTriggered:P,errorCaptured:pe,serverPrefetch:le,expose:Ie,inheritAttrs:Oe,components:Ve,directives:tt,filters:xe}=t;if(u&&Dg(u,r,null,n.appContext.config.unwrapInjectedRef),a)for(const ge in a){const ue=a[ge];Z(ue)&&(r[ge]=ue.bind(s))}if(i){const ge=i.call(s,s);ke(ge)&&(n.data=ls(ge))}if(No=!0,o)for(const ge in o){const ue=o[ge],ot=Z(ue)?ue.bind(s,s):Z(ue.get)?ue.get.bind(s,s):_t,Nn=!Z(ue)&&Z(ue.set)?ue.set.bind(s):_t,kt=wt({get:ot,set:Nn});Object.defineProperty(r,ge,{enumerable:!0,configurable:!0,get:()=>kt.value,set:Ct=>kt.value=Ct})}if(c)for(const ge in c)wh(c[ge],r,s,ge);if(l){const ge=Z(l)?l.call(s):l;Reflect.ownKeys(ge).forEach(ue=>{Dr(ue,ge[ue])})}h&&Jc(h,n,"c");function De(ge,ue){W(ue)?ue.forEach(ot=>ge(ot.bind(s))):ue&&ge(ue.bind(s))}if(De(Tg,f),De(yh,p),De(Cg,m),De(Sg,v),De(Eg,S),De(_g,R),De(Rg,pe),De(Ng,X),De(Ag,P),De(vh,B),De(Oa,H),De(Ig,le),W(Ie))if(Ie.length){const ge=n.exposed||(n.exposed={});Ie.forEach(ue=>{Object.defineProperty(ge,ue,{get:()=>s[ue],set:ot=>s[ue]=ot})})}else n.exposed||(n.exposed={});oe&&n.render===_t&&(n.render=oe),Oe!=null&&(n.inheritAttrs=Oe),Ve&&(n.components=Ve),tt&&(n.directives=tt)}function Dg(n,t,s=_t,r=!1){W(n)&&(n=Ro(n));for(const i in n){const o=n[i];let a;ke(o)?"default"in o?a=Ft(o.from||i,o.default,!0):a=Ft(o.from||i):a=Ft(o),Se(a)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:c=>a.value=c}):t[i]=a}}function Jc(n,t,s){gt(W(n)?n.map(r=>r.bind(t.proxy)):n.bind(t.proxy),t,s)}function wh(n,t,s,r){const i=r.includes(".")?fh(s,r):()=>s[r];if(Le(n)){const o=t[n];Z(o)&&Ns(i,o)}else if(Z(n))Ns(i,n.bind(s));else if(ke(n))if(W(n))n.forEach(o=>wh(o,t,s,r));else{const o=Z(n.handler)?n.handler.bind(s):t[n.handler];Z(o)&&Ns(i,o,n)}}function Eh(n){const t=n.type,{mixins:s,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=n.appContext,c=o.get(t);let l;return c?l=c:!i.length&&!s&&!r?l=t:(l={},i.length&&i.forEach(u=>$r(l,u,a,!0)),$r(l,t,a)),o.set(t,l),l}function $r(n,t,s,r=!1){const{mixins:i,extends:o}=t;o&&$r(n,o,s,!0),i&&i.forEach(a=>$r(n,a,s,!0));for(const a in t)if(!(r&&a==="expose")){const c=kg[a]||s&&s[a];n[a]=c?c(n[a],t[a]):t[a]}return n}const kg={data:Zc,props:an,emits:an,methods:an,computed:an,beforeCreate:Qe,created:Qe,beforeMount:Qe,mounted:Qe,beforeUpdate:Qe,updated:Qe,beforeDestroy:Qe,beforeUnmount:Qe,destroyed:Qe,unmounted:Qe,activated:Qe,deactivated:Qe,errorCaptured:Qe,serverPrefetch:Qe,components:an,directives:an,watch:Pg,provide:Zc,inject:Og};function Zc(n,t){return t?n?function(){return Xe(Z(n)?n.call(this,this):n,Z(t)?t.call(this,this):t)}:t:n}function Og(n,t){return an(Ro(n),Ro(t))}function Ro(n){if(W(n)){const t={};for(let s=0;s<n.length;s++)t[n[s]]=n[s];return t}return n}function Qe(n,t){return n?[...new Set([].concat(n,t))]:t}function an(n,t){return n?Xe(Xe(Object.create(null),n),t):t}function Pg(n,t){if(!n)return t;if(!t)return n;const s=Xe(Object.create(null),n);for(const r in t)s[r]=Qe(n[r],t[r]);return s}function Mg(n,t,s,r=!1){const i={},o={};Br(o,Ei,1),n.propsDefaults=Object.create(null),_h(n,t,i,o);for(const a in n.propsOptions[0])a in i||(i[a]=void 0);s?n.props=r?i:Xp(i):n.type.props?n.props=i:n.props=o,n.attrs=o}function Lg(n,t,s,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=n,c=ie(i),[l]=n.propsOptions;let u=!1;if((r||a>0)&&!(a&16)){if(a&8){const h=n.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(mi(n.emitsOptions,p))continue;const m=t[p];if(l)if(se(o,p))m!==o[p]&&(o[p]=m,u=!0);else{const v=zn(p);i[v]=xo(l,c,v,m,n,!1)}else m!==o[p]&&(o[p]=m,u=!0)}}}else{_h(n,t,i,o)&&(u=!0);let h;for(const f in c)(!t||!se(t,f)&&((h=os(f))===f||!se(t,h)))&&(l?s&&(s[f]!==void 0||s[h]!==void 0)&&(i[f]=xo(l,c,f,void 0,n,!0)):delete i[f]);if(o!==c)for(const f in o)(!t||!se(t,f)&&!0)&&(delete o[f],u=!0)}u&&Vt(n,"set","$attrs")}function _h(n,t,s,r){const[i,o]=n.propsOptions;let a=!1,c;if(t)for(let l in t){if(xr(l))continue;const u=t[l];let h;i&&se(i,h=zn(l))?!o||!o.includes(h)?s[h]=u:(c||(c={}))[h]=u:mi(n.emitsOptions,l)||(!(l in r)||u!==r[l])&&(r[l]=u,a=!0)}if(o){const l=ie(s),u=c||ve;for(let h=0;h<o.length;h++){const f=o[h];s[f]=xo(i,l,f,u[f],n,!se(u,f))}}return a}function xo(n,t,s,r,i,o){const a=n[s];if(a!=null){const c=se(a,"default");if(c&&r===void 0){const l=a.default;if(a.type!==Function&&Z(l)){const{propsDefaults:u}=i;s in u?r=u[s]:(Wn(i),r=u[s]=l.call(null,t),gn())}else r=l}a[0]&&(o&&!c?r=!1:a[1]&&(r===""||r===os(s))&&(r=!0))}return r}function bh(n,t,s=!1){const r=t.propsCache,i=r.get(n);if(i)return i;const o=n.props,a={},c=[];let l=!1;if(!Z(n)){const h=f=>{l=!0;const[p,m]=bh(f,t,!0);Xe(a,p),m&&c.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}if(!o&&!l)return r.set(n,Un),Un;if(W(o))for(let h=0;h<o.length;h++){const f=zn(o[h]);el(f)&&(a[f]=ve)}else if(o)for(const h in o){const f=zn(h);if(el(f)){const p=o[h],m=a[f]=W(p)||Z(p)?{type:p}:p;if(m){const v=sl(Boolean,m.type),S=sl(String,m.type);m[0]=v>-1,m[1]=S<0||v<S,(v>-1||se(m,"default"))&&c.push(f)}}}const u=[a,c];return r.set(n,u),u}function el(n){return n[0]!=="$"}function tl(n){const t=n&&n.toString().match(/^\s*function (\w+)/);return t?t[1]:n===null?"null":""}function nl(n,t){return tl(n)===tl(t)}function sl(n,t){return W(t)?t.findIndex(s=>nl(s,n)):Z(t)&&nl(t,n)?0:-1}const Th=n=>n[0]==="_"||n==="$stable",Pa=n=>W(n)?n.map(Rt):[Rt(n)],Fg=(n,t,s)=>{const r=Co((...i)=>Pa(t(...i)),s);return r._c=!1,r},Ch=(n,t,s)=>{const r=n._ctx;for(const i in n){if(Th(i))continue;const o=n[i];if(Z(o))t[i]=Fg(i,o,r);else if(o!=null){const a=Pa(o);t[i]=()=>a}}},Sh=(n,t)=>{const s=Pa(t);n.slots.default=()=>s},Bg=(n,t)=>{if(n.vnode.shapeFlag&32){const s=t._;s?(n.slots=ie(t),Br(t,"_",s)):Ch(t,n.slots={})}else n.slots={},t&&Sh(n,t);Br(n.slots,Ei,1)},Vg=(n,t,s)=>{const{vnode:r,slots:i}=n;let o=!0,a=ve;if(r.shapeFlag&32){const c=t._;c?s&&c===1?o=!1:(Xe(i,t),!s&&c===1&&delete i._):(o=!t.$stable,Ch(t,i)),a=t}else t&&(Sh(n,t),a={default:1});if(o)for(const c in i)!Th(c)&&!(c in a)&&delete i[c]};function rn(n,t,s,r){const i=n.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const c=i[a];o&&(c.oldValue=o[a].value);let l=c.dir[r];l&&(as(),gt(l,s,8,[n.el,c,n,t]),cs())}}function Ih(){return{app:null,config:{isNativeTag:mp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ug=0;function $g(n,t){return function(r,i=null){Z(r)||(r=Object.assign({},r)),i!=null&&!ke(i)&&(i=null);const o=Ih(),a=new Set;let c=!1;const l=o.app={_uid:Ug++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:lm,get config(){return o.config},set config(u){},use(u,...h){return a.has(u)||(u&&Z(u.install)?(a.add(u),u.install(l,...h)):Z(u)&&(a.add(u),u(l,...h))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,h){return h?(o.components[u]=h,l):o.components[u]},directive(u,h){return h?(o.directives[u]=h,l):o.directives[u]},mount(u,h,f){if(!c){const p=Me(r,i);return p.appContext=o,h&&t?t(p,u):n(p,u,f),c=!0,l._container=u,u.__vue_app__=l,Va(p.component)||p.component.proxy}},unmount(){c&&(n(null,l._container),delete l._container.__vue_app__)},provide(u,h){return o.provides[u]=h,l}};return l}}function Do(n,t,s,r,i=!1){if(W(n)){n.forEach((p,m)=>Do(p,t&&(W(t)?t[m]:t),s,r,i));return}if(Ao(r)&&!i)return;const o=r.shapeFlag&4?Va(r.component)||r.component.proxy:r.el,a=i?null:o,{i:c,r:l}=n,u=t&&t.r,h=c.refs===ve?c.refs={}:c.refs,f=c.setupState;if(u!=null&&u!==l&&(Le(u)?(h[u]=null,se(f,u)&&(f[u]=null)):Se(u)&&(u.value=null)),Z(l))Yt(l,c,12,[a,h]);else{const p=Le(l),m=Se(l);if(p||m){const v=()=>{if(n.f){const S=p?h[l]:l.value;i?W(S)&&Ea(S,o):W(S)?S.includes(o)||S.push(o):p?(h[l]=[o],se(f,l)&&(f[l]=h[l])):(l.value=[o],n.k&&(h[n.k]=l.value))}else p?(h[l]=a,se(f,l)&&(f[l]=a)):Se(l)&&(l.value=a,n.k&&(h[n.k]=a))};a?(v.id=-1,nt(v,s)):v()}}}const nt=gg;function jg(n){return Hg(n)}function Hg(n,t){const s=Tp();s.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:a,createText:c,createComment:l,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:m=_t,cloneNode:v,insertStaticContent:S}=n,R=(d,g,y,_=null,E=null,I=null,k=!1,C=null,N=!!g.dynamicChildren)=>{if(d===g)return;d&&!ln(d,g)&&(_=V(d),ht(d,E,I,!0),d=null),g.patchFlag===-2&&(N=!1,g.dynamicChildren=null);const{type:b,ref:U,shapeFlag:M}=g;switch(b){case Ma:D(d,g,y,_);break;case bt:B(d,g,y,_);break;case Zi:d==null&&Q(g,y,_,k);break;case dt:tt(d,g,y,_,E,I,k,C,N);break;default:M&1?X(d,g,y,_,E,I,k,C,N):M&6?xe(d,g,y,_,E,I,k,C,N):(M&64||M&128)&&b.process(d,g,y,_,E,I,k,C,N,me)}U!=null&&E&&Do(U,d&&d.ref,I,g||d,!g)},D=(d,g,y,_)=>{if(d==null)r(g.el=c(g.children),y,_);else{const E=g.el=d.el;g.children!==d.children&&u(E,g.children)}},B=(d,g,y,_)=>{d==null?r(g.el=l(g.children||""),y,_):g.el=d.el},Q=(d,g,y,_)=>{[d.el,d.anchor]=S(d.children,g,y,_,d.el,d.anchor)},H=({el:d,anchor:g},y,_)=>{let E;for(;d&&d!==g;)E=p(d),r(d,y,_),d=E;r(g,y,_)},oe=({el:d,anchor:g})=>{let y;for(;d&&d!==g;)y=p(d),i(d),d=y;i(g)},X=(d,g,y,_,E,I,k,C,N)=>{k=k||g.type==="svg",d==null?P(g,y,_,E,I,k,C,N):Ie(d,g,E,I,k,C,N)},P=(d,g,y,_,E,I,k,C)=>{let N,b;const{type:U,props:M,shapeFlag:$,transition:z,patchFlag:re,dirs:be}=d;if(d.el&&v!==void 0&&re===-1)N=d.el=v(d.el);else{if(N=d.el=a(d.type,I,M&&M.is,M),$&8?h(N,d.children):$&16&&le(d.children,N,null,_,E,I&&U!=="foreignObject",k,C),be&&rn(d,null,_,"created"),M){for(const Ee in M)Ee!=="value"&&!xr(Ee)&&o(N,Ee,null,M[Ee],I,d.children,_,E,x);"value"in M&&o(N,"value",null,M.value),(b=M.onVnodeBeforeMount)&&It(b,_,d)}pe(N,d,d.scopeId,k,_)}be&&rn(d,null,_,"beforeMount");const fe=(!E||E&&!E.pendingBranch)&&z&&!z.persisted;fe&&z.beforeEnter(N),r(N,g,y),((b=M&&M.onVnodeMounted)||fe||be)&&nt(()=>{b&&It(b,_,d),fe&&z.enter(N),be&&rn(d,null,_,"mounted")},E)},pe=(d,g,y,_,E)=>{if(y&&m(d,y),_)for(let I=0;I<_.length;I++)m(d,_[I]);if(E){let I=E.subTree;if(g===I){const k=E.vnode;pe(d,k,k.scopeId,k.slotScopeIds,E.parent)}}},le=(d,g,y,_,E,I,k,C,N=0)=>{for(let b=N;b<d.length;b++){const U=d[b]=C?zt(d[b]):Rt(d[b]);R(null,U,g,y,_,E,I,k,C)}},Ie=(d,g,y,_,E,I,k)=>{const C=g.el=d.el;let{patchFlag:N,dynamicChildren:b,dirs:U}=g;N|=d.patchFlag&16;const M=d.props||ve,$=g.props||ve;let z;y&&on(y,!1),(z=$.onVnodeBeforeUpdate)&&It(z,y,g,d),U&&rn(g,d,y,"beforeUpdate"),y&&on(y,!0);const re=E&&g.type!=="foreignObject";if(b?Oe(d.dynamicChildren,b,C,y,_,re,I):k||ot(d,g,C,null,y,_,re,I,!1),N>0){if(N&16)Ve(C,g,M,$,y,_,E);else if(N&2&&M.class!==$.class&&o(C,"class",null,$.class,E),N&4&&o(C,"style",M.style,$.style,E),N&8){const be=g.dynamicProps;for(let fe=0;fe<be.length;fe++){const Ee=be[fe],mt=M[Ee],Rn=$[Ee];(Rn!==mt||Ee==="value")&&o(C,Ee,mt,Rn,E,d.children,y,_,x)}}N&1&&d.children!==g.children&&h(C,g.children)}else!k&&b==null&&Ve(C,g,M,$,y,_,E);((z=$.onVnodeUpdated)||U)&&nt(()=>{z&&It(z,y,g,d),U&&rn(g,d,y,"updated")},_)},Oe=(d,g,y,_,E,I,k)=>{for(let C=0;C<g.length;C++){const N=d[C],b=g[C],U=N.el&&(N.type===dt||!ln(N,b)||N.shapeFlag&70)?f(N.el):y;R(N,b,U,null,_,E,I,k,!0)}},Ve=(d,g,y,_,E,I,k)=>{if(y!==_){for(const C in _){if(xr(C))continue;const N=_[C],b=y[C];N!==b&&C!=="value"&&o(d,C,b,N,k,g.children,E,I,x)}if(y!==ve)for(const C in y)!xr(C)&&!(C in _)&&o(d,C,y[C],null,k,g.children,E,I,x);"value"in _&&o(d,"value",y.value,_.value)}},tt=(d,g,y,_,E,I,k,C,N)=>{const b=g.el=d?d.el:c(""),U=g.anchor=d?d.anchor:c("");let{patchFlag:M,dynamicChildren:$,slotScopeIds:z}=g;z&&(C=C?C.concat(z):z),d==null?(r(b,y,_),r(U,y,_),le(g.children,y,U,E,I,k,C,N)):M>0&&M&64&&$&&d.dynamicChildren?(Oe(d.dynamicChildren,$,y,E,I,k,C),(g.key!=null||E&&g===E.subTree)&&Ah(d,g,!0)):ot(d,g,y,U,E,I,k,C,N)},xe=(d,g,y,_,E,I,k,C,N)=>{g.slotScopeIds=C,d==null?g.shapeFlag&512?E.ctx.activate(g,y,_,k,N):An(g,y,_,E,I,k,N):De(d,g,N)},An=(d,g,y,_,E,I,k)=>{const C=d.component=sm(d,_,E);if(vi(d)&&(C.ctx.renderer=me),rm(C),C.asyncDep){if(E&&E.registerDep(C,ge),!d.el){const N=C.subTree=Me(bt);B(null,N,g,y)}return}ge(C,d,g,y,E,I,k)},De=(d,g,y)=>{const _=g.component=d.component;if(fg(d,g,y))if(_.asyncDep&&!_.asyncResolved){ue(_,g,y);return}else _.next=g,og(_.update),_.update();else g.component=d.component,g.el=d.el,_.vnode=g},ge=(d,g,y,_,E,I,k)=>{const C=()=>{if(d.isMounted){let{next:U,bu:M,u:$,parent:z,vnode:re}=d,be=U,fe;on(d,!1),U?(U.el=re.el,ue(d,U,k)):U=re,M&&Xi(M),(fe=U.props&&U.props.onVnodeBeforeUpdate)&&It(fe,z,U,re),on(d,!0);const Ee=Qi(d),mt=d.subTree;d.subTree=Ee,R(mt,Ee,f(mt.el),V(mt),d,E,I),U.el=Ee.el,be===null&&dg(d,Ee.el),$&&nt($,E),(fe=U.props&&U.props.onVnodeUpdated)&&nt(()=>It(fe,z,U,re),E)}else{let U;const{el:M,props:$}=g,{bm:z,m:re,parent:be}=d,fe=Ao(g);if(on(d,!1),z&&Xi(z),!fe&&(U=$&&$.onVnodeBeforeMount)&&It(U,be,g),on(d,!0),M&&J){const Ee=()=>{d.subTree=Qi(d),J(M,d.subTree,d,E,null)};fe?g.type.__asyncLoader().then(()=>!d.isUnmounted&&Ee()):Ee()}else{const Ee=d.subTree=Qi(d);R(null,Ee,y,_,d,E,I),g.el=Ee.el}if(re&&nt(re,E),!fe&&(U=$&&$.onVnodeMounted)){const Ee=g;nt(()=>It(U,be,Ee),E)}g.shapeFlag&256&&d.a&&nt(d.a,E),d.isMounted=!0,g=y=_=null}},N=d.effect=new Ca(C,()=>sh(d.update),d.scope),b=d.update=N.run.bind(N);b.id=d.uid,on(d,!0),b()},ue=(d,g,y)=>{g.component=d;const _=d.vnode.props;d.vnode=g,d.next=null,Lg(d,g.props,_,y),Vg(d,g.children,y),as(),ka(void 0,d.update),cs()},ot=(d,g,y,_,E,I,k,C,N=!1)=>{const b=d&&d.children,U=d?d.shapeFlag:0,M=g.children,{patchFlag:$,shapeFlag:z}=g;if($>0){if($&128){kt(b,M,y,_,E,I,k,C,N);return}else if($&256){Nn(b,M,y,_,E,I,k,C,N);return}}z&8?(U&16&&x(b,E,I),M!==b&&h(y,M)):U&16?z&16?kt(b,M,y,_,E,I,k,C,N):x(b,E,I,!0):(U&8&&h(y,""),z&16&&le(M,y,_,E,I,k,C,N))},Nn=(d,g,y,_,E,I,k,C,N)=>{d=d||Un,g=g||Un;const b=d.length,U=g.length,M=Math.min(b,U);let $;for($=0;$<M;$++){const z=g[$]=N?zt(g[$]):Rt(g[$]);R(d[$],z,y,null,E,I,k,C,N)}b>U?x(d,E,I,!0,!1,M):le(g,y,_,E,I,k,C,N,M)},kt=(d,g,y,_,E,I,k,C,N)=>{let b=0;const U=g.length;let M=d.length-1,$=U-1;for(;b<=M&&b<=$;){const z=d[b],re=g[b]=N?zt(g[b]):Rt(g[b]);if(ln(z,re))R(z,re,y,null,E,I,k,C,N);else break;b++}for(;b<=M&&b<=$;){const z=d[M],re=g[$]=N?zt(g[$]):Rt(g[$]);if(ln(z,re))R(z,re,y,null,E,I,k,C,N);else break;M--,$--}if(b>M){if(b<=$){const z=$+1,re=z<U?g[z].el:_;for(;b<=$;)R(null,g[b]=N?zt(g[b]):Rt(g[b]),y,re,E,I,k,C,N),b++}}else if(b>$)for(;b<=M;)ht(d[b],E,I,!0),b++;else{const z=b,re=b,be=new Map;for(b=re;b<=$;b++){const at=g[b]=N?zt(g[b]):Rt(g[b]);at.key!=null&&be.set(at.key,b)}let fe,Ee=0;const mt=$-re+1;let Rn=!1,Vc=0;const ws=new Array(mt);for(b=0;b<mt;b++)ws[b]=0;for(b=z;b<=M;b++){const at=d[b];if(Ee>=mt){ht(at,E,I,!0);continue}let St;if(at.key!=null)St=be.get(at.key);else for(fe=re;fe<=$;fe++)if(ws[fe-re]===0&&ln(at,g[fe])){St=fe;break}St===void 0?ht(at,E,I,!0):(ws[St-re]=b+1,St>=Vc?Vc=St:Rn=!0,R(at,g[St],y,null,E,I,k,C,N),Ee++)}const Uc=Rn?qg(ws):Un;for(fe=Uc.length-1,b=mt-1;b>=0;b--){const at=re+b,St=g[at],$c=at+1<U?g[at+1].el:_;ws[b]===0?R(null,St,y,$c,E,I,k,C,N):Rn&&(fe<0||b!==Uc[fe]?Ct(St,y,$c,2):fe--)}}},Ct=(d,g,y,_,E=null)=>{const{el:I,type:k,transition:C,children:N,shapeFlag:b}=d;if(b&6){Ct(d.component.subTree,g,y,_);return}if(b&128){d.suspense.move(g,y,_);return}if(b&64){k.move(d,g,y,me);return}if(k===dt){r(I,g,y);for(let M=0;M<N.length;M++)Ct(N[M],g,y,_);r(d.anchor,g,y);return}if(k===Zi){H(d,g,y);return}if(_!==2&&b&1&&C)if(_===0)C.beforeEnter(I),r(I,g,y),nt(()=>C.enter(I),E);else{const{leave:M,delayLeave:$,afterLeave:z}=C,re=()=>r(I,g,y),be=()=>{M(I,()=>{re(),z&&z()})};$?$(I,re,be):be()}else r(I,g,y)},ht=(d,g,y,_=!1,E=!1)=>{const{type:I,props:k,ref:C,children:N,dynamicChildren:b,shapeFlag:U,patchFlag:M,dirs:$}=d;if(C!=null&&Do(C,null,y,d,!0),U&256){g.ctx.deactivate(d);return}const z=U&1&&$,re=!Ao(d);let be;if(re&&(be=k&&k.onVnodeBeforeUnmount)&&It(be,g,d),U&6)L(d.component,y,_);else{if(U&128){d.suspense.unmount(y,_);return}z&&rn(d,null,g,"beforeUnmount"),U&64?d.type.remove(d,g,y,E,me,_):b&&(I!==dt||M>0&&M&64)?x(b,g,y,!1,!0):(I===dt&&M&384||!E&&U&16)&&x(N,g,y),_&&Wi(d)}(re&&(be=k&&k.onVnodeUnmounted)||z)&&nt(()=>{be&&It(be,g,d),z&&rn(d,null,g,"unmounted")},y)},Wi=d=>{const{type:g,el:y,anchor:_,transition:E}=d;if(g===dt){w(y,_);return}if(g===Zi){oe(d);return}const I=()=>{i(y),E&&!E.persisted&&E.afterLeave&&E.afterLeave()};if(d.shapeFlag&1&&E&&!E.persisted){const{leave:k,delayLeave:C}=E,N=()=>k(y,I);C?C(d.el,I,N):N()}else I()},w=(d,g)=>{let y;for(;d!==g;)y=p(d),i(d),d=y;i(g)},L=(d,g,y)=>{const{bum:_,scope:E,update:I,subTree:k,um:C}=d;_&&Xi(_),E.stop(),I&&(I.active=!1,ht(k,d,g,y)),C&&nt(C,g),nt(()=>{d.isUnmounted=!0},g),g&&g.pendingBranch&&!g.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===g.pendingId&&(g.deps--,g.deps===0&&g.resolve())},x=(d,g,y,_=!1,E=!1,I=0)=>{for(let k=I;k<d.length;k++)ht(d[k],g,y,_,E)},V=d=>d.shapeFlag&6?V(d.component.subTree):d.shapeFlag&128?d.suspense.next():p(d.anchor||d.el),he=(d,g,y)=>{d==null?g._vnode&&ht(g._vnode,null,null,!0):R(g._vnode||null,d,g,null,null,null,y),oh(),g._vnode=d},me={p:R,um:ht,m:Ct,r:Wi,mt:An,mc:le,pc:ot,pbc:Oe,n:V,o:n};let te,J;return t&&([te,J]=t(me)),{render:he,hydrate:te,createApp:$g(he,te)}}function on({effect:n,update:t},s){n.allowRecurse=t.allowRecurse=s}function Ah(n,t,s=!1){const r=n.children,i=t.children;if(W(r)&&W(i))for(let o=0;o<r.length;o++){const a=r[o];let c=i[o];c.shapeFlag&1&&!c.dynamicChildren&&((c.patchFlag<=0||c.patchFlag===32)&&(c=i[o]=zt(i[o]),c.el=a.el),s||Ah(a,c))}}function qg(n){const t=n.slice(),s=[0];let r,i,o,a,c;const l=n.length;for(r=0;r<l;r++){const u=n[r];if(u!==0){if(i=s[s.length-1],n[i]<u){t[r]=i,s.push(r);continue}for(o=0,a=s.length-1;o<a;)c=o+a>>1,n[s[c]]<u?o=c+1:a=c;u<n[s[o]]&&(o>0&&(t[r]=s[o-1]),s[o]=r)}}for(o=s.length,a=s[o-1];o-- >0;)s[o]=a,a=t[a];return s}const Kg=n=>n.__isTeleport,zg=Symbol(),dt=Symbol(void 0),Ma=Symbol(void 0),bt=Symbol(void 0),Zi=Symbol(void 0),Rs=[];let pn=null;function yt(n=!1){Rs.push(pn=n?null:[])}function Gg(){Rs.pop(),pn=Rs[Rs.length-1]||null}let jr=1;function rl(n){jr+=n}function Nh(n){return n.dynamicChildren=jr>0?pn||Un:null,Gg(),jr>0&&pn&&pn.push(n),n}function Nt(n,t,s,r,i,o){return Nh(ye(n,t,s,r,i,o,!0))}function Wg(n,t,s,r,i){return Nh(Me(n,t,s,r,i,!0))}function ko(n){return n?n.__v_isVNode===!0:!1}function ln(n,t){return n.type===t.type&&n.key===t.key}const Ei="__vInternal",Rh=({key:n})=>n!=null?n:null,kr=({ref:n,ref_key:t,ref_for:s})=>n!=null?Le(n)||Se(n)||Z(n)?{i:xt,r:n,k:t,f:!!s}:n:null;function ye(n,t=null,s=null,r=0,i=null,o=n===dt?0:1,a=!1,c=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Rh(t),ref:t&&kr(t),scopeId:yi,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null};return c?(Fa(l,s),o&128&&n.normalize(l)):s&&(l.shapeFlag|=Le(s)?8:16),jr>0&&!a&&pn&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&pn.push(l),l}const Me=Yg;function Yg(n,t=null,s=null,r=0,i=null,o=!1){if((!n||n===zg)&&(n=bt),ko(n)){const c=yn(n,t,!0);return s&&Fa(c,s),c}if(cm(n)&&(n=n.__vccOpts),t){t=Xg(t);let{class:c,style:l}=t;c&&!Le(c)&&(t.class=va(c)),ke(l)&&(Xu(l)&&!W(l)&&(l=Xe({},l)),t.style=ya(l))}const a=Le(n)?1:pg(n)?128:Kg(n)?64:ke(n)?4:Z(n)?2:0;return ye(n,t,s,r,i,a,o,!0)}function Xg(n){return n?Xu(n)||Ei in n?Xe({},n):n:null}function yn(n,t,s=!1){const{props:r,ref:i,patchFlag:o,children:a}=n,c=t?Jg(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&Rh(c),ref:t&&t.ref?s&&i?W(i)?i.concat(kr(t)):[i,kr(t)]:kr(t):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==dt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:n.transition,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&yn(n.ssContent),ssFallback:n.ssFallback&&yn(n.ssFallback),el:n.el,anchor:n.anchor}}function La(n=" ",t=0){return Me(Ma,null,n,t)}function Qg(n="",t=!1){return t?(yt(),Wg(bt,null,n)):Me(bt,null,n)}function Rt(n){return n==null||typeof n=="boolean"?Me(bt):W(n)?Me(dt,null,n.slice()):typeof n=="object"?zt(n):Me(Ma,null,String(n))}function zt(n){return n.el===null||n.memo?n:yn(n)}function Fa(n,t){let s=0;const{shapeFlag:r}=n;if(t==null)t=null;else if(W(t))s=16;else if(typeof t=="object")if(r&65){const i=t.default;i&&(i._c&&(i._d=!1),Fa(n,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!(Ei in t)?t._ctx=xt:i===3&&xt&&(xt.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Z(t)?(t={default:t,_ctx:xt},s=32):(t=String(t),r&64?(s=16,t=[La(t)]):s=8);n.children=t,n.shapeFlag|=s}function Jg(...n){const t={};for(let s=0;s<n.length;s++){const r=n[s];for(const i in r)if(i==="class")t.class!==r.class&&(t.class=va([t.class,r.class]));else if(i==="style")t.style=ya([t.style,r.style]);else if(ui(i)){const o=t[i],a=r[i];a&&o!==a&&!(W(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=r[i])}return t}function It(n,t,s,r=null){gt(n,t,7,[s,r])}function Zg(n,t,s,r){let i;const o=s&&s[r];if(W(n)||Le(n)){i=new Array(n.length);for(let a=0,c=n.length;a<c;a++)i[a]=t(n[a],a,void 0,o&&o[a])}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(ke(n))if(n[Symbol.iterator])i=Array.from(n,(a,c)=>t(a,c,void 0,o&&o[c]));else{const a=Object.keys(n);i=new Array(a.length);for(let c=0,l=a.length;c<l;c++){const u=a[c];i[c]=t(n[u],u,c,o&&o[c])}}else i=[];return s&&(s[r]=i),i}const Oo=n=>n?xh(n)?Va(n)||n.proxy:Oo(n.parent):null,Hr=Xe(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Oo(n.parent),$root:n=>Oo(n.root),$emit:n=>n.emit,$options:n=>Eh(n),$forceUpdate:n=>()=>sh(n.update),$nextTick:n=>Da.bind(n.proxy),$watch:n=>mg.bind(n)}),em={get({_:n},t){const{ctx:s,setupState:r,data:i,props:o,accessCache:a,type:c,appContext:l}=n;let u;if(t[0]!=="$"){const m=a[t];if(m!==void 0)switch(m){case 1:return r[t];case 2:return i[t];case 4:return s[t];case 3:return o[t]}else{if(r!==ve&&se(r,t))return a[t]=1,r[t];if(i!==ve&&se(i,t))return a[t]=2,i[t];if((u=n.propsOptions[0])&&se(u,t))return a[t]=3,o[t];if(s!==ve&&se(s,t))return a[t]=4,s[t];No&&(a[t]=0)}}const h=Hr[t];let f,p;if(h)return t==="$attrs"&&lt(n,"get",t),h(n);if((f=c.__cssModules)&&(f=f[t]))return f;if(s!==ve&&se(s,t))return a[t]=4,s[t];if(p=l.config.globalProperties,se(p,t))return p[t]},set({_:n},t,s){const{data:r,setupState:i,ctx:o}=n;return i!==ve&&se(i,t)?(i[t]=s,!0):r!==ve&&se(r,t)?(r[t]=s,!0):se(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(o[t]=s,!0)},has({_:{data:n,setupState:t,accessCache:s,ctx:r,appContext:i,propsOptions:o}},a){let c;return!!s[a]||n!==ve&&se(n,a)||t!==ve&&se(t,a)||(c=o[0])&&se(c,a)||se(r,a)||se(Hr,a)||se(i.config.globalProperties,a)},defineProperty(n,t,s){return s.get!=null?n._.accessCache[t]=0:se(s,"value")&&this.set(n,t,s.value,null),Reflect.defineProperty(n,t,s)}},tm=Ih();let nm=0;function sm(n,t,s){const r=n.type,i=(t?t.appContext:n.appContext)||tm,o={uid:nm++,vnode:n,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Lu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:bh(r,i),emitsOptions:ch(r,i),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:r.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=lg.bind(null,o),n.ce&&n.ce(o),o}let $e=null;const Ba=()=>$e||xt,Wn=n=>{$e=n,n.scope.on()},gn=()=>{$e&&$e.scope.off(),$e=null};function xh(n){return n.vnode.shapeFlag&4}let $s=!1;function rm(n,t=!1){$s=t;const{props:s,children:r}=n.vnode,i=xh(n);Mg(n,s,i,t),Bg(n,r);const o=i?im(n,t):void 0;return $s=!1,o}function im(n,t){const s=n.type;n.accessCache=Object.create(null),n.proxy=Gn(new Proxy(n.ctx,em));const{setup:r}=s;if(r){const i=n.setupContext=r.length>1?am(n):null;Wn(n),as();const o=Yt(r,n,0,[n.props,i]);if(cs(),gn(),ku(o)){if(o.then(gn,gn),t)return o.then(a=>{il(n,a,t)}).catch(a=>{gi(a,n,0)});n.asyncDep=o}else il(n,o,t)}else Dh(n,t)}function il(n,t,s){Z(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:ke(t)&&(n.setupState=eh(t)),Dh(n,s)}let ol;function Dh(n,t,s){const r=n.type;if(!n.render){if(!t&&ol&&!r.render){const i=r.template;if(i){const{isCustomElement:o,compilerOptions:a}=n.appContext.config,{delimiters:c,compilerOptions:l}=r,u=Xe(Xe({isCustomElement:o,delimiters:c},a),l);r.render=ol(i,u)}}n.render=r.render||_t}Wn(n),as(),xg(n),cs(),gn()}function om(n){return new Proxy(n.attrs,{get(t,s){return lt(n,"get","$attrs"),t[s]}})}function am(n){const t=r=>{n.exposed=r||{}};let s;return{get attrs(){return s||(s=om(n))},slots:n.slots,emit:n.emit,expose:t}}function Va(n){if(n.exposed)return n.exposeProxy||(n.exposeProxy=new Proxy(eh(Gn(n.exposed)),{get(t,s){if(s in t)return t[s];if(s in Hr)return Hr[s](n)}}))}function cm(n){return Z(n)&&"__vccOpts"in n}const wt=(n,t)=>sg(n,t,$s);function kh(n,t,s){const r=arguments.length;return r===2?ke(t)&&!W(t)?ko(t)?Me(n,null,[t]):Me(n,t):Me(n,null,t):(r>3?s=Array.prototype.slice.call(arguments,2):r===3&&ko(s)&&(s=[s]),Me(n,t,s))}const lm="3.2.33",um="http://www.w3.org/2000/svg",un=typeof document!="undefined"?document:null,al=un&&un.createElement("template"),hm={insert:(n,t,s)=>{t.insertBefore(n,s||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,s,r)=>{const i=t?un.createElementNS(um,n):un.createElement(n,s?{is:s}:void 0);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>un.createTextNode(n),createComment:n=>un.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>un.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},cloneNode(n){const t=n.cloneNode(!0);return"_value"in n&&(t._value=n._value),t},insertStaticContent(n,t,s,r,i,o){const a=s?s.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===o||!(i=i.nextSibling)););else{al.innerHTML=r?`<svg>${n}</svg>`:n;const c=al.content;if(r){const l=c.firstChild;for(;l.firstChild;)c.appendChild(l.firstChild);c.removeChild(l)}t.insertBefore(c,s)}return[a?a.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}};function fm(n,t,s){const r=n._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?n.removeAttribute("class"):s?n.setAttribute("class",t):n.className=t}function dm(n,t,s){const r=n.style,i=Le(s);if(s&&!i){for(const o in s)Po(r,o,s[o]);if(t&&!Le(t))for(const o in t)s[o]==null&&Po(r,o,"")}else{const o=r.display;i?t!==s&&(r.cssText=s):t&&n.removeAttribute("style"),"_vod"in n&&(r.display=o)}}const cl=/\s*!important$/;function Po(n,t,s){if(W(s))s.forEach(r=>Po(n,t,r));else if(s==null&&(s=""),t.startsWith("--"))n.setProperty(t,s);else{const r=pm(n,t);cl.test(s)?n.setProperty(os(r),s.replace(cl,""),"important"):n[r]=s}}const ll=["Webkit","Moz","ms"],eo={};function pm(n,t){const s=eo[t];if(s)return s;let r=zn(t);if(r!=="filter"&&r in n)return eo[t]=r;r=Mu(r);for(let i=0;i<ll.length;i++){const o=ll[i]+r;if(o in n)return eo[t]=o}return t}const ul="http://www.w3.org/1999/xlink";function gm(n,t,s,r,i){if(r&&t.startsWith("xlink:"))s==null?n.removeAttributeNS(ul,t.slice(6,t.length)):n.setAttributeNS(ul,t,s);else{const o=fp(t);s==null||o&&!Ru(s)?n.removeAttribute(t):n.setAttribute(t,o?"":s)}}function mm(n,t,s,r,i,o,a){if(t==="innerHTML"||t==="textContent"){r&&a(r,i,o),n[t]=s==null?"":s;return}if(t==="value"&&n.tagName!=="PROGRESS"&&!n.tagName.includes("-")){n._value=s;const l=s==null?"":s;(n.value!==l||n.tagName==="OPTION")&&(n.value=l),s==null&&n.removeAttribute(t);return}let c=!1;if(s===""||s==null){const l=typeof n[t];l==="boolean"?s=Ru(s):s==null&&l==="string"?(s="",c=!0):l==="number"&&(s=0,c=!0)}try{n[t]=s}catch{}c&&n.removeAttribute(t)}const[Oh,ym]=(()=>{let n=Date.now,t=!1;if(typeof window!="undefined"){Date.now()>document.createEvent("Event").timeStamp&&(n=()=>performance.now());const s=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(s&&Number(s[1])<=53)}return[n,t]})();let Mo=0;const vm=Promise.resolve(),wm=()=>{Mo=0},Em=()=>Mo||(vm.then(wm),Mo=Oh());function _m(n,t,s,r){n.addEventListener(t,s,r)}function bm(n,t,s,r){n.removeEventListener(t,s,r)}function Tm(n,t,s,r,i=null){const o=n._vei||(n._vei={}),a=o[t];if(r&&a)a.value=r;else{const[c,l]=Cm(t);if(r){const u=o[t]=Sm(r,i);_m(n,c,u,l)}else a&&(bm(n,c,a,l),o[t]=void 0)}}const hl=/(?:Once|Passive|Capture)$/;function Cm(n){let t;if(hl.test(n)){t={};let s;for(;s=n.match(hl);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[os(n.slice(2)),t]}function Sm(n,t){const s=r=>{const i=r.timeStamp||Oh();(ym||i>=s.attached-1)&&gt(Im(r,s.value),t,5,[r])};return s.value=n,s.attached=Em(),s}function Im(n,t){if(W(t)){const s=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{s.call(n),n._stopped=!0},t.map(r=>i=>!i._stopped&&r&&r(i))}else return t}const fl=/^on[a-z]/,Am=(n,t,s,r,i=!1,o,a,c,l)=>{t==="class"?fm(n,r,i):t==="style"?dm(n,s,r):ui(t)?wa(t)||Tm(n,t,s,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Nm(n,t,r,i))?mm(n,t,r,o,a,c,l):(t==="true-value"?n._trueValue=r:t==="false-value"&&(n._falseValue=r),gm(n,t,r,i))};function Nm(n,t,s,r){return r?!!(t==="innerHTML"||t==="textContent"||t in n&&fl.test(t)&&Z(s)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA"||fl.test(t)&&Le(s)?!1:t in n}const Rm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};wg.props;const xm=Xe({patchProp:Am},hm);let dl;function Dm(){return dl||(dl=jg(xm))}const km=(...n)=>{const t=Dm().createApp(...n),{mount:s}=t;return t.mount=r=>{const i=Om(r);if(!i)return;const o=t._component;!Z(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function Om(n){return Le(n)?document.querySelector(n):n}var Pm=!1;/*!
  * pinia v2.0.13
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let Ph;const _i=n=>Ph=n,Mh=Symbol();function Lo(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var xs;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(xs||(xs={}));function Mm(){const n=Fu(!0),t=n.run(()=>pi({}));let s=[],r=[];const i=Gn({install(o){_i(i),i._a=o,o.provide(Mh,i),o.config.globalProperties.$pinia=i,r.forEach(a=>s.push(a)),r=[]},use(o){return!this._a&&!Pm?r.push(o):s.push(o),this},_p:s,_a:null,_e:n,_s:new Map,state:t});return i}const Lh=()=>{};function pl(n,t,s,r=Lh){n.push(t);const i=()=>{const o=n.indexOf(t);o>-1&&(n.splice(o,1),r())};return!s&&Ba()&&Oa(i),i}function Dn(n,...t){n.slice().forEach(s=>{s(...t)})}function Fo(n,t){for(const s in t){if(!t.hasOwnProperty(s))continue;const r=t[s],i=n[s];Lo(i)&&Lo(r)&&n.hasOwnProperty(s)&&!Se(r)&&!Lt(r)?n[s]=Fo(i,r):n[s]=r}return n}const Lm=Symbol();function Fm(n){return!Lo(n)||!n.hasOwnProperty(Lm)}const{assign:Ot}=Object;function Bm(n){return!!(Se(n)&&n.effect)}function Vm(n,t,s,r){const{state:i,actions:o,getters:a}=t,c=s.state.value[n];let l;function u(){c||(s.state.value[n]=i?i():{});const h=eg(s.state.value[n]);return Ot(h,o,Object.keys(a||{}).reduce((f,p)=>(f[p]=Gn(wt(()=>{_i(s);const m=s._s.get(n);return a[p].call(m,m)})),f),{}))}return l=Fh(n,u,t,s),l.$reset=function(){const f=i?i():{};this.$patch(p=>{Ot(p,f)})},l}function Fh(n,t,s={},r,i){let o;const a=s.state,c=Ot({actions:{}},s),l={deep:!0};let u,h,f=Gn([]),p=Gn([]),m;const v=r.state.value[n];!a&&!v&&(r.state.value[n]={}),pi({});function S(X){let P;u=h=!1,typeof X=="function"?(X(r.state.value[n]),P={type:xs.patchFunction,storeId:n,events:m}):(Fo(r.state.value[n],X),P={type:xs.patchObject,payload:X,storeId:n,events:m}),Da().then(()=>{u=!0}),h=!0,Dn(f,P,r.state.value[n])}const R=Lh;function D(){o.stop(),f=[],p=[],r._s.delete(n)}function B(X,P){return function(){_i(r);const pe=Array.from(arguments),le=[],Ie=[];function Oe(xe){le.push(xe)}function Ve(xe){Ie.push(xe)}Dn(p,{args:pe,name:X,store:H,after:Oe,onError:Ve});let tt;try{tt=P.apply(this&&this.$id===n?this:H,pe)}catch(xe){throw Dn(Ie,xe),xe}return tt instanceof Promise?tt.then(xe=>(Dn(le,xe),xe)).catch(xe=>(Dn(Ie,xe),Promise.reject(xe))):(Dn(le,tt),tt)}}const Q={_p:r,$id:n,$onAction:pl.bind(null,p),$patch:S,$reset:R,$subscribe(X,P={}){const pe=pl(f,X,P.detached,()=>le()),le=o.run(()=>Ns(()=>r.state.value[n],Ie=>{(P.flush==="sync"?h:u)&&X({storeId:n,type:xs.direct,events:m},Ie)},Ot({},l,P)));return pe},$dispose:D},H=ls(Ot({},Q));r._s.set(n,H);const oe=r._e.run(()=>(o=Fu(),o.run(()=>t())));for(const X in oe){const P=oe[X];if(Se(P)&&!Bm(P)||Lt(P))a||(v&&Fm(P)&&(Se(P)?P.value=v[X]:Fo(P,v[X])),r.state.value[n][X]=P);else if(typeof P=="function"){const pe=B(X,P);oe[X]=pe,c.actions[X]=P}}return Ot(H,oe),Ot(ie(H),oe),Object.defineProperty(H,"$state",{get:()=>r.state.value[n],set:X=>{S(P=>{Ot(P,X)})}}),r._p.forEach(X=>{Ot(H,o.run(()=>X({store:H,app:r._a,pinia:r,options:c})))}),v&&a&&s.hydrate&&s.hydrate(H.$state,v),u=!0,h=!0,H}function Um(n,t,s){let r,i;const o=typeof t=="function";typeof n=="string"?(r=n,i=o?s:t):(i=n,r=n.id);function a(c,l){const u=Ba();return c=c||u&&Ft(Mh),c&&_i(c),c=Ph,c._s.has(r)||(o?Fh(r,t,i,c):Vm(r,i,c)),c._s.get(r)}return a.$id=r,a}function $m(n){{n=ie(n);const t={};for(const s in n){const r=n[s];(Se(r)||Lt(r))&&(t[s]=th(n,s))}return t}}/*!
  * vue-router v4.0.14
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const Bh=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",us=n=>Bh?Symbol(n):"_vr_"+n,jm=us("rvlm"),gl=us("rvd"),Ua=us("r"),Vh=us("rl"),Bo=us("rvl"),Ln=typeof window!="undefined";function Hm(n){return n.__esModule||Bh&&n[Symbol.toStringTag]==="Module"}const de=Object.assign;function to(n,t){const s={};for(const r in t){const i=t[r];s[r]=Array.isArray(i)?i.map(n):n(i)}return s}const Ds=()=>{},qm=/\/$/,Km=n=>n.replace(qm,"");function no(n,t,s="/"){let r,i={},o="",a="";const c=t.indexOf("?"),l=t.indexOf("#",c>-1?c:0);return c>-1&&(r=t.slice(0,c),o=t.slice(c+1,l>-1?l:t.length),i=n(o)),l>-1&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=Ym(r!=null?r:t,s),{fullPath:r+(o&&"?")+o+a,path:r,query:i,hash:a}}function zm(n,t){const s=t.query?n(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function ml(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function Gm(n,t,s){const r=t.matched.length-1,i=s.matched.length-1;return r>-1&&r===i&&Yn(t.matched[r],s.matched[i])&&Uh(t.params,s.params)&&n(t.query)===n(s.query)&&t.hash===s.hash}function Yn(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function Uh(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const s in n)if(!Wm(n[s],t[s]))return!1;return!0}function Wm(n,t){return Array.isArray(n)?yl(n,t):Array.isArray(t)?yl(t,n):n===t}function yl(n,t){return Array.isArray(t)?n.length===t.length&&n.every((s,r)=>s===t[r]):n.length===1&&n[0]===t}function Ym(n,t){if(n.startsWith("/"))return n;if(!n)return t;const s=t.split("/"),r=n.split("/");let i=s.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],!(i===1||a==="."))if(a==="..")i--;else break;return s.slice(0,i).join("/")+"/"+r.slice(o-(o===r.length?1:0)).join("/")}var js;(function(n){n.pop="pop",n.push="push"})(js||(js={}));var ks;(function(n){n.back="back",n.forward="forward",n.unknown=""})(ks||(ks={}));function Xm(n){if(!n)if(Ln){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),Km(n)}const Qm=/^[^#]+#/;function Jm(n,t){return n.replace(Qm,"#")+t}function Zm(n,t){const s=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:t.behavior,left:r.left-s.left-(t.left||0),top:r.top-s.top-(t.top||0)}}const bi=()=>({left:window.pageXOffset,top:window.pageYOffset});function ey(n){let t;if("el"in n){const s=n.el,r=typeof s=="string"&&s.startsWith("#"),i=typeof s=="string"?r?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!i)return;t=Zm(i,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function vl(n,t){return(history.state?history.state.position-t:-1)+n}const Vo=new Map;function ty(n,t){Vo.set(n,t)}function ny(n){const t=Vo.get(n);return Vo.delete(n),t}let sy=()=>location.protocol+"//"+location.host;function $h(n,t){const{pathname:s,search:r,hash:i}=t,o=n.indexOf("#");if(o>-1){let c=i.includes(n.slice(o))?n.slice(o).length:1,l=i.slice(c);return l[0]!=="/"&&(l="/"+l),ml(l,"")}return ml(s,n)+r+i}function ry(n,t,s,r){let i=[],o=[],a=null;const c=({state:p})=>{const m=$h(n,location),v=s.value,S=t.value;let R=0;if(p){if(s.value=m,t.value=p,a&&a===v){a=null;return}R=S?p.position-S.position:0}else r(m);i.forEach(D=>{D(s.value,v,{delta:R,type:js.pop,direction:R?R>0?ks.forward:ks.back:ks.unknown})})};function l(){a=s.value}function u(p){i.push(p);const m=()=>{const v=i.indexOf(p);v>-1&&i.splice(v,1)};return o.push(m),m}function h(){const{history:p}=window;!p.state||p.replaceState(de({},p.state,{scroll:bi()}),"")}function f(){for(const p of o)p();o=[],window.removeEventListener("popstate",c),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",c),window.addEventListener("beforeunload",h),{pauseListeners:l,listen:u,destroy:f}}function wl(n,t,s,r=!1,i=!1){return{back:n,current:t,forward:s,replaced:r,position:window.history.length,scroll:i?bi():null}}function iy(n){const{history:t,location:s}=window,r={value:$h(n,s)},i={value:t.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,h){const f=n.indexOf("#"),p=f>-1?(s.host&&document.querySelector("base")?n:n.slice(f))+l:sy()+n+l;try{t[h?"replaceState":"pushState"](u,"",p),i.value=u}catch(m){console.error(m),s[h?"replace":"assign"](p)}}function a(l,u){const h=de({},t.state,wl(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,h,!0),r.value=l}function c(l,u){const h=de({},i.value,t.state,{forward:l,scroll:bi()});o(h.current,h,!0);const f=de({},wl(r.value,l,null),{position:h.position+1},u);o(l,f,!1),r.value=l}return{location:r,state:i,push:c,replace:a}}function oy(n){n=Xm(n);const t=iy(n),s=ry(n,t.state,t.location,t.replace);function r(o,a=!0){a||s.pauseListeners(),history.go(o)}const i=de({location:"",base:n,go:r,createHref:Jm.bind(null,n)},t,s);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function ay(n){return typeof n=="string"||n&&typeof n=="object"}function jh(n){return typeof n=="string"||typeof n=="symbol"}const Ht={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Hh=us("nf");var El;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(El||(El={}));function Xn(n,t){return de(new Error,{type:n,[Hh]:!0},t)}function qt(n,t){return n instanceof Error&&Hh in n&&(t==null||!!(n.type&t))}const _l="[^/]+?",cy={sensitive:!1,strict:!1,start:!0,end:!0},ly=/[.+*?^${}()[\]/\\]/g;function uy(n,t){const s=de({},cy,t),r=[];let i=s.start?"^":"";const o=[];for(const u of n){const h=u.length?[]:[90];s.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const p=u[f];let m=40+(s.sensitive?.25:0);if(p.type===0)f||(i+="/"),i+=p.value.replace(ly,"\\$&"),m+=40;else if(p.type===1){const{value:v,repeatable:S,optional:R,regexp:D}=p;o.push({name:v,repeatable:S,optional:R});const B=D||_l;if(B!==_l){m+=10;try{new RegExp(`(${B})`)}catch(H){throw new Error(`Invalid custom RegExp for param "${v}" (${B}): `+H.message)}}let Q=S?`((?:${B})(?:/(?:${B}))*)`:`(${B})`;f||(Q=R&&u.length<2?`(?:/${Q})`:"/"+Q),R&&(Q+="?"),i+=Q,m+=20,R&&(m+=-8),S&&(m+=-20),B===".*"&&(m+=-50)}h.push(m)}r.push(h)}if(s.strict&&s.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}s.strict||(i+="/?"),s.end?i+="$":s.strict&&(i+="(?:/|$)");const a=new RegExp(i,s.sensitive?"":"i");function c(u){const h=u.match(a),f={};if(!h)return null;for(let p=1;p<h.length;p++){const m=h[p]||"",v=o[p-1];f[v.name]=m&&v.repeatable?m.split("/"):m}return f}function l(u){let h="",f=!1;for(const p of n){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const m of p)if(m.type===0)h+=m.value;else if(m.type===1){const{value:v,repeatable:S,optional:R}=m,D=v in u?u[v]:"";if(Array.isArray(D)&&!S)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const B=Array.isArray(D)?D.join("/"):D;if(!B)if(R)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);h+=B}}return h}return{re:a,score:r,keys:o,parse:c,stringify:l}}function hy(n,t){let s=0;for(;s<n.length&&s<t.length;){const r=t[s]-n[s];if(r)return r;s++}return n.length<t.length?n.length===1&&n[0]===40+40?-1:1:n.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function fy(n,t){let s=0;const r=n.score,i=t.score;for(;s<r.length&&s<i.length;){const o=hy(r[s],i[s]);if(o)return o;s++}return i.length-r.length}const dy={type:0,value:""},py=/[a-zA-Z0-9_]/;function gy(n){if(!n)return[[]];if(n==="/")return[[dy]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(m){throw new Error(`ERR (${s})/"${u}": ${m}`)}let s=0,r=s;const i=[];let o;function a(){o&&i.push(o),o=[]}let c=0,l,u="",h="";function f(){!u||(s===0?o.push({type:0,value:u}):s===1||s===2||s===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=l}for(;c<n.length;){if(l=n[c++],l==="\\"&&s!==2){r=s,s=4;continue}switch(s){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),s=1):p();break;case 4:p(),s=r;break;case 1:l==="("?s=2:py.test(l)?p():(f(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&c--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:s=3:h+=l;break;case 3:f(),s=0,l!=="*"&&l!=="?"&&l!=="+"&&c--,h="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function my(n,t,s){const r=uy(gy(n.path),s),i=de(r,{record:n,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function yy(n,t){const s=[],r=new Map;t=Tl({strict:!1,end:!0,sensitive:!1},t);function i(h){return r.get(h)}function o(h,f,p){const m=!p,v=wy(h);v.aliasOf=p&&p.record;const S=Tl(t,h),R=[v];if("alias"in h){const Q=typeof h.alias=="string"?[h.alias]:h.alias;for(const H of Q)R.push(de({},v,{components:p?p.record.components:v.components,path:H,aliasOf:p?p.record:v}))}let D,B;for(const Q of R){const{path:H}=Q;if(f&&H[0]!=="/"){const oe=f.record.path,X=oe[oe.length-1]==="/"?"":"/";Q.path=f.record.path+(H&&X+H)}if(D=my(Q,f,S),p?p.alias.push(D):(B=B||D,B!==D&&B.alias.push(D),m&&h.name&&!bl(D)&&a(h.name)),"children"in v){const oe=v.children;for(let X=0;X<oe.length;X++)o(oe[X],D,p&&p.children[X])}p=p||D,l(D)}return B?()=>{a(B)}:Ds}function a(h){if(jh(h)){const f=r.get(h);f&&(r.delete(h),s.splice(s.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=s.indexOf(h);f>-1&&(s.splice(f,1),h.record.name&&r.delete(h.record.name),h.children.forEach(a),h.alias.forEach(a))}}function c(){return s}function l(h){let f=0;for(;f<s.length&&fy(h,s[f])>=0&&(h.record.path!==s[f].record.path||!qh(h,s[f]));)f++;s.splice(f,0,h),h.record.name&&!bl(h)&&r.set(h.record.name,h)}function u(h,f){let p,m={},v,S;if("name"in h&&h.name){if(p=r.get(h.name),!p)throw Xn(1,{location:h});S=p.record.name,m=de(vy(f.params,p.keys.filter(B=>!B.optional).map(B=>B.name)),h.params),v=p.stringify(m)}else if("path"in h)v=h.path,p=s.find(B=>B.re.test(v)),p&&(m=p.parse(v),S=p.record.name);else{if(p=f.name?r.get(f.name):s.find(B=>B.re.test(f.path)),!p)throw Xn(1,{location:h,currentLocation:f});S=p.record.name,m=de({},f.params,h.params),v=p.stringify(m)}const R=[];let D=p;for(;D;)R.unshift(D.record),D=D.parent;return{name:S,path:v,params:m,matched:R,meta:_y(R)}}return n.forEach(h=>o(h)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:c,getRecordMatcher:i}}function vy(n,t){const s={};for(const r of t)r in n&&(s[r]=n[r]);return s}function wy(n){return{path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:void 0,beforeEnter:n.beforeEnter,props:Ey(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||{}:{default:n.component}}}function Ey(n){const t={},s=n.props||!1;if("component"in n)t.default=s;else for(const r in n.components)t[r]=typeof s=="boolean"?s:s[r];return t}function bl(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function _y(n){return n.reduce((t,s)=>de(t,s.meta),{})}function Tl(n,t){const s={};for(const r in n)s[r]=r in t?t[r]:n[r];return s}function qh(n,t){return t.children.some(s=>s===n||qh(n,s))}const Kh=/#/g,by=/&/g,Ty=/\//g,Cy=/=/g,Sy=/\?/g,zh=/\+/g,Iy=/%5B/g,Ay=/%5D/g,Gh=/%5E/g,Ny=/%60/g,Wh=/%7B/g,Ry=/%7C/g,Yh=/%7D/g,xy=/%20/g;function $a(n){return encodeURI(""+n).replace(Ry,"|").replace(Iy,"[").replace(Ay,"]")}function Dy(n){return $a(n).replace(Wh,"{").replace(Yh,"}").replace(Gh,"^")}function Uo(n){return $a(n).replace(zh,"%2B").replace(xy,"+").replace(Kh,"%23").replace(by,"%26").replace(Ny,"`").replace(Wh,"{").replace(Yh,"}").replace(Gh,"^")}function ky(n){return Uo(n).replace(Cy,"%3D")}function Oy(n){return $a(n).replace(Kh,"%23").replace(Sy,"%3F")}function Py(n){return n==null?"":Oy(n).replace(Ty,"%2F")}function qr(n){try{return decodeURIComponent(""+n)}catch{}return""+n}function My(n){const t={};if(n===""||n==="?")return t;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(zh," "),a=o.indexOf("="),c=qr(a<0?o:o.slice(0,a)),l=a<0?null:qr(o.slice(a+1));if(c in t){let u=t[c];Array.isArray(u)||(u=t[c]=[u]),u.push(l)}else t[c]=l}return t}function Cl(n){let t="";for(let s in n){const r=n[s];if(s=ky(s),r==null){r!==void 0&&(t+=(t.length?"&":"")+s);continue}(Array.isArray(r)?r.map(o=>o&&Uo(o)):[r&&Uo(r)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+s,o!=null&&(t+="="+o))})}return t}function Ly(n){const t={};for(const s in n){const r=n[s];r!==void 0&&(t[s]=Array.isArray(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return t}function Es(){let n=[];function t(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function s(){n=[]}return{add:t,list:()=>n,reset:s}}function Gt(n,t,s,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const l=f=>{f===!1?c(Xn(4,{from:s,to:t})):f instanceof Error?c(f):ay(f)?c(Xn(2,{from:t,to:f})):(o&&r.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=n.call(r&&r.instances[i],t,s,l);let h=Promise.resolve(u);n.length<3&&(h=h.then(l)),h.catch(f=>c(f))})}function so(n,t,s,r){const i=[];for(const o of n)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(Fy(c)){const u=(c.__vccOpts||c)[t];u&&i.push(Gt(u,s,r,o,a))}else{let l=c();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=Hm(u)?u.default:u;o.components[a]=h;const p=(h.__vccOpts||h)[t];return p&&Gt(p,s,r,o,a)()}))}}return i}function Fy(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function Sl(n){const t=Ft(Ua),s=Ft(Vh),r=wt(()=>t.resolve(pt(n.to))),i=wt(()=>{const{matched:l}=r.value,{length:u}=l,h=l[u-1],f=s.matched;if(!h||!f.length)return-1;const p=f.findIndex(Yn.bind(null,h));if(p>-1)return p;const m=Il(l[u-2]);return u>1&&Il(h)===m&&f[f.length-1].path!==m?f.findIndex(Yn.bind(null,l[u-2])):p}),o=wt(()=>i.value>-1&&Uy(s.params,r.value.params)),a=wt(()=>i.value>-1&&i.value===s.matched.length-1&&Uh(s.params,r.value.params));function c(l={}){return Vy(l)?t[pt(n.replace)?"replace":"push"](pt(n.to)).catch(Ds):Promise.resolve()}return{route:r,href:wt(()=>r.value.href),isActive:o,isExactActive:a,navigate:c}}const By=gh({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Sl,setup(n,{slots:t}){const s=ls(Sl(n)),{options:r}=Ft(Ua),i=wt(()=>({[Al(n.activeClass,r.linkActiveClass,"router-link-active")]:s.isActive,[Al(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const o=t.default&&t.default(s);return n.custom?o:kh("a",{"aria-current":s.isExactActive?n.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:i.value},o)}}}),$o=By;function Vy(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function Uy(n,t){for(const s in t){const r=t[s],i=n[s];if(typeof r=="string"){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some((o,a)=>o!==i[a]))return!1}return!0}function Il(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const Al=(n,t,s)=>n!=null?n:t!=null?t:s,$y=gh({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(n,{attrs:t,slots:s}){const r=Ft(Bo),i=wt(()=>n.route||r.value),o=Ft(gl,0),a=wt(()=>i.value.matched[o]);Dr(gl,o+1),Dr(jm,a),Dr(Bo,i);const c=pi();return Ns(()=>[c.value,a.value,n.name],([l,u,h],[f,p,m])=>{u&&(u.instances[h]=l,p&&p!==u&&l&&l===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),l&&u&&(!p||!Yn(u,p)||!f)&&(u.enterCallbacks[h]||[]).forEach(v=>v(l))},{flush:"post"}),()=>{const l=i.value,u=a.value,h=u&&u.components[n.name],f=n.name;if(!h)return Nl(s.default,{Component:h,route:l});const p=u.props[n.name],m=p?p===!0?l.params:typeof p=="function"?p(l):p:null,S=kh(h,de({},m,t,{onVnodeUnmounted:R=>{R.component.isUnmounted&&(u.instances[f]=null)},ref:c}));return Nl(s.default,{Component:S,route:l})||S}}});function Nl(n,t){if(!n)return null;const s=n(t);return s.length===1?s[0]:s}const Xh=$y;function jy(n){const t=yy(n.routes,n),s=n.parseQuery||My,r=n.stringifyQuery||Cl,i=n.history,o=Es(),a=Es(),c=Es(),l=Qp(Ht);let u=Ht;Ln&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=to.bind(null,w=>""+w),f=to.bind(null,Py),p=to.bind(null,qr);function m(w,L){let x,V;return jh(w)?(x=t.getRecordMatcher(w),V=L):V=w,t.addRoute(V,x)}function v(w){const L=t.getRecordMatcher(w);L&&t.removeRoute(L)}function S(){return t.getRoutes().map(w=>w.record)}function R(w){return!!t.getRecordMatcher(w)}function D(w,L){if(L=de({},L||l.value),typeof w=="string"){const J=no(s,w,L.path),d=t.resolve({path:J.path},L),g=i.createHref(J.fullPath);return de(J,d,{params:p(d.params),hash:qr(J.hash),redirectedFrom:void 0,href:g})}let x;if("path"in w)x=de({},w,{path:no(s,w.path,L.path).path});else{const J=de({},w.params);for(const d in J)J[d]==null&&delete J[d];x=de({},w,{params:f(w.params)}),L.params=f(L.params)}const V=t.resolve(x,L),he=w.hash||"";V.params=h(p(V.params));const me=zm(r,de({},w,{hash:Dy(he),path:V.path})),te=i.createHref(me);return de({fullPath:me,hash:he,query:r===Cl?Ly(w.query):w.query||{}},V,{redirectedFrom:void 0,href:te})}function B(w){return typeof w=="string"?no(s,w,l.value.path):de({},w)}function Q(w,L){if(u!==w)return Xn(8,{from:L,to:w})}function H(w){return P(w)}function oe(w){return H(de(B(w),{replace:!0}))}function X(w){const L=w.matched[w.matched.length-1];if(L&&L.redirect){const{redirect:x}=L;let V=typeof x=="function"?x(w):x;return typeof V=="string"&&(V=V.includes("?")||V.includes("#")?V=B(V):{path:V},V.params={}),de({query:w.query,hash:w.hash,params:w.params},V)}}function P(w,L){const x=u=D(w),V=l.value,he=w.state,me=w.force,te=w.replace===!0,J=X(x);if(J)return P(de(B(J),{state:he,force:me,replace:te}),L||x);const d=x;d.redirectedFrom=L;let g;return!me&&Gm(r,V,x)&&(g=Xn(16,{to:d,from:V}),Nn(V,V,!0,!1)),(g?Promise.resolve(g):le(d,V)).catch(y=>qt(y)?qt(y,2)?y:ot(y):ge(y,d,V)).then(y=>{if(y){if(qt(y,2))return P(de(B(y.to),{state:he,force:me,replace:te}),L||d)}else y=Oe(d,V,!0,te,he);return Ie(d,V,y),y})}function pe(w,L){const x=Q(w,L);return x?Promise.reject(x):Promise.resolve()}function le(w,L){let x;const[V,he,me]=Hy(w,L);x=so(V.reverse(),"beforeRouteLeave",w,L);for(const J of V)J.leaveGuards.forEach(d=>{x.push(Gt(d,w,L))});const te=pe.bind(null,w,L);return x.push(te),kn(x).then(()=>{x=[];for(const J of o.list())x.push(Gt(J,w,L));return x.push(te),kn(x)}).then(()=>{x=so(he,"beforeRouteUpdate",w,L);for(const J of he)J.updateGuards.forEach(d=>{x.push(Gt(d,w,L))});return x.push(te),kn(x)}).then(()=>{x=[];for(const J of w.matched)if(J.beforeEnter&&!L.matched.includes(J))if(Array.isArray(J.beforeEnter))for(const d of J.beforeEnter)x.push(Gt(d,w,L));else x.push(Gt(J.beforeEnter,w,L));return x.push(te),kn(x)}).then(()=>(w.matched.forEach(J=>J.enterCallbacks={}),x=so(me,"beforeRouteEnter",w,L),x.push(te),kn(x))).then(()=>{x=[];for(const J of a.list())x.push(Gt(J,w,L));return x.push(te),kn(x)}).catch(J=>qt(J,8)?J:Promise.reject(J))}function Ie(w,L,x){for(const V of c.list())V(w,L,x)}function Oe(w,L,x,V,he){const me=Q(w,L);if(me)return me;const te=L===Ht,J=Ln?history.state:{};x&&(V||te?i.replace(w.fullPath,de({scroll:te&&J&&J.scroll},he)):i.push(w.fullPath,he)),l.value=w,Nn(w,L,x,te),ot()}let Ve;function tt(){Ve=i.listen((w,L,x)=>{const V=D(w),he=X(V);if(he){P(de(he,{replace:!0}),V).catch(Ds);return}u=V;const me=l.value;Ln&&ty(vl(me.fullPath,x.delta),bi()),le(V,me).catch(te=>qt(te,12)?te:qt(te,2)?(P(te.to,V).then(J=>{qt(J,20)&&!x.delta&&x.type===js.pop&&i.go(-1,!1)}).catch(Ds),Promise.reject()):(x.delta&&i.go(-x.delta,!1),ge(te,V,me))).then(te=>{te=te||Oe(V,me,!1),te&&(x.delta?i.go(-x.delta,!1):x.type===js.pop&&qt(te,20)&&i.go(-1,!1)),Ie(V,me,te)}).catch(Ds)})}let xe=Es(),An=Es(),De;function ge(w,L,x){ot(w);const V=An.list();return V.length?V.forEach(he=>he(w,L,x)):console.error(w),Promise.reject(w)}function ue(){return De&&l.value!==Ht?Promise.resolve():new Promise((w,L)=>{xe.add([w,L])})}function ot(w){return De||(De=!w,tt(),xe.list().forEach(([L,x])=>w?x(w):L()),xe.reset()),w}function Nn(w,L,x,V){const{scrollBehavior:he}=n;if(!Ln||!he)return Promise.resolve();const me=!x&&ny(vl(w.fullPath,0))||(V||!x)&&history.state&&history.state.scroll||null;return Da().then(()=>he(w,L,me)).then(te=>te&&ey(te)).catch(te=>ge(te,w,L))}const kt=w=>i.go(w);let Ct;const ht=new Set;return{currentRoute:l,addRoute:m,removeRoute:v,hasRoute:R,getRoutes:S,resolve:D,options:n,push:H,replace:oe,go:kt,back:()=>kt(-1),forward:()=>kt(1),beforeEach:o.add,beforeResolve:a.add,afterEach:c.add,onError:An.add,isReady:ue,install(w){const L=this;w.component("RouterLink",$o),w.component("RouterView",Xh),w.config.globalProperties.$router=L,Object.defineProperty(w.config.globalProperties,"$route",{enumerable:!0,get:()=>pt(l)}),Ln&&!Ct&&l.value===Ht&&(Ct=!0,H(i.location).catch(he=>{}));const x={};for(const he in Ht)x[he]=wt(()=>l.value[he]);w.provide(Ua,L),w.provide(Vh,ls(x)),w.provide(Bo,l);const V=w.unmount;ht.add(w),w.unmount=function(){ht.delete(w),ht.size<1&&(u=Ht,Ve&&Ve(),l.value=Ht,Ct=!1,De=!1),V()}}}}function kn(n){return n.reduce((t,s)=>t.then(()=>s()),Promise.resolve())}function Hy(n,t){const s=[],r=[],i=[],o=Math.max(t.matched.length,n.matched.length);for(let a=0;a<o;a++){const c=t.matched[a];c&&(n.matched.find(u=>Yn(u,c))?r.push(c):s.push(c));const l=n.matched[a];l&&(t.matched.find(u=>Yn(u,l))||i.push(l))}return[s,r,i]}var ja=(n,t)=>{const s=n.__vccOpts||n;for(const[r,i]of t)s[r]=i;return s};const qy={class:"wrapper"},Ky=La("Create"),zy=La("Activities"),Gy={setup(n){return(t,s)=>(yt(),Nt("header",null,[ye("div",qy,[ye("nav",null,[Me(pt($o),{to:"/"},{default:Co(()=>[Ky]),_:1}),Me(pt($o),{to:"/Activities"},{default:Co(()=>[zy]),_:1})])])]))}};var Wy=ja(Gy,[["__scopeId","data-v-502bee73"]]);const Yy={setup(n){return(t,s)=>(yt(),Nt(dt,null,[Me(Wy),Me(pt(Xh))],64))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=function(n){const t=[];let s=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?t[s++]=i:i<2048?(t[s++]=i>>6|192,t[s++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),t[s++]=i>>18|240,t[s++]=i>>12&63|128,t[s++]=i>>6&63|128,t[s++]=i&63|128):(t[s++]=i>>12|224,t[s++]=i>>6&63|128,t[s++]=i&63|128)}return t},Xy=function(n){const t=[];let s=0,r=0;for(;s<n.length;){const i=n[s++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[s++];t[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[s++],a=n[s++],c=n[s++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|c&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const o=n[s++],a=n[s++];t[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return t.join("")},Qy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],a=i+1<n.length,c=a?n[i+1]:0,l=i+2<n.length,u=l?n[i+2]:0,h=o>>2,f=(o&3)<<4|c>>4;let p=(c&15)<<2|u>>6,m=u&63;l||(m=64,a||(p=64)),r.push(s[h],s[f],s[p],s[m])}return r.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(Qh(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):Xy(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();const s=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=s[n.charAt(i++)],c=i<n.length?s[n.charAt(i)]:0;++i;const u=i<n.length?s[n.charAt(i)]:64;++i;const f=i<n.length?s[n.charAt(i)]:64;if(++i,o==null||c==null||u==null||f==null)throw Error();const p=o<<2|c>>4;if(r.push(p),u!==64){const m=c<<4&240|u>>2;if(r.push(m),f!==64){const v=u<<6&192|f;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Jy=function(n){const t=Qh(n);return Qy.encodeByteArray(t,!0)},Jh=function(n){return Jy(n).replace(/\./g,"")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}wrapCallback(t){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(s):t(s,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(){return typeof navigator!="undefined"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ev(){return typeof window!="undefined"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ti())}function tv(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sv(){return Ti().indexOf("Electron/")>=0}function rv(){const n=Ti();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iv(){return Ti().indexOf("MSAppHost/")>=0}function ov(){return typeof indexedDB=="object"}function av(){return new Promise((n,t)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),s||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{s=!1},i.onerror=()=>{var o;t(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(s){t(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="FirebaseError";class Ci extends Error{constructor(t,s,r){super(s),this.code=t,this.customData=r,this.name=cv,Object.setPrototypeOf(this,Ci.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zh.prototype.create)}}class Zh{constructor(t,s,r){this.service=t,this.serviceName=s,this.errors=r}create(t,...s){const r=s[0]||{},i=`${this.service}/${t}`,o=this.errors[t],a=o?lv(o,r):"Error",c=`${this.serviceName}: ${a} (${i}).`;return new Ci(i,c,r)}}function lv(n,t){return n.replace(uv,(s,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const uv=/\{\$([^}]+)}/g;function jo(n,t){if(n===t)return!0;const s=Object.keys(n),r=Object.keys(t);for(const i of s){if(!r.includes(i))return!1;const o=n[i],a=t[i];if(Rl(o)&&Rl(a)){if(!jo(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!s.includes(i))return!1;return!0}function Rl(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(n){return n&&n._delegate?n._delegate:n}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(n,t){return new Promise((s,r)=>{n.onsuccess=i=>{s(i.target.result)},n.onerror=i=>{var o;r(`${t}: ${(o=i.target.error)===null||o===void 0?void 0:o.message}`)}})}class xl{constructor(t){this._db=t,this.objectStoreNames=this._db.objectStoreNames}transaction(t,s="readonly"){return new ef(this._db.transaction.call(this._db,t,s))}createObjectStore(t,s){return new tf(this._db.createObjectStore(t,s))}close(){this._db.close()}}class ef{constructor(t){this._transaction=t,this.complete=new Promise((s,r)=>{this._transaction.oncomplete=function(){s()},this._transaction.onerror=()=>{r(this._transaction.error)},this._transaction.onabort=()=>{r(this._transaction.error)}})}objectStore(t){return new tf(this._transaction.objectStore(t))}}class tf{constructor(t){this._store=t}index(t){return new Dl(this._store.index(t))}createIndex(t,s,r){return new Dl(this._store.createIndex(t,s,r))}get(t){const s=this._store.get(t);return Cs(s,"Error reading from IndexedDB")}put(t,s){const r=this._store.put(t,s);return Cs(r,"Error writing to IndexedDB")}delete(t){const s=this._store.delete(t);return Cs(s,"Error deleting from IndexedDB")}clear(){const t=this._store.clear();return Cs(t,"Error clearing IndexedDB object store")}}class Dl{constructor(t){this._index=t}get(t){const s=this._index.get(t);return Cs(s,"Error reading from IndexedDB")}}function hv(n,t,s){return new Promise((r,i)=>{try{const o=indexedDB.open(n,t);o.onsuccess=a=>{r(new xl(a.target.result))},o.onerror=a=>{var c;i(`Error opening indexedDB: ${(c=a.target.error)===null||c===void 0?void 0:c.message}`)},o.onupgradeneeded=a=>{s(new xl(o.result),a.oldVersion,a.newVersion,new ef(o.transaction))}}catch(o){i(`Error opening indexedDB: ${o.message}`)}})}class qs{constructor(t,s,r){this.name=t,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(t,s){this.name=t,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const s=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(s)){const r=new Zy;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:s});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(t){var s;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(s=t==null?void 0:t.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(pv(t))try{this.getOrInitializeService({instanceIdentifier:cn})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(t=cn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...t.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=cn){return this.instances.has(t)}getOptions(t=cn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:s={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[o,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&a.resolve(i)}return i}onInit(t,s){var r;const i=this.normalizeInstanceIdentifier(s),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(t),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&t(a,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,s){const r=this.onInitCallbacks.get(s);if(!!r)for(const i of r)try{i(t,s)}catch{}}getOrInitializeService({instanceIdentifier:t,options:s={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:dv(t),options:s}),this.instances.set(t,r),this.instancesOptions.set(t,s),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=cn){return this.component?this.component.multipleInstances?t:cn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dv(n){return n===cn?void 0:n}function pv(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const s=this.getProvider(t.name);if(s.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);s.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const s=new fv(t,this);return this.providers.set(t,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ae||(ae={}));const mv={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},yv=ae.INFO,vv={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},wv=(n,t,...s)=>{if(t<n.logLevel)return;const r=new Date().toISOString(),i=vv[t];if(i)console[i](`[${r}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class nf{constructor(t){this.name=t,this._logLevel=yv,this._logHandler=wv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ae))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...t),this._logHandler(this,ae.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...t),this._logHandler(this,ae.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...t),this._logHandler(this,ae.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...t),this._logHandler(this,ae.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...t),this._logHandler(this,ae.ERROR,...t)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(_v(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function _v(n){const t=n.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Ho="@firebase/app",kl="0.7.21";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=new nf("@firebase/app"),bv="@firebase/app-compat",Tv="@firebase/analytics-compat",Cv="@firebase/analytics",Sv="@firebase/app-check-compat",Iv="@firebase/app-check",Av="@firebase/auth",Nv="@firebase/auth-compat",Rv="@firebase/database",xv="@firebase/database-compat",Dv="@firebase/functions",kv="@firebase/functions-compat",Ov="@firebase/installations",Pv="@firebase/installations-compat",Mv="@firebase/messaging",Lv="@firebase/messaging-compat",Fv="@firebase/performance",Bv="@firebase/performance-compat",Vv="@firebase/remote-config",Uv="@firebase/remote-config-compat",$v="@firebase/storage",jv="@firebase/storage-compat",Hv="@firebase/firestore",qv="@firebase/firestore-compat",Kv="firebase",zv="9.6.11";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="[DEFAULT]",Gv={[Ho]:"fire-core",[bv]:"fire-core-compat",[Cv]:"fire-analytics",[Tv]:"fire-analytics-compat",[Iv]:"fire-app-check",[Sv]:"fire-app-check-compat",[Av]:"fire-auth",[Nv]:"fire-auth-compat",[Rv]:"fire-rtdb",[xv]:"fire-rtdb-compat",[Dv]:"fire-fn",[kv]:"fire-fn-compat",[Ov]:"fire-iid",[Pv]:"fire-iid-compat",[Mv]:"fire-fcm",[Lv]:"fire-fcm-compat",[Fv]:"fire-perf",[Bv]:"fire-perf-compat",[Vv]:"fire-rc",[Uv]:"fire-rc-compat",[$v]:"fire-gcs",[jv]:"fire-gcs-compat",[Hv]:"fire-fst",[qv]:"fire-fst-compat","fire-js":"fire-js",[Kv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr=new Map,qo=new Map;function Wv(n,t){try{n.container.addComponent(t)}catch(s){Ha.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,s)}}function zr(n){const t=n.name;if(qo.has(t))return Ha.debug(`There were multiple attempts to register component ${t}.`),!1;qo.set(t,n);for(const s of Kr.values())Wv(s,n);return!0}function Yv(n,t){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["storage-open"]:"Error thrown when opening storage. Original error: {$originalErrorMessage}.",["storage-get"]:"Error thrown when reading from storage. Original error: {$originalErrorMessage}.",["storage-set"]:"Error thrown when writing to storage. Original error: {$originalErrorMessage}.",["storage-delete"]:"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."},vn=new Zh("app","Firebase",Xv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(t,s,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv=zv;function Zv(n,t={}){typeof t!="object"&&(t={name:t});const s=Object.assign({name:sf,automaticDataCollectionEnabled:!1},t),r=s.name;if(typeof r!="string"||!r)throw vn.create("bad-app-name",{appName:String(r)});const i=Kr.get(r);if(i){if(jo(n,i.options)&&jo(s,i.config))return i;throw vn.create("duplicate-app",{appName:r})}const o=new gv(r);for(const c of qo.values())o.addComponent(c);const a=new Qv(n,s,o);return Kr.set(r,a),a}function ew(n=sf){const t=Kr.get(n);if(!t)throw vn.create("no-app",{appName:n});return t}function jn(n,t,s){var r;let i=(r=Gv[n])!==null&&r!==void 0?r:n;s&&(i+=`-${s}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const c=[`Unable to register library "${i}" with version "${t}":`];o&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&c.push("and"),a&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ha.warn(c.join(" "));return}zr(new qs(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="firebase-heartbeat-database",nw=1,Ks="firebase-heartbeat-store";let ro=null;function rf(){return ro||(ro=hv(tw,nw,(n,t)=>{switch(t){case 0:n.createObjectStore(Ks)}}).catch(n=>{throw vn.create("storage-open",{originalErrorMessage:n.message})})),ro}async function sw(n){try{return(await rf()).transaction(Ks).objectStore(Ks).get(of(n))}catch(t){throw vn.create("storage-get",{originalErrorMessage:t.message})}}async function Ol(n,t){try{const r=(await rf()).transaction(Ks,"readwrite");return await r.objectStore(Ks).put(t,of(n)),r.complete}catch(s){throw vn.create("storage-set",{originalErrorMessage:s.message})}}function of(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=1024,iw=30*24*60*60*1e3;class ow{constructor(t){this.container=t,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new cw(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pl();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=iw}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pl(),{heartbeatsToSend:s,unsentEntries:r}=aw(this._heartbeatsCache.heartbeats),i=Jh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Pl(){return new Date().toISOString().substring(0,10)}function aw(n,t=rw){const s=[];let r=n.slice();for(const i of n){const o=s.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Ml(s)>t){o.dates.pop();break}}else if(s.push({agent:i.agent,dates:[i.date]}),Ml(s)>t){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class cw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ov()?av().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await sw(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(t){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ol(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var s;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ol(this.app,{lastSentHeartbeatDate:(s=t.lastSentHeartbeatDate)!==null&&s!==void 0?s:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Ml(n){return Jh(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n){zr(new qs("platform-logger",t=>new Ev(t),"PRIVATE")),zr(new qs("heartbeat",t=>new ow(t),"PRIVATE")),jn(Ho,kl,n),jn(Ho,kl,"esm2017"),jn("fire-js","")}lw("");var uw=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},O,qa=qa||{},K=uw||self;function Gr(){}function Ko(n){var t=typeof n;return t=t!="object"?t:n?Array.isArray(n)?"array":t:"null",t=="array"||t=="object"&&typeof n.length=="number"}function sr(n){var t=typeof n;return t=="object"&&n!=null||t=="function"}function hw(n){return Object.prototype.hasOwnProperty.call(n,io)&&n[io]||(n[io]=++fw)}var io="closure_uid_"+(1e9*Math.random()>>>0),fw=0;function dw(n,t,s){return n.call.apply(n.bind,arguments)}function pw(n,t,s){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(t,i)}}return function(){return n.apply(t,arguments)}}function je(n,t,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?je=dw:je=pw,je.apply(null,arguments)}function Cr(n,t){var s=Array.prototype.slice.call(arguments,1);return function(){var r=s.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function ze(n,t){function s(){}s.prototype=t.prototype,n.Z=t.prototype,n.prototype=new s,n.prototype.constructor=n,n.Vb=function(r,i,o){for(var a=Array(arguments.length-2),c=2;c<arguments.length;c++)a[c-2]=arguments[c];return t.prototype[i].apply(r,a)}}function nn(){this.s=this.s,this.o=this.o}var gw=0,mw={};nn.prototype.s=!1;nn.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),gw!=0)){var n=hw(this);delete mw[n]}};nn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const af=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if(typeof n=="string")return typeof t!="string"||t.length!=1?-1:n.indexOf(t,0);for(let s=0;s<n.length;s++)if(s in n&&n[s]===t)return s;return-1},cf=Array.prototype.forEach?function(n,t,s){Array.prototype.forEach.call(n,t,s)}:function(n,t,s){const r=n.length,i=typeof n=="string"?n.split(""):n;for(let o=0;o<r;o++)o in i&&t.call(s,i[o],o,n)};function yw(n){e:{var t=cE;const s=n.length,r=typeof n=="string"?n.split(""):n;for(let i=0;i<s;i++)if(i in r&&t.call(void 0,r[i],i,n)){t=i;break e}t=-1}return 0>t?null:typeof n=="string"?n.charAt(t):n[t]}function Ll(n){return Array.prototype.concat.apply([],arguments)}function Ka(n){const t=n.length;if(0<t){const s=Array(t);for(let r=0;r<t;r++)s[r]=n[r];return s}return[]}function Wr(n){return/^[\s\xa0]*$/.test(n)}var Fl=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Je(n,t){return n.indexOf(t)!=-1}function oo(n,t){return n<t?-1:n>t?1:0}var Ze;e:{var Bl=K.navigator;if(Bl){var Vl=Bl.userAgent;if(Vl){Ze=Vl;break e}}Ze=""}function za(n,t,s){for(const r in n)t.call(s,n[r],r,n)}function lf(n){const t={};for(const s in n)t[s]=n[s];return t}var Ul="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uf(n,t){let s,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(s in r)n[s]=r[s];for(let o=0;o<Ul.length;o++)s=Ul[o],Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])}}function Ga(n){return Ga[" "](n),n}Ga[" "]=Gr;function vw(n){var t=_w;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}var ww=Je(Ze,"Opera"),Qn=Je(Ze,"Trident")||Je(Ze,"MSIE"),hf=Je(Ze,"Edge"),zo=hf||Qn,ff=Je(Ze,"Gecko")&&!(Je(Ze.toLowerCase(),"webkit")&&!Je(Ze,"Edge"))&&!(Je(Ze,"Trident")||Je(Ze,"MSIE"))&&!Je(Ze,"Edge"),Ew=Je(Ze.toLowerCase(),"webkit")&&!Je(Ze,"Edge");function df(){var n=K.document;return n?n.documentMode:void 0}var Yr;e:{var ao="",co=function(){var n=Ze;if(ff)return/rv:([^\);]+)(\)|;)/.exec(n);if(hf)return/Edge\/([\d\.]+)/.exec(n);if(Qn)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n);if(Ew)return/WebKit\/(\S+)/.exec(n);if(ww)return/(?:Version)[ \/]?(\S+)/.exec(n)}();if(co&&(ao=co?co[1]:""),Qn){var lo=df();if(lo!=null&&lo>parseFloat(ao)){Yr=String(lo);break e}}Yr=ao}var _w={};function bw(){return vw(function(){let n=0;const t=Fl(String(Yr)).split("."),s=Fl("9").split("."),r=Math.max(t.length,s.length);for(let a=0;n==0&&a<r;a++){var i=t[a]||"",o=s[a]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],i[0].length==0&&o[0].length==0)break;n=oo(i[1].length==0?0:parseInt(i[1],10),o[1].length==0?0:parseInt(o[1],10))||oo(i[2].length==0,o[2].length==0)||oo(i[2],o[2]),i=i[3],o=o[3]}while(n==0)}return 0<=n})}var Go;if(K.document&&Qn){var $l=df();Go=$l||parseInt(Yr,10)||void 0}else Go=void 0;var Tw=Go,Cw=function(){if(!K.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{K.addEventListener("test",Gr,t),K.removeEventListener("test",Gr,t)}catch{}return n}();function We(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};function zs(n,t){if(We.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var s=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(ff){e:{try{Ga(t.nodeName);var i=!0;break e}catch{}i=!1}i||(t=null)}}else s=="mouseover"?t=n.fromElement:s=="mouseout"&&(t=n.toElement);this.relatedTarget=t,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=n.clientX!==void 0?n.clientX:n.pageX,this.clientY=n.clientY!==void 0?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType=typeof n.pointerType=="string"?n.pointerType:Sw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&zs.Z.h.call(this)}}ze(zs,We);var Sw={2:"touch",3:"pen",4:"mouse"};zs.prototype.h=function(){zs.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var rr="closure_listenable_"+(1e6*Math.random()|0),Iw=0;function Aw(n,t,s,r,i){this.listener=n,this.proxy=null,this.src=t,this.type=s,this.capture=!!r,this.ia=i,this.key=++Iw,this.ca=this.fa=!1}function Si(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ii(n){this.src=n,this.g={},this.h=0}Ii.prototype.add=function(n,t,s,r,i){var o=n.toString();n=this.g[o],n||(n=this.g[o]=[],this.h++);var a=Yo(n,t,r,i);return-1<a?(t=n[a],s||(t.fa=!1)):(t=new Aw(t,this.src,o,!!r,i),t.fa=s,n.push(t)),t};function Wo(n,t){var s=t.type;if(s in n.g){var r=n.g[s],i=af(r,t),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(Si(t),n.g[s].length==0&&(delete n.g[s],n.h--))}}function Yo(n,t,s,r){for(var i=0;i<n.length;++i){var o=n[i];if(!o.ca&&o.listener==t&&o.capture==!!s&&o.ia==r)return i}return-1}var Wa="closure_lm_"+(1e6*Math.random()|0),uo={};function pf(n,t,s,r,i){if(r&&r.once)return mf(n,t,s,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)pf(n,t[o],s,r,i);return null}return s=Qa(s),n&&n[rr]?n.N(t,s,sr(r)?!!r.capture:!!r,i):gf(n,t,s,!1,r,i)}function gf(n,t,s,r,i,o){if(!t)throw Error("Invalid event type");var a=sr(i)?!!i.capture:!!i,c=Xa(n);if(c||(n[Wa]=c=new Ii(n)),s=c.add(t,s,r,a,o),s.proxy)return s;if(r=Nw(),s.proxy=r,r.src=n,r.listener=s,n.addEventListener)Cw||(i=a),i===void 0&&(i=!1),n.addEventListener(t.toString(),r,i);else if(n.attachEvent)n.attachEvent(vf(t.toString()),r);else if(n.addListener&&n.removeListener)n.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return s}function Nw(){function n(s){return t.call(n.src,n.listener,s)}var t=Rw;return n}function mf(n,t,s,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)mf(n,t[o],s,r,i);return null}return s=Qa(s),n&&n[rr]?n.O(t,s,sr(r)?!!r.capture:!!r,i):gf(n,t,s,!0,r,i)}function yf(n,t,s,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)yf(n,t[o],s,r,i);else r=sr(r)?!!r.capture:!!r,s=Qa(s),n&&n[rr]?(n=n.i,t=String(t).toString(),t in n.g&&(o=n.g[t],s=Yo(o,s,r,i),-1<s&&(Si(o[s]),Array.prototype.splice.call(o,s,1),o.length==0&&(delete n.g[t],n.h--)))):n&&(n=Xa(n))&&(t=n.g[t.toString()],n=-1,t&&(n=Yo(t,s,r,i)),(s=-1<n?t[n]:null)&&Ya(s))}function Ya(n){if(typeof n!="number"&&n&&!n.ca){var t=n.src;if(t&&t[rr])Wo(t.i,n);else{var s=n.type,r=n.proxy;t.removeEventListener?t.removeEventListener(s,r,n.capture):t.detachEvent?t.detachEvent(vf(s),r):t.addListener&&t.removeListener&&t.removeListener(r),(s=Xa(t))?(Wo(s,n),s.h==0&&(s.src=null,t[Wa]=null)):Si(n)}}}function vf(n){return n in uo?uo[n]:uo[n]="on"+n}function Rw(n,t){if(n.ca)n=!0;else{t=new zs(t,this);var s=n.listener,r=n.ia||n.src;n.fa&&Ya(n),n=s.call(r,t)}return n}function Xa(n){return n=n[Wa],n instanceof Ii?n:null}var ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qa(n){return typeof n=="function"?n:(n[ho]||(n[ho]=function(t){return n.handleEvent(t)}),n[ho])}function Fe(){nn.call(this),this.i=new Ii(this),this.P=this,this.I=null}ze(Fe,nn);Fe.prototype[rr]=!0;Fe.prototype.removeEventListener=function(n,t,s,r){yf(this,n,t,s,r)};function He(n,t){var s,r=n.I;if(r)for(s=[];r;r=r.I)s.push(r);if(n=n.P,r=t.type||t,typeof t=="string")t=new We(t,n);else if(t instanceof We)t.target=t.target||n;else{var i=t;t=new We(r,n),uf(t,i)}if(i=!0,s)for(var o=s.length-1;0<=o;o--){var a=t.g=s[o];i=Sr(a,r,!0,t)&&i}if(a=t.g=n,i=Sr(a,r,!0,t)&&i,i=Sr(a,r,!1,t)&&i,s)for(o=0;o<s.length;o++)a=t.g=s[o],i=Sr(a,r,!1,t)&&i}Fe.prototype.M=function(){if(Fe.Z.M.call(this),this.i){var n=this.i,t;for(t in n.g){for(var s=n.g[t],r=0;r<s.length;r++)Si(s[r]);delete n.g[t],n.h--}}this.I=null};Fe.prototype.N=function(n,t,s,r){return this.i.add(String(n),t,!1,s,r)};Fe.prototype.O=function(n,t,s,r){return this.i.add(String(n),t,!0,s,r)};function Sr(n,t,s,r){if(t=n.i.g[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==s){var c=a.listener,l=a.ia||a.src;a.fa&&Wo(n.i,a),i=c.call(l,r)!==!1&&i}}return i&&!r.defaultPrevented}var Ja=K.JSON.stringify;function xw(){var n=Ef;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}class Dw{constructor(){this.h=this.g=null}add(t,s){const r=wf.get();r.set(t,s),this.h?this.h.next=r:this.g=r,this.h=r}}var wf=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new kw,n=>n.reset());class kw{constructor(){this.next=this.g=this.h=null}set(t,s){this.h=t,this.g=s,this.next=null}reset(){this.next=this.g=this.h=null}}function Ow(n){K.setTimeout(()=>{throw n},0)}function Za(n,t){Xo||Pw(),Qo||(Xo(),Qo=!0),Ef.add(n,t)}var Xo;function Pw(){var n=K.Promise.resolve(void 0);Xo=function(){n.then(Mw)}}var Qo=!1,Ef=new Dw;function Mw(){for(var n;n=xw();){try{n.h.call(n.g)}catch(s){Ow(s)}var t=wf;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}Qo=!1}function Ai(n,t){Fe.call(this),this.h=n||1,this.g=t||K,this.j=je(this.kb,this),this.l=Date.now()}ze(Ai,Fe);O=Ai.prototype;O.da=!1;O.S=null;O.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),He(this,"tick"),this.da&&(ec(this),this.start()))}};O.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function ec(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}O.M=function(){Ai.Z.M.call(this),ec(this),delete this.g};function tc(n,t,s){if(typeof n=="function")s&&(n=je(n,s));else if(n&&typeof n.handleEvent=="function")n=je(n.handleEvent,n);else throw Error("Invalid listener argument");return 2147483647<Number(t)?-1:K.setTimeout(n,t||0)}function _f(n){n.g=tc(()=>{n.g=null,n.i&&(n.i=!1,_f(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}class Lw extends nn{constructor(t,s){super(),this.m=t,this.j=s,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:_f(this)}M(){super.M(),this.g&&(K.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gs(n){nn.call(this),this.h=n,this.g={}}ze(Gs,nn);var jl=[];function bf(n,t,s,r){Array.isArray(s)||(s&&(jl[0]=s.toString()),s=jl);for(var i=0;i<s.length;i++){var o=pf(t,s[i],r||n.handleEvent,!1,n.h||n);if(!o)break;n.g[o.key]=o}}function Tf(n){za(n.g,function(t,s){this.g.hasOwnProperty(s)&&Ya(t)},n),n.g={}}Gs.prototype.M=function(){Gs.Z.M.call(this),Tf(this)};Gs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ni(){this.g=!0}Ni.prototype.Aa=function(){this.g=!1};function Fw(n,t,s,r,i,o){n.info(function(){if(n.g)if(o)for(var a="",c=o.split("&"),l=0;l<c.length;l++){var u=c[l].split("=");if(1<u.length){var h=u[0];u=u[1];var f=h.split("_");a=2<=f.length&&f[1]=="type"?a+(h+"="+u+"&"):a+(h+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+`
`+s+`
`+a})}function Bw(n,t,s,r,i,o,a){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+`
`+s+`
`+o+" "+a})}function Bn(n,t,s,r){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+Uw(n,s)+(r?" "+r:"")})}function Vw(n,t){n.info(function(){return"TIMEOUT: "+t})}Ni.prototype.info=function(){};function Uw(n,t){if(!n.g)return t;if(!t)return null;try{var s=JSON.parse(t);if(s){for(n=0;n<s.length;n++)if(Array.isArray(s[n])){var r=s[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var a=1;a<i.length;a++)i[a]=""}}}}return Ja(s)}catch{return t}}var Sn={},Hl=null;function Ri(){return Hl=Hl||new Fe}Sn.Ma="serverreachability";function Cf(n){We.call(this,Sn.Ma,n)}ze(Cf,We);function Ws(n){const t=Ri();He(t,new Cf(t,n))}Sn.STAT_EVENT="statevent";function Sf(n,t){We.call(this,Sn.STAT_EVENT,n),this.stat=t}ze(Sf,We);function et(n){const t=Ri();He(t,new Sf(t,n))}Sn.Na="timingevent";function If(n,t){We.call(this,Sn.Na,n),this.size=t}ze(If,We);function ir(n,t){if(typeof n!="function")throw Error("Fn must not be null and must be a function");return K.setTimeout(function(){n()},t)}var xi={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Af={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function nc(){}nc.prototype.h=null;function ql(n){return n.h||(n.h=n.i())}function Nf(){}var or={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function sc(){We.call(this,"d")}ze(sc,We);function rc(){We.call(this,"c")}ze(rc,We);var Jo;function Di(){}ze(Di,nc);Di.prototype.g=function(){return new XMLHttpRequest};Di.prototype.i=function(){return{}};Jo=new Di;function ar(n,t,s,r){this.l=n,this.j=t,this.m=s,this.X=r||1,this.V=new Gs(this),this.P=$w,n=zo?125:void 0,this.W=new Ai(n),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Rf}function Rf(){this.i=null,this.g="",this.h=!1}var $w=45e3,Zo={},Xr={};O=ar.prototype;O.setTimeout=function(n){this.P=n};function ea(n,t,s){n.K=1,n.v=Oi(Ut(t)),n.s=s,n.U=!0,xf(n,null)}function xf(n,t){n.F=Date.now(),cr(n),n.A=Ut(n.v);var s=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),Ff(s.h,"t",r),n.C=0,s=n.l.H,n.h=new Rf,n.g=sd(n.l,s?t:null,!n.s),0<n.O&&(n.L=new Lw(je(n.Ia,n,n.g),n.O)),bf(n.V,n.g,"readystatechange",n.gb),t=n.H?lf(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),Ws(1),Fw(n.j,n.u,n.A,n.m,n.X,n.s)}O.gb=function(n){n=n.target;const t=this.L;t&&Mt(n)==3?t.l():this.Ia(n)};O.Ia=function(n){try{if(n==this.g)e:{const h=Mt(this.g);var t=this.g.Da();const f=this.g.ba();if(!(3>h)&&(h!=3||zo||this.g&&(this.h.h||this.g.ga()||Wl(this.g)))){this.I||h!=4||t==7||(t==8||0>=f?Ws(3):Ws(2)),ki(this);var s=this.g.ba();this.N=s;t:if(Df(this)){var r=Wl(this.g);n="";var i=r.length,o=Mt(this.g)==4;if(!this.h.i){if(typeof TextDecoder=="undefined"){hn(this),Os(this);var a="";break t}this.h.i=new K.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,n+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.splice(0,i),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=s==200,Bw(this.j,this.u,this.A,this.m,this.X,h,s),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Wr(c)){var u=c;break t}}u=null}if(s=u)Bn(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ta(this,s);else{this.i=!1,this.o=3,et(12),hn(this),Os(this);break e}}this.U?(kf(this,h,a),zo&&this.i&&h==3&&(bf(this.V,this.W,"tick",this.fb),this.W.start())):(Bn(this.j,this.m,a,null),ta(this,a)),h==4&&hn(this),this.i&&!this.I&&(h==4?Zf(this.l,this):(this.i=!1,cr(this)))}else s==400&&0<a.indexOf("Unknown SID")?(this.o=3,et(12)):(this.o=0,et(13)),hn(this),Os(this)}}}catch{}finally{}};function Df(n){return n.g?n.u=="GET"&&n.K!=2&&n.l.Ba:!1}function kf(n,t,s){let r=!0,i;for(;!n.I&&n.C<s.length;)if(i=jw(n,s),i==Xr){t==4&&(n.o=4,et(14),r=!1),Bn(n.j,n.m,null,"[Incomplete Response]");break}else if(i==Zo){n.o=4,et(15),Bn(n.j,n.m,s,"[Invalid Chunk]"),r=!1;break}else Bn(n.j,n.m,i,null),ta(n,i);Df(n)&&i!=Xr&&i!=Zo&&(n.h.g="",n.C=0),t!=4||s.length!=0||n.h.h||(n.o=1,et(16),r=!1),n.i=n.i&&r,r?0<s.length&&!n.aa&&(n.aa=!0,t=n.l,t.g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+s.length),dc(t),t.L=!0,et(11))):(Bn(n.j,n.m,s,"[Invalid Chunked Response]"),hn(n),Os(n))}O.fb=function(){if(this.g){var n=Mt(this.g),t=this.g.ga();this.C<t.length&&(ki(this),kf(this,n,t),this.i&&n!=4&&cr(this))}};function jw(n,t){var s=n.C,r=t.indexOf(`
`,s);return r==-1?Xr:(s=Number(t.substring(s,r)),isNaN(s)?Zo:(r+=1,r+s>t.length?Xr:(t=t.substr(r,s),n.C=r+s,t)))}O.cancel=function(){this.I=!0,hn(this)};function cr(n){n.Y=Date.now()+n.P,Of(n,n.P)}function Of(n,t){if(n.B!=null)throw Error("WatchDog timer not null");n.B=ir(je(n.eb,n),t)}function ki(n){n.B&&(K.clearTimeout(n.B),n.B=null)}O.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(Vw(this.j,this.A),this.K!=2&&(Ws(3),et(17)),hn(this),this.o=2,Os(this)):Of(this,this.Y-n)};function Os(n){n.l.G==0||n.I||Zf(n.l,n)}function hn(n){ki(n);var t=n.L;t&&typeof t.na=="function"&&t.na(),n.L=null,ec(n.W),Tf(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function ta(n,t){try{var s=n.l;if(s.G!=0&&(s.g==n||na(s.i,n))){if(s.I=n.N,!n.J&&na(s.i,n)&&s.G==3){try{var r=s.Ca.g.parse(t)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!s.u){if(s.g)if(s.g.F+3e3<n.F)ei(s),Li(s);else break e;fc(s),et(18)}}else s.ta=i[1],0<s.ta-s.U&&37500>i[2]&&s.N&&s.A==0&&!s.v&&(s.v=ir(je(s.ab,s),6e3));if(1>=Uf(s.i)&&s.ka){try{s.ka()}catch{}s.ka=void 0}}else fn(s,11)}else if((n.J||s.g==n)&&ei(s),!Wr(t))for(i=s.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(s.U=u[0],u=u[1],s.G==2)if(u[0]=="c"){s.J=u[1],s.la=u[2];const h=u[3];h!=null&&(s.ma=h,s.h.info("VER="+s.ma));const f=u[4];f!=null&&(s.za=f,s.h.info("SVER="+s.za));const p=u[5];p!=null&&typeof p=="number"&&0<p&&(r=1.5*p,s.K=r,s.h.info("backChannelRequestTimeoutMs_="+r)),r=s;const m=n.g;if(m){const v=m.g?m.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var o=r.i;!o.g&&(Je(v,"spdy")||Je(v,"quic")||Je(v,"h2"))&&(o.j=o.l,o.g=new Set,o.h&&(ac(o,o.h),o.h=null))}if(r.D){const S=m.g?m.g.getResponseHeader("X-HTTP-Session-Id"):null;S&&(r.sa=S,Te(r.F,r.D,S))}}s.G=3,s.j&&s.j.xa(),s.$&&(s.O=Date.now()-n.F,s.h.info("Handshake RTT: "+s.O+"ms")),r=s;var a=n;if(r.oa=nd(r,r.H?r.la:null,r.W),a.J){$f(r.i,a);var c=a,l=r.K;l&&c.setTimeout(l),c.B&&(ki(c),cr(c)),r.g=a}else Qf(r);0<s.l.length&&Fi(s)}else u[0]!="stop"&&u[0]!="close"||fn(s,7);else s.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?fn(s,7):hc(s):u[0]!="noop"&&s.j&&s.j.wa(u),s.A=0)}}Ws(4)}catch{}}function Hw(n){if(n.R&&typeof n.R=="function")return n.R();if(typeof n=="string")return n.split("");if(Ko(n)){for(var t=[],s=n.length,r=0;r<s;r++)t.push(n[r]);return t}t=[],s=0;for(r in n)t[s++]=n[r];return t}function ic(n,t){if(n.forEach&&typeof n.forEach=="function")n.forEach(t,void 0);else if(Ko(n)||typeof n=="string")cf(n,t,void 0);else{if(n.T&&typeof n.T=="function")var s=n.T();else if(n.R&&typeof n.R=="function")s=void 0;else if(Ko(n)||typeof n=="string"){s=[];for(var r=n.length,i=0;i<r;i++)s.push(i)}else for(i in s=[],r=0,n)s[r++]=i;r=Hw(n),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],s&&s[o],n)}}function hs(n,t){this.h={},this.g=[],this.i=0;var s=arguments.length;if(1<s){if(s%2)throw Error("Uneven number of arguments");for(var r=0;r<s;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof hs)for(s=n.T(),r=0;r<s.length;r++)this.set(s[r],n.get(s[r]));else for(r in n)this.set(r,n[r])}O=hs.prototype;O.R=function(){oc(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n};O.T=function(){return oc(this),this.g.concat()};function oc(n){if(n.i!=n.g.length){for(var t=0,s=0;t<n.g.length;){var r=n.g[t];wn(n.h,r)&&(n.g[s++]=r),t++}n.g.length=s}if(n.i!=n.g.length){var i={};for(s=t=0;t<n.g.length;)r=n.g[t],wn(i,r)||(n.g[s++]=r,i[r]=1),t++;n.g.length=s}}O.get=function(n,t){return wn(this.h,n)?this.h[n]:t};O.set=function(n,t){wn(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t};O.forEach=function(n,t){for(var s=this.T(),r=0;r<s.length;r++){var i=s[r],o=this.get(i);n.call(t,o,i,this)}};function wn(n,t){return Object.prototype.hasOwnProperty.call(n,t)}var Pf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function qw(n,t){if(n){n=n.split("&");for(var s=0;s<n.length;s++){var r=n[s].indexOf("="),i=null;if(0<=r){var o=n[s].substring(0,r);i=n[s].substring(r+1)}else o=n[s];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function En(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof En){this.g=t!==void 0?t:n.g,Qr(this,n.j),this.s=n.s,Jr(this,n.i),Zr(this,n.m),this.l=n.l,t=n.h;var s=new Ys;s.i=t.i,t.g&&(s.g=new hs(t.g),s.h=t.h),Kl(this,s),this.o=n.o}else n&&(s=String(n).match(Pf))?(this.g=!!t,Qr(this,s[1]||"",!0),this.s=Ps(s[2]||""),Jr(this,s[3]||"",!0),Zr(this,s[4]),this.l=Ps(s[5]||"",!0),Kl(this,s[6]||"",!0),this.o=Ps(s[7]||"")):(this.g=!!t,this.h=new Ys(null,this.g))}En.prototype.toString=function(){var n=[],t=this.j;t&&n.push(Ss(t,zl,!0),":");var s=this.i;return(s||t=="file")&&(n.push("//"),(t=this.s)&&n.push(Ss(t,zl,!0),"@"),n.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s=this.m,s!=null&&n.push(":",String(s))),(s=this.l)&&(this.i&&s.charAt(0)!="/"&&n.push("/"),n.push(Ss(s,s.charAt(0)=="/"?Yw:Ww,!0))),(s=this.h.toString())&&n.push("?",s),(s=this.o)&&n.push("#",Ss(s,Qw)),n.join("")};function Ut(n){return new En(n)}function Qr(n,t,s){n.j=s?Ps(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function Jr(n,t,s){n.i=s?Ps(t,!0):t}function Zr(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Kl(n,t,s){t instanceof Ys?(n.h=t,Jw(n.h,n.g)):(s||(t=Ss(t,Xw)),n.h=new Ys(t,n.g))}function Te(n,t,s){n.h.set(t,s)}function Oi(n){return Te(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Kw(n){return n instanceof En?Ut(n):new En(n,void 0)}function zw(n,t,s,r){var i=new En(null,void 0);return n&&Qr(i,n),t&&Jr(i,t),s&&Zr(i,s),r&&(i.l=r),i}function Ps(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ss(n,t,s){return typeof n=="string"?(n=encodeURI(n).replace(t,Gw),s&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Gw(n){return n=n.charCodeAt(0),"%"+(n>>4&15).toString(16)+(n&15).toString(16)}var zl=/[#\/\?@]/g,Ww=/[#\?:]/g,Yw=/[#\?]/g,Xw=/[#\?@]/g,Qw=/#/g;function Ys(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function sn(n){n.g||(n.g=new hs,n.h=0,n.i&&qw(n.i,function(t,s){n.add(decodeURIComponent(t.replace(/\+/g," ")),s)}))}O=Ys.prototype;O.add=function(n,t){sn(this),this.i=null,n=fs(this,n);var s=this.g.get(n);return s||this.g.set(n,s=[]),s.push(t),this.h+=1,this};function Mf(n,t){sn(n),t=fs(n,t),wn(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,n=n.g,wn(n.h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&oc(n)))}function Lf(n,t){return sn(n),t=fs(n,t),wn(n.g.h,t)}O.forEach=function(n,t){sn(this),this.g.forEach(function(s,r){cf(s,function(i){n.call(t,i,r,this)},this)},this)};O.T=function(){sn(this);for(var n=this.g.R(),t=this.g.T(),s=[],r=0;r<t.length;r++)for(var i=n[r],o=0;o<i.length;o++)s.push(t[r]);return s};O.R=function(n){sn(this);var t=[];if(typeof n=="string")Lf(this,n)&&(t=Ll(t,this.g.get(fs(this,n))));else{n=this.g.R();for(var s=0;s<n.length;s++)t=Ll(t,n[s])}return t};O.set=function(n,t){return sn(this),this.i=null,n=fs(this,n),Lf(this,n)&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this};O.get=function(n,t){return n?(n=this.R(n),0<n.length?String(n[0]):t):t};function Ff(n,t,s){Mf(n,t),0<s.length&&(n.i=null,n.g.set(fs(n,t),Ka(s)),n.h+=s.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),s=0;s<t.length;s++){var r=t[s],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;r[o]!==""&&(a+="="+encodeURIComponent(String(r[o]))),n.push(a)}}return this.i=n.join("&")};function fs(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function Jw(n,t){t&&!n.j&&(sn(n),n.i=null,n.g.forEach(function(s,r){var i=r.toLowerCase();r!=i&&(Mf(this,r),Ff(this,i,s))},n)),n.j=t}var Zw=class{constructor(n,t){this.h=n,this.g=t}};function Bf(n){this.l=n||eE,K.PerformanceNavigationTiming?(n=K.performance.getEntriesByType("navigation"),n=0<n.length&&(n[0].nextHopProtocol=="hq"||n[0].nextHopProtocol=="h2")):n=!!(K.g&&K.g.Ea&&K.g.Ea()&&K.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eE=10;function Vf(n){return n.h?!0:n.g?n.g.size>=n.j:!1}function Uf(n){return n.h?1:n.g?n.g.size:0}function na(n,t){return n.h?n.h==t:n.g?n.g.has(t):!1}function ac(n,t){n.g?n.g.add(t):n.h=t}function $f(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}Bf.prototype.cancel=function(){if(this.i=jf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const n of this.g.values())n.cancel();this.g.clear()}};function jf(n){if(n.h!=null)return n.i.concat(n.h.D);if(n.g!=null&&n.g.size!==0){let t=n.i;for(const s of n.g.values())t=t.concat(s.D);return t}return Ka(n.i)}function cc(){}cc.prototype.stringify=function(n){return K.JSON.stringify(n,void 0)};cc.prototype.parse=function(n){return K.JSON.parse(n,void 0)};function tE(){this.g=new cc}function nE(n,t,s){const r=s||"";try{ic(n,function(i,o){let a=i;sr(i)&&(a=Ja(i)),t.push(r+o+"="+encodeURIComponent(a))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function sE(n,t){const s=new Ni;if(K.Image){const r=new Image;r.onload=Cr(Ir,s,r,"TestLoadImage: loaded",!0,t),r.onerror=Cr(Ir,s,r,"TestLoadImage: error",!1,t),r.onabort=Cr(Ir,s,r,"TestLoadImage: abort",!1,t),r.ontimeout=Cr(Ir,s,r,"TestLoadImage: timeout",!1,t),K.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else t(!1)}function Ir(n,t,s,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch{}}function lr(n){this.l=n.$b||null,this.j=n.ib||!1}ze(lr,nc);lr.prototype.g=function(){return new Pi(this.l,this.j)};lr.prototype.i=function(n){return function(){return n}}({});function Pi(n,t){Fe.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=lc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}ze(Pi,Fe);var lc=0;O=Pi.prototype;O.open=function(n,t){if(this.readyState!=lc)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Xs(this)};O.send=function(n){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||K).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ur(this)),this.readyState=lc};O.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Xs(this)),this.g&&(this.readyState=3,Xs(this),this.g)))if(this.responseType==="arraybuffer")n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(typeof K.ReadableStream!="undefined"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Hf(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))};function Hf(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}O.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?ur(this):Xs(this),this.readyState==3&&Hf(this)}};O.Ua=function(n){this.g&&(this.response=this.responseText=n,ur(this))};O.Ta=function(n){this.g&&(this.response=n,ur(this))};O.ha=function(){this.g&&ur(this)};function ur(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Xs(n)}O.setRequestHeader=function(n,t){this.v.append(n,t)};O.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var s=t.next();!s.done;)s=s.value,n.push(s[0]+": "+s[1]),s=t.next();return n.join(`\r
`)};function Xs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}Object.defineProperty(Pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(n){this.m=n?"include":"same-origin"}});var rE=K.JSON.parse;function Re(n){Fe.call(this),this.headers=new hs,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=qf,this.K=this.L=!1}ze(Re,Fe);var qf="",iE=/^https?$/i,oE=["POST","PUT"];O=Re.prototype;O.ea=function(n,t,s,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jo.g(),this.C=this.u?ql(this.u):ql(Jo),this.g.onreadystatechange=je(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(o){Gl(this,o);return}n=s||"";const i=new hs(this.headers);r&&ic(r,function(o,a){i.set(a,o)}),r=yw(i.T()),s=K.FormData&&n instanceof K.FormData,!(0<=af(oE,t))||r||s||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(o,a){this.g.setRequestHeader(a,o)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Gf(this),0<this.B&&((this.K=aE(this.g))?(this.g.timeout=this.B,this.g.ontimeout=je(this.pa,this)):this.A=tc(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(o){Gl(this,o)}};function aE(n){return Qn&&bw()&&typeof n.timeout=="number"&&n.ontimeout!==void 0}function cE(n){return n.toLowerCase()=="content-type"}O.pa=function(){typeof qa!="undefined"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,He(this,"timeout"),this.abort(8))};function Gl(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,Kf(n),Mi(n)}function Kf(n){n.D||(n.D=!0,He(n,"complete"),He(n,"error"))}O.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,He(this,"complete"),He(this,"abort"),Mi(this))};O.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mi(this,!0)),Re.Z.M.call(this)};O.Fa=function(){this.s||(this.F||this.v||this.l?zf(this):this.cb())};O.cb=function(){zf(this)};function zf(n){if(n.h&&typeof qa!="undefined"&&(!n.C[1]||Mt(n)!=4||n.ba()!=2)){if(n.v&&Mt(n)==4)tc(n.Fa,0,n);else if(He(n,"readystatechange"),Mt(n)==4){n.h=!1;try{const c=n.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var s;if(!(s=t)){var r;if(r=c===0){var i=String(n.H).match(Pf)[1]||null;if(!i&&K.self&&K.self.location){var o=K.self.location.protocol;i=o.substr(0,o.length-1)}r=!iE.test(i?i.toLowerCase():"")}s=r}if(s)He(n,"complete"),He(n,"success");else{n.m=6;try{var a=2<Mt(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.ba()+"]",Kf(n)}}finally{Mi(n)}}}}function Mi(n,t){if(n.g){Gf(n);const s=n.g,r=n.C[0]?Gr:null;n.g=null,n.C=null,t||He(n,"ready");try{s.onreadystatechange=r}catch{}}}function Gf(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(K.clearTimeout(n.A),n.A=null)}function Mt(n){return n.g?n.g.readyState:0}O.ba=function(){try{return 2<Mt(this)?this.g.status:-1}catch{return-1}};O.ga=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&t.indexOf(n)==0&&(t=t.substring(n.length)),rE(t)}};function Wl(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case qf:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}O.Da=function(){return this.m};O.La=function(){return typeof this.j=="string"?this.j:String(this.j)};function lE(n){let t="";return za(n,function(s,r){t+=r,t+=":",t+=s,t+=`\r
`}),t}function uc(n,t,s){e:{for(r in s){var r=!1;break e}r=!0}r||(s=lE(s),typeof n=="string"?s!=null&&encodeURIComponent(String(s)):Te(n,t,s))}function _s(n,t,s){return s&&s.internalChannelParams&&s.internalChannelParams[n]||t}function Wf(n){this.za=0,this.l=[],this.h=new Ni,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_s("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_s("baseRetryDelayMs",5e3,n),this.$a=_s("retryDelaySeedMs",1e4,n),this.Ya=_s("forwardChannelMaxRetries",2,n),this.ra=_s("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Bf(n&&n.concurrentRequestLimit),this.Ca=new tE,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||n.Xb!==!1}O=Wf.prototype;O.ma=8;O.G=1;function hc(n){if(Yf(n),n.G==3){var t=n.V++,s=Ut(n.F);Te(s,"SID",n.J),Te(s,"RID",t),Te(s,"TYPE","terminate"),hr(n,s),t=new ar(n,n.h,t,void 0),t.K=2,t.v=Oi(Ut(s)),s=!1,K.navigator&&K.navigator.sendBeacon&&(s=K.navigator.sendBeacon(t.v.toString(),"")),!s&&K.Image&&(new Image().src=t.v,s=!0),s||(t.g=sd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),cr(t)}td(n)}O.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch{}};function Li(n){n.g&&(dc(n),n.g.cancel(),n.g=null)}function Yf(n){Li(n),n.u&&(K.clearTimeout(n.u),n.u=null),ei(n),n.i.cancel(),n.m&&(typeof n.m=="number"&&K.clearTimeout(n.m),n.m=null)}function fo(n,t){n.l.push(new Zw(n.Za++,t)),n.G==3&&Fi(n)}function Fi(n){Vf(n.i)||n.m||(n.m=!0,Za(n.Ha,n),n.C=0)}function uE(n,t){return Uf(n.i)>=n.i.j-(n.m?1:0)?!1:n.m?(n.l=t.D.concat(n.l),!0):n.G==1||n.G==2||n.C>=(n.Xa?0:n.Ya)?!1:(n.m=ir(je(n.Ha,n,t),ed(n,n.C)),n.C++,!0)}O.Ha=function(n){if(this.m)if(this.m=null,this.G==1){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new ar(this,this.h,n,void 0);let o=this.s;if(this.P&&(o?(o=lf(o),uf(o,this.P)):o=this.P),this.o===null&&(i.H=o),this.ja)e:{for(var t=0,s=0;s<this.l.length;s++){t:{var r=this.l[s];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(t+=r,4096<t){t=s;break e}if(t===4096||s===this.l.length-1){t=s+1;break e}}t=1e3}else t=1e3;t=Xf(this,i,t),s=Ut(this.F),Te(s,"RID",n),Te(s,"CVER",22),this.D&&Te(s,"X-HTTP-Session-Id",this.D),hr(this,s),this.o&&o&&uc(s,this.o,o),ac(this.i,i),this.Ra&&Te(s,"TYPE","init"),this.ja?(Te(s,"$req",t),Te(s,"SID","null"),i.$=!0,ea(i,s,null)):ea(i,s,t),this.G=2}}else this.G==3&&(n?Yl(this,n):this.l.length==0||Vf(this.i)||Yl(this))};function Yl(n,t){var s;t?s=t.m:s=n.V++;const r=Ut(n.F);Te(r,"SID",n.J),Te(r,"RID",s),Te(r,"AID",n.U),hr(n,r),n.o&&n.s&&uc(r,n.o,n.s),s=new ar(n,n.h,s,n.C+1),n.o===null&&(s.H=n.s),t&&(n.l=t.D.concat(n.l)),t=Xf(n,s,1e3),s.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ac(n.i,s),ea(s,r,t)}function hr(n,t){n.j&&ic({},function(s,r){Te(t,r,s)})}function Xf(n,t,s){s=Math.min(n.l.length,s);var r=n.j?je(n.j.Oa,n.j,n):null;e:{var i=n.l;let o=-1;for(;;){const a=["count="+s];o==-1?0<s?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);let c=!0;for(let l=0;l<s;l++){let u=i[l].h;const h=i[l].g;if(u-=o,0>u)o=Math.max(0,i[l].h-100),c=!1;else try{nE(h,a,"req"+u+"_")}catch{r&&r(h)}}if(c){r=a.join("&");break e}}}return n=n.l.splice(0,s),t.D=n,r}function Qf(n){n.g||n.u||(n.Y=1,Za(n.Ga,n),n.A=0)}function fc(n){return n.g||n.u||3<=n.A?!1:(n.Y++,n.u=ir(je(n.Ga,n),ed(n,n.A)),n.A++,!0)}O.Ga=function(){if(this.u=null,Jf(this),this.$&&!(this.L||this.g==null||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ir(je(this.bb,this),n)}};O.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,et(10),Li(this),Jf(this))};function dc(n){n.B!=null&&(K.clearTimeout(n.B),n.B=null)}function Jf(n){n.g=new ar(n,n.h,"rpc",n.Y),n.o===null&&(n.g.H=n.s),n.g.O=0;var t=Ut(n.oa);Te(t,"RID","rpc"),Te(t,"SID",n.J),Te(t,"CI",n.N?"0":"1"),Te(t,"AID",n.U),hr(n,t),Te(t,"TYPE","xmlhttp"),n.o&&n.s&&uc(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var s=n.g;n=n.la,s.K=1,s.v=Oi(Ut(t)),s.s=null,s.U=!0,xf(s,n)}O.ab=function(){this.v!=null&&(this.v=null,Li(this),fc(this),et(19))};function ei(n){n.v!=null&&(K.clearTimeout(n.v),n.v=null)}function Zf(n,t){var s=null;if(n.g==t){ei(n),dc(n),n.g=null;var r=2}else if(na(n.i,t))s=t.D,$f(n.i,t),r=1;else return;if(n.I=t.N,n.G!=0){if(t.i)if(r==1){s=t.s?t.s.length:0,t=Date.now()-t.F;var i=n.C;r=Ri(),He(r,new If(r,s,t,i)),Fi(n)}else Qf(n);else if(i=t.o,i==3||i==0&&0<n.I||!(r==1&&uE(n,t)||r==2&&fc(n)))switch(s&&0<s.length&&(t=n.i,t.i=t.i.concat(s)),i){case 1:fn(n,5);break;case 4:fn(n,10);break;case 3:fn(n,6);break;default:fn(n,2)}}}function ed(n,t){let s=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(s*=2),s*t}function fn(n,t){if(n.h.info("Error code "+t),t==2){var s=null;n.j&&(s=null);var r=je(n.jb,n);s||(s=new En("//www.google.com/images/cleardot.gif"),K.location&&K.location.protocol=="http"||Qr(s,"https"),Oi(s)),sE(s.toString(),r)}else et(2);n.G=0,n.j&&n.j.va(t),td(n),Yf(n)}O.jb=function(n){n?(this.h.info("Successfully pinged google.com"),et(2)):(this.h.info("Failed to ping google.com"),et(1))};function td(n){n.G=0,n.I=-1,n.j&&((jf(n.i).length!=0||n.l.length!=0)&&(n.i.i.length=0,Ka(n.l),n.l.length=0),n.j.ua())}function nd(n,t,s){let r=Kw(s);if(r.i!="")t&&Jr(r,t+"."+r.i),Zr(r,r.m);else{const i=K.location;r=zw(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,s)}return n.aa&&za(n.aa,function(i,o){Te(r,o,i)}),t=n.D,s=n.sa,t&&s&&Te(r,t,s),Te(r,"VER",n.ma),hr(n,r),r}function sd(n,t,s){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return t=s&&n.Ba&&!n.qa?new Re(new lr({ib:!0})):new Re(n.qa),t.L=n.H,t}function rd(){}O=rd.prototype;O.xa=function(){};O.wa=function(){};O.va=function(){};O.ua=function(){};O.Oa=function(){};function ti(){if(Qn&&!(10<=Number(Tw)))throw Error("Environmental error: no available transport.")}ti.prototype.g=function(n,t){return new ut(n,t)};function ut(n,t){Fe.call(this),this.g=new Wf(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!Wr(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Wr(t)&&(this.g.D=t,n=this.h,n!==null&&t in n&&(n=this.h,t in n&&delete n[t])),this.j=new ds(this)}ze(ut,Fe);ut.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,s=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Za(je(n.hb,n,t))),et(0),n.W=t,n.aa=s||{},n.N=n.X,n.F=nd(n,null,n.W),Fi(n)};ut.prototype.close=function(){hc(this.g)};ut.prototype.u=function(n){if(typeof n=="string"){var t={};t.__data__=n,fo(this.g,t)}else this.v?(t={},t.__data__=Ja(n),fo(this.g,t)):fo(this.g,n)};ut.prototype.M=function(){this.g.j=null,delete this.j,hc(this.g),delete this.g,ut.Z.M.call(this)};function id(n){sc.call(this);var t=n.__sm__;if(t){e:{for(const s in t){n=s;break e}n=void 0}(this.i=n)&&(n=this.i,t=t!==null&&n in t?t[n]:void 0),this.data=t}else this.data=n}ze(id,sc);function od(){rc.call(this),this.status=1}ze(od,rc);function ds(n){this.g=n}ze(ds,rd);ds.prototype.xa=function(){He(this.g,"a")};ds.prototype.wa=function(n){He(this.g,new id(n))};ds.prototype.va=function(n){He(this.g,new od(n))};ds.prototype.ua=function(){He(this.g,"b")};ti.prototype.createWebChannel=ti.prototype.g;ut.prototype.send=ut.prototype.u;ut.prototype.open=ut.prototype.m;ut.prototype.close=ut.prototype.close;xi.NO_ERROR=0;xi.TIMEOUT=8;xi.HTTP_ERROR=6;Af.COMPLETE="complete";Nf.EventType=or;or.OPEN="a";or.CLOSE="b";or.ERROR="c";or.MESSAGE="d";Fe.prototype.listen=Fe.prototype.N;Re.prototype.listenOnce=Re.prototype.O;Re.prototype.getLastError=Re.prototype.La;Re.prototype.getLastErrorCode=Re.prototype.Da;Re.prototype.getStatus=Re.prototype.ba;Re.prototype.getResponseJson=Re.prototype.Qa;Re.prototype.getResponseText=Re.prototype.ga;Re.prototype.send=Re.prototype.ea;var hE=function(){return new ti},fE=function(){return Ri()},po=xi,dE=Af,pE=Sn,Xl={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},gE=lr,Ar=Nf,mE=Re;const Ql="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ps="9.6.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new nf("@firebase/firestore");function Jl(){return _n.logLevel}function F(n,...t){if(_n.logLevel<=ae.DEBUG){const s=t.map(pc);_n.debug(`Firestore (${ps}): ${n}`,...s)}}function Zt(n,...t){if(_n.logLevel<=ae.ERROR){const s=t.map(pc);_n.error(`Firestore (${ps}): ${n}`,...s)}}function Zl(n,...t){if(_n.logLevel<=ae.WARN){const s=t.map(pc);_n.warn(`Firestore (${ps}): ${n}`,...s)}}function pc(n){if(typeof n=="string")return n;try{return t=n,JSON.stringify(t)}catch{return n}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(n="Unexpected state"){const t=`FIRESTORE (${ps}) INTERNAL ASSERTION FAILED: `+n;throw Zt(t),new Error(t)}function we(n,t){n||G()}function Y(n,t){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Ci{constructor(t,s){super(t,s),this.code=t,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(){this.promise=new Promise((t,s)=>{this.resolve=t,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(t,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class vE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,s){t.enqueueRetryable(()=>s(st.UNAUTHENTICATED))}shutdown(){}}class wE{constructor(t){this.t=t,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,s){let r=this.i;const i=l=>this.i!==r?(r=this.i,s(l)):Promise.resolve();let o=new Xt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Xt,t.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const l=o;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},c=l=>{F("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?c(l):(F("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Xt)}},0),a()}getToken(){const t=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(r=>this.i!==t?(F("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new yE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return we(t===null||typeof t=="string"),new st(t)}}class EE{constructor(t,s,r){this.type="FirstParty",this.user=st.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",s);const i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class _E{constructor(t,s,r){this.h=t,this.l=s,this.m=r}getToken(){return Promise.resolve(new EE(this.h,this.l,this.m))}start(t,s){t.enqueueRetryable(()=>s(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TE{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,s){const r=o=>{o.error!=null&&F("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.p;return this.p=o.token,F("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?s(o.token):Promise.resolve()};this.o=o=>{t.enqueueRetryable(()=>r(o))};const i=o=>{F("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.g.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.g.getImmediate({optional:!0});o?i(o):F("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(s=>s?(we(typeof s.token=="string"),this.p=s.token,new bE(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(t,s){this.previousValue=t,s&&(s.sequenceNumberHandler=r=>this.I(r),this.T=r=>s.writeSequenceNumber(r))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n){const t=typeof self!="undefined"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(s);else for(let r=0;r<n;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gc.A=-1;class ad{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=CE(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<s&&(r+=t.charAt(i[o]%t.length))}return r}}function ce(n,t){return n<t?-1:n>t?1:0}function Jn(n,t,s){return n.length===t.length&&n.every((r,i)=>s(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t,s){if(this.seconds=t,this.nanoseconds=s,s<0)throw new q(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new q(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(t<-62135596800)throw new q(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new q(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ye.fromMillis(Date.now())}static fromDate(t){return Ye.fromMillis(t.getTime())}static fromMillis(t){const s=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*s));return new Ye(s,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?ce(this.nanoseconds,t.nanoseconds):ce(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ee(t)}static min(){return new ee(new Ye(0,0))}static max(){return new ee(new Ye(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){let t=0;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t++;return t}function gs(n,t){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&t(s,n[s])}function cd(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(t,s,r){s===void 0?s=0:s>t.length&&G(),r===void 0?r=t.length-s:r>t.length-s&&G(),this.segments=t,this.offset=s,this.len=r}get length(){return this.len}isEqual(t){return Qs.comparator(this,t)===0}child(t){const s=this.segments.slice(this.offset,this.limit());return t instanceof Qs?t.forEach(r=>{s.push(r)}):s.push(t),this.construct(s)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==t.get(s))return!1;return!0}forEach(t){for(let s=this.offset,r=this.limit();s<r;s++)t(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,s){const r=Math.min(t.length,s.length);for(let i=0;i<r;i++){const o=t.get(i),a=s.get(i);if(o<a)return-1;if(o>a)return 1}return t.length<s.length?-1:t.length>s.length?1:0}}class Ce extends Qs{construct(t,s,r){return new Ce(t,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const s=[];for(const r of t){if(r.indexOf("//")>=0)throw new q(T.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter(i=>i.length>0))}return new Ce(s)}static emptyPath(){return new Ce([])}}const SE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rt extends Qs{construct(t,s,r){return new rt(t,s,r)}static isValidIdentifier(t){return SE.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new rt(["__name__"])}static fromServerFormat(t){const s=[];let r="",i=0;const o=()=>{if(r.length===0)throw new q(T.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let a=!1;for(;i<t.length;){const c=t[i];if(c==="\\"){if(i+1===t.length)throw new q(T.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new q(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else c==="`"?(a=!a,i++):c!=="."||a?(r+=c,i++):(o(),i++)}if(o(),a)throw new q(T.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new rt(s)}static emptyPath(){return new rt([])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(t){this.fields=t,t.sort(rt.comparator)}covers(t){for(const s of this.fields)if(s.isPrefixOf(t))return!0;return!1}isEqual(t){return Jn(this.fields,t.fields,(s,r)=>s.isEqual(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.binaryString=t}static fromBase64String(t){const s=atob(t);return new Ke(s)}static fromUint8Array(t){const s=function(r){let i="";for(let o=0;o<r.length;++o)i+=String.fromCharCode(r[o]);return i}(t);return new Ke(s)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return t=this.binaryString,btoa(t);var t}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ce(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Ke.EMPTY_BYTE_STRING=new Ke("");const IE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function en(n){if(we(!!n),typeof n=="string"){let t=0;const s=IE.exec(n);if(we(!!s),s[1]){let i=s[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ne(n.seconds),nanos:Ne(n.nanos)}}function Ne(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Zn(n){return typeof n=="string"?Ke.fromBase64String(n):Ke.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ld(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function ud(n){const t=n.mapValue.fields.__previous_value__;return ld(t)?ud(t):t}function Js(n){const t=en(n.mapValue.fields.__local_write_time__.timestampValue);return new Ye(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(t,s,r,i,o,a,c,l){this.databaseId=t,this.appId=s,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.useFetchStreams=l}}class es{constructor(t,s){this.projectId=t,this.database=s||"(default)"}static empty(){return new es("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof es&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ms(n){return n==null}function ni(n){return n===0&&1/n==-1/0}function NE(n){return typeof n=="number"&&Number.isInteger(n)&&!ni(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(t){this.path=t}static fromPath(t){return new j(Ce.fromString(t))}static fromName(t){return new j(Ce.fromString(t).popFirst(5))}static empty(){return new j(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ce.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,s){return Ce.comparator(t.path,s.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new j(new Ce(t.slice()))}}function bn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ld(n)?4:RE(n)?9:10:G()}function Dt(n,t){if(n===t)return!0;const s=bn(n);if(s!==bn(t))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Js(n).isEqual(Js(t));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const o=en(r.timestampValue),a=en(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,i){return Zn(r.bytesValue).isEqual(Zn(i.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,i){return Ne(r.geoPointValue.latitude)===Ne(i.geoPointValue.latitude)&&Ne(r.geoPointValue.longitude)===Ne(i.geoPointValue.longitude)}(n,t);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Ne(r.integerValue)===Ne(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const o=Ne(r.doubleValue),a=Ne(i.doubleValue);return o===a?ni(o)===ni(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return Jn(n.arrayValue.values||[],t.arrayValue.values||[],Dt);case 10:return function(r,i){const o=r.mapValue.fields||{},a=i.mapValue.fields||{};if(eu(o)!==eu(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Dt(o[c],a[c])))return!1;return!0}(n,t);default:return G()}}function Zs(n,t){return(n.values||[]).find(s=>Dt(s,t))!==void 0}function ts(n,t){if(n===t)return 0;const s=bn(n),r=bn(t);if(s!==r)return ce(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return ce(n.booleanValue,t.booleanValue);case 2:return function(i,o){const a=Ne(i.integerValue||i.doubleValue),c=Ne(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,t);case 3:return tu(n.timestampValue,t.timestampValue);case 4:return tu(Js(n),Js(t));case 5:return ce(n.stringValue,t.stringValue);case 6:return function(i,o){const a=Zn(i),c=Zn(o);return a.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(i,o){const a=i.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){const u=ce(a[l],c[l]);if(u!==0)return u}return ce(a.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(i,o){const a=ce(Ne(i.latitude),Ne(o.latitude));return a!==0?a:ce(Ne(i.longitude),Ne(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(i,o){const a=i.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){const u=ts(a[l],c[l]);if(u)return u}return ce(a.length,c.length)}(n.arrayValue,t.arrayValue);case 10:return function(i,o){const a=i.fields||{},c=Object.keys(a),l=o.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){const f=ce(c[h],u[h]);if(f!==0)return f;const p=ts(a[c[h]],l[u[h]]);if(p!==0)return p}return ce(c.length,u.length)}(n.mapValue,t.mapValue);default:throw G()}}function tu(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return ce(n,t);const s=en(n),r=en(t),i=ce(s.seconds,r.seconds);return i!==0?i:ce(s.nanos,r.nanos)}function Hn(n){return ra(n)}function ra(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=en(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Zn(n.bytesValue).toBase64():"referenceValue"in n?(s=n.referenceValue,j.fromName(s).toString()):"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(r){let i="[",o=!0;for(const a of r.values||[])o?o=!1:i+=",",i+=ra(a);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let o="{",a=!0;for(const c of i)a?a=!1:o+=",",o+=`${c}:${ra(r.fields[c])}`;return o+"}"}(n.mapValue):G();var t,s}function ia(n){return!!n&&"integerValue"in n}function mc(n){return!!n&&"arrayValue"in n}function nu(n){return!!n&&"nullValue"in n}function su(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Or(n){return!!n&&"mapValue"in n}function Ms(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return gs(n.mapValue.fields,(s,r)=>t.mapValue.fields[s]=Ms(r)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let s=0;s<(n.arrayValue.values||[]).length;++s)t.arrayValue.values[s]=Ms(n.arrayValue.values[s]);return t}return Object.assign({},n)}function RE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(t){this.value=t}static empty(){return new Et({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let s=this.value;for(let r=0;r<t.length-1;++r)if(s=(s.mapValue.fields||{})[t.get(r)],!Or(s))return null;return s=(s.mapValue.fields||{})[t.lastSegment()],s||null}}set(t,s){this.getFieldsMap(t.popLast())[t.lastSegment()]=Ms(s)}setAll(t){let s=rt.emptyPath(),r={},i=[];t.forEach((a,c)=>{if(!s.isImmediateParentOf(c)){const l=this.getFieldsMap(s);this.applyChanges(l,r,i),r={},i=[],s=c.popLast()}a?r[c.lastSegment()]=Ms(a):i.push(c.lastSegment())});const o=this.getFieldsMap(s);this.applyChanges(o,r,i)}delete(t){const s=this.field(t.popLast());Or(s)&&s.mapValue.fields&&delete s.mapValue.fields[t.lastSegment()]}isEqual(t){return Dt(this.value,t.value)}getFieldsMap(t){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=s.mapValue.fields[t.get(r)];Or(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},s.mapValue.fields[t.get(r)]=i),s=i}return s.mapValue.fields}applyChanges(t,s,r){gs(s,(i,o)=>t[i]=o);for(const i of r)delete t[i]}clone(){return new Et(Ms(this.value))}}function hd(n){const t=[];return gs(n.fields,(s,r)=>{const i=new rt([s]);if(Or(r)){const o=hd(r.mapValue).fields;if(o.length===0)t.push(i);else for(const a of o)t.push(i.child(a))}else t.push(i)}),new sa(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t,s,r,i,o,a){this.key=t,this.documentType=s,this.version=r,this.readTime=i,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ge(t,0,ee.min(),ee.min(),Et.empty(),0)}static newFoundDocument(t,s,r){return new Ge(t,1,s,ee.min(),r,0)}static newNoDocument(t,s){return new Ge(t,2,s,ee.min(),Et.empty(),0)}static newUnknownDocument(t,s){return new Ge(t,3,s,ee.min(),Et.empty(),2)}convertToFoundDocument(t,s){return this.version=t,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Et.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Et.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ge&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function xE(n,t){const s=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ye(s+1,0):new Ye(s,r));return new ns(i,j.empty(),t)}function DE(n){return new ns(n.readTime,n.key,-1)}class ns{constructor(t,s,r){this.readTime=t,this.documentKey=s,this.largestBatchId=r}static min(){return new ns(ee.min(),j.empty(),-1)}static max(){return new ns(ee.max(),j.empty(),-1)}}function kE(n,t){let s=n.readTime.compareTo(t.readTime);return s!==0?s:(s=j.comparator(n.documentKey,t.documentKey),s!==0?s:ce(n.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(t,s=null,r=[],i=[],o=null,a=null,c=null){this.path=t,this.collectionGroup=s,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=c,this.P=null}}function ru(n,t=null,s=[],r=[],i=null,o=null,a=null){return new OE(n,t,s,r,i,o,a)}function yc(n){const t=Y(n);if(t.P===null){let s=t.path.canonicalString();t.collectionGroup!==null&&(s+="|cg:"+t.collectionGroup),s+="|f:",s+=t.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Hn(i.value);var i}).join(","),s+="|ob:",s+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ms(t.limit)||(s+="|l:",s+=t.limit),t.startAt&&(s+="|lb:",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(r=>Hn(r)).join(",")),t.endAt&&(s+="|ub:",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(r=>Hn(r)).join(",")),t.P=s}return t.P}function PE(n){let t=n.path.canonicalString();return n.collectionGroup!==null&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(s=>{return`${(r=s).field.canonicalString()} ${r.op} ${Hn(r.value)}`;var r}).join(", ")}]`),ms(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(s=>function(r){return`${r.field.canonicalString()} (${r.dir})`}(s)).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(s=>Hn(s)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(s=>Hn(s)).join(",")),`Target(${t})`}function vc(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!jE(n.orderBy[i],t.orderBy[i]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if(s=n.filters[i],r=t.filters[i],s.op!==r.op||!s.field.isEqual(r.field)||!Dt(s.value,r.value))return!1;var s,r;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!ou(n.startAt,t.startAt)&&ou(n.endAt,t.endAt)}function oa(n){return j.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}class it extends class{}{constructor(t,s,r){super(),this.field=t,this.op=s,this.value=r}static create(t,s,r){return t.isKeyField()?s==="in"||s==="not-in"?this.V(t,s,r):new ME(t,s,r):s==="array-contains"?new BE(t,r):s==="in"?new VE(t,r):s==="not-in"?new UE(t,r):s==="array-contains-any"?new $E(t,r):new it(t,s,r)}static V(t,s,r){return s==="in"?new LE(t,r):new FE(t,r)}matches(t){const s=t.data.field(this.field);return this.op==="!="?s!==null&&this.v(ts(s,this.value)):s!==null&&bn(this.value)===bn(s)&&this.v(ts(s,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return G()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class ME extends it{constructor(t,s,r){super(t,s,r),this.key=j.fromName(r.referenceValue)}matches(t){const s=j.comparator(t.key,this.key);return this.v(s)}}class LE extends it{constructor(t,s){super(t,"in",s),this.keys=fd("in",s)}matches(t){return this.keys.some(s=>s.isEqual(t.key))}}class FE extends it{constructor(t,s){super(t,"not-in",s),this.keys=fd("not-in",s)}matches(t){return!this.keys.some(s=>s.isEqual(t.key))}}function fd(n,t){var s;return(((s=t.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(r=>j.fromName(r.referenceValue))}class BE extends it{constructor(t,s){super(t,"array-contains",s)}matches(t){const s=t.data.field(this.field);return mc(s)&&Zs(s.arrayValue,this.value)}}class VE extends it{constructor(t,s){super(t,"in",s)}matches(t){const s=t.data.field(this.field);return s!==null&&Zs(this.value.arrayValue,s)}}class UE extends it{constructor(t,s){super(t,"not-in",s)}matches(t){if(Zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=t.data.field(this.field);return s!==null&&!Zs(this.value.arrayValue,s)}}class $E extends it{constructor(t,s){super(t,"array-contains-any",s)}matches(t){const s=t.data.field(this.field);return!(!mc(s)||!s.arrayValue.values)&&s.arrayValue.values.some(r=>Zs(this.value.arrayValue,r))}}class si{constructor(t,s){this.position=t,this.inclusive=s}}class Ls{constructor(t,s="asc"){this.field=t,this.dir=s}}function jE(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function iu(n,t,s){let r=0;for(let i=0;i<n.position.length;i++){const o=t[i],a=n.position[i];if(o.field.isKeyField()?r=j.comparator(j.fromName(a.referenceValue),s.key):r=ts(a,s.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ou(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let s=0;s<n.position.length;s++)if(!Dt(n.position[s],t.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t,s=null,r=[],i=[],o=null,a="F",c=null,l=null){this.path=t,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=c,this.endAt=l,this.D=null,this.C=null,this.startAt,this.endAt}}function HE(n,t,s,r,i,o,a,c){return new Bi(n,t,s,r,i,o,a,c)}function dd(n){return new Bi(n)}function Pr(n){return!ms(n.limit)&&n.limitType==="F"}function ri(n){return!ms(n.limit)&&n.limitType==="L"}function qE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function KE(n){for(const t of n.filters)if(t.S())return t.field;return null}function zE(n){return n.collectionGroup!==null}function er(n){const t=Y(n);if(t.D===null){t.D=[];const s=KE(t),r=qE(t);if(s!==null&&r===null)s.isKeyField()||t.D.push(new Ls(s)),t.D.push(new Ls(rt.keyField(),"asc"));else{let i=!1;for(const o of t.explicitOrderBy)t.D.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Ls(rt.keyField(),o))}}}return t.D}function Tn(n){const t=Y(n);if(!t.C)if(t.limitType==="F")t.C=ru(t.path,t.collectionGroup,er(t),t.filters,t.limit,t.startAt,t.endAt);else{const s=[];for(const o of er(t)){const a=o.dir==="desc"?"asc":"desc";s.push(new Ls(o.field,a))}const r=t.endAt?new si(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new si(t.startAt.position,!t.startAt.inclusive):null;t.C=ru(t.path,t.collectionGroup,s,t.filters,t.limit,r,i)}return t.C}function GE(n,t,s){return new Bi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,s,n.startAt,n.endAt)}function Vi(n,t){return vc(Tn(n),Tn(t))&&n.limitType===t.limitType}function pd(n){return`${yc(Tn(n))}|lt:${n.limitType}`}function aa(n){return`Query(target=${PE(Tn(n))}; limitType=${n.limitType})`}function wc(n,t){return t.isFoundDocument()&&function(s,r){const i=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):j.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(n,t)&&function(s,r){for(const i of s.explicitOrderBy)if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(n,t)&&function(s,r){for(const i of s.filters)if(!i.matches(r))return!1;return!0}(n,t)&&function(s,r){return!(s.startAt&&!function(i,o,a){const c=iu(i,o,a);return i.inclusive?c<=0:c<0}(s.startAt,er(s),r)||s.endAt&&!function(i,o,a){const c=iu(i,o,a);return i.inclusive?c>=0:c>0}(s.endAt,er(s),r))}(n,t)}function WE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gd(n){return(t,s)=>{let r=!1;for(const i of er(n)){const o=YE(i,t,s);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function YE(n,t,s){const r=n.field.isKeyField()?j.comparator(t.key,s.key):function(i,o,a){const c=o.data.field(i),l=a.data.field(i);return c!==null&&l!==null?ts(c,l):G()}(n.field,t,s);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ni(t)?"-0":t}}function yd(n){return{integerValue:""+n}}function XE(n,t){return NE(t)?yd(t):md(n,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(){this._=void 0}}function QE(n,t,s){return n instanceof ii?function(r,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(o.fields.__previous_value__=i),{mapValue:o}}(s,t):n instanceof tr?wd(n,t):n instanceof nr?Ed(n,t):function(r,i){const o=vd(r,i),a=au(o)+au(r.k);return ia(o)&&ia(r.k)?yd(a):md(r.M,a)}(n,t)}function JE(n,t,s){return n instanceof tr?wd(n,t):n instanceof nr?Ed(n,t):s}function vd(n,t){return n instanceof oi?ia(s=t)||function(r){return!!r&&"doubleValue"in r}(s)?t:{integerValue:0}:null;var s}class ii extends Ui{}class tr extends Ui{constructor(t){super(),this.elements=t}}function wd(n,t){const s=_d(t);for(const r of n.elements)s.some(i=>Dt(i,r))||s.push(r);return{arrayValue:{values:s}}}class nr extends Ui{constructor(t){super(),this.elements=t}}function Ed(n,t){let s=_d(t);for(const r of n.elements)s=s.filter(i=>!Dt(i,r));return{arrayValue:{values:s}}}class oi extends Ui{constructor(t,s){super(),this.M=t,this.k=s}}function au(n){return Ne(n.integerValue||n.doubleValue)}function _d(n){return mc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ZE(n,t){return n.field.isEqual(t.field)&&function(s,r){return s instanceof tr&&r instanceof tr||s instanceof nr&&r instanceof nr?Jn(s.elements,r.elements,Dt):s instanceof oi&&r instanceof oi?Dt(s.k,r.k):s instanceof ii&&r instanceof ii}(n.transform,t.transform)}class e0{constructor(t,s){this.version=t,this.transformResults=s}}class qn{constructor(t,s){this.updateTime=t,this.exists=s}static none(){return new qn}static exists(t){return new qn(void 0,t)}static updateTime(t){return new qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Mr(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}class $i{}function t0(n,t,s){n instanceof ji?function(r,i,o){const a=r.value.clone(),c=uu(r.fieldTransforms,i,o.transformResults);a.setAll(c),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,s):n instanceof fr?function(r,i,o){if(!Mr(r.precondition,i))return void i.convertToUnknownDocument(o.version);const a=uu(r.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(bd(r)),c.setAll(a),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,s):function(r,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,s)}function ca(n,t,s){n instanceof ji?function(r,i,o){if(!Mr(r.precondition,i))return;const a=r.value.clone(),c=hu(r.fieldTransforms,o,i);a.setAll(c),i.convertToFoundDocument(lu(i),a).setHasLocalMutations()}(n,t,s):n instanceof fr?function(r,i,o){if(!Mr(r.precondition,i))return;const a=hu(r.fieldTransforms,o,i),c=i.data;c.setAll(bd(r)),c.setAll(a),i.convertToFoundDocument(lu(i),c).setHasLocalMutations()}(n,t,s):function(r,i){Mr(r.precondition,i)&&i.convertToNoDocument(ee.min())}(n,t)}function n0(n,t){let s=null;for(const r of n.fieldTransforms){const i=t.data.field(r.field),o=vd(r.transform,i||null);o!=null&&(s==null&&(s=Et.empty()),s.set(r.field,o))}return s||null}function cu(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&Jn(s,r,(i,o)=>ZE(i,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}function lu(n){return n.isFoundDocument()?n.version:ee.min()}class ji extends $i{constructor(t,s,r,i=[]){super(),this.key=t,this.value=s,this.precondition=r,this.fieldTransforms=i,this.type=0}}class fr extends $i{constructor(t,s,r,i,o=[]){super(),this.key=t,this.data=s,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}}function bd(n){const t=new Map;return n.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const r=n.data.field(s);t.set(s,r)}}),t}function uu(n,t,s){const r=new Map;we(n.length===s.length);for(let i=0;i<s.length;i++){const o=n[i],a=o.transform,c=t.data.field(o.field);r.set(o.field,JE(a,c,s[i]))}return r}function hu(n,t,s){const r=new Map;for(const i of n){const o=i.transform,a=s.data.field(i.field);r.set(i.field,QE(o,a,t))}return r}class s0 extends $i{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=2,this.fieldTransforms=[]}}class r0 extends $i{constructor(t,s){super(),this.key=t,this.precondition=s,this.type=3,this.fieldTransforms=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(t){this.count=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ae,ne;function o0(n){switch(n){default:return G();case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0}}function Td(n){if(n===void 0)return Zt("GRPC error has no .code"),T.UNKNOWN;switch(n){case Ae.OK:return T.OK;case Ae.CANCELLED:return T.CANCELLED;case Ae.UNKNOWN:return T.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return T.INTERNAL;case Ae.UNAVAILABLE:return T.UNAVAILABLE;case Ae.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Ae.NOT_FOUND:return T.NOT_FOUND;case Ae.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Ae.ABORTED:return T.ABORTED;case Ae.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Ae.DATA_LOSS:return T.DATA_LOSS;default:return G()}}(ne=Ae||(Ae={}))[ne.OK=0]="OK",ne[ne.CANCELLED=1]="CANCELLED",ne[ne.UNKNOWN=2]="UNKNOWN",ne[ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ne[ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ne[ne.NOT_FOUND=5]="NOT_FOUND",ne[ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",ne[ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",ne[ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",ne[ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ne[ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ne[ne.ABORTED=10]="ABORTED",ne[ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",ne[ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",ne[ne.INTERNAL=13]="INTERNAL",ne[ne.UNAVAILABLE=14]="UNAVAILABLE",ne[ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(t,s){this.mapKeyFn=t,this.equalsFn=s,this.inner={},this.innerSize=0}get(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,t))return o}}has(t){return this.get(t)!==void 0}set(t,s){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,s]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return void(i[o]=[t,s]);i.push([t,s]),this.innerSize++}delete(t){const s=this.mapKeyFn(t),r=this.inner[s];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[s]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){gs(this.inner,(s,r)=>{for(const[i,o]of r)t(i,o)})}isEmpty(){return cd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,s){this.comparator=t,this.root=s||Ue.EMPTY}insert(t,s){return new Be(this.comparator,this.root.insert(t,s,this.comparator).copy(null,null,Ue.BLACK,null,null))}remove(t){return new Be(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ue.BLACK,null,null))}get(t){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(t,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(t){let s=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return s+r.left.size;i<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((s,r)=>(t(s,r),!1))}toString(){const t=[];return this.inorderTraversal((s,r)=>(t.push(`${s}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Nr(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Nr(this.root,t,this.comparator,!1)}getReverseIterator(){return new Nr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Nr(this.root,t,this.comparator,!0)}}class Nr{constructor(t,s,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!t.isEmpty();)if(o=s?r(t.key,s):1,s&&i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(o===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const s={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ue{constructor(t,s,r,i,o){this.key=t,this.value=s,this.color=r!=null?r:Ue.RED,this.left=i!=null?i:Ue.EMPTY,this.right=o!=null?o:Ue.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,s,r,i,o){return new Ue(t!=null?t:this.key,s!=null?s:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,s,r){let i=this;const o=r(t,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(t,s,r),null):o===0?i.copy(null,s,null,null,null):i.copy(null,null,null,null,i.right.insert(t,s,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ue.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,s){let r,i=this;if(s(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,s),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),s(t,i.key)===0){if(i.right.isEmpty())return Ue.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,s))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ue.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ue.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,s)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const t=this.left.check();if(t!==this.right.check())throw G();return t+(this.isRed()?0:1)}}Ue.EMPTY=null,Ue.RED=!0,Ue.BLACK=!1;Ue.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(n,t,s,r,i){return this}insert(n,t,s){return new Ue(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.comparator=t,this.data=new Be(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((s,r)=>(t(s),!1))}forEachInRange(t,s){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;s(i.key)}}forEachWhile(t,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const s=this.data.getIteratorFrom(t);return s.hasNext()?s.getNext().key:null}getIterator(){return new fu(this.data.getIterator())}getIteratorFrom(t){return new fu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let s=this;return s.size<t.size&&(s=t,t=this),t.forEach(r=>{s=s.add(r)}),s}isEqual(t){if(!(t instanceof qe)||this.size!==t.size)return!1;const s=this.data.getIterator(),r=t.data.getIterator();for(;s.hasNext();){const i=s.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(s=>{t.push(s)}),t}toString(){const t=[];return this.forEach(s=>t.push(s)),"SortedSet("+t.toString()+")"}copy(t){const s=new qe(this.comparator);return s.data=t,s}}class fu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new Be(j.comparator);function Cn(){return a0}const c0=new Be(j.comparator);function la(){return c0}function go(){return new ys(n=>n.toString(),(n,t)=>n.isEqual(t))}const l0=new Be(j.comparator),u0=new qe(j.comparator);function _e(...n){let t=u0;for(const s of n)t=t.add(s);return t}const h0=new qe(ce);function Cd(){return h0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,s,r,i,o){this.snapshotVersion=t,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(t,s){const r=new Map;return r.set(t,dr.createSynthesizedTargetChangeForCurrentChange(t,s)),new Hi(ee.min(),r,Cd(),Cn(),_e())}}class dr{constructor(t,s,r,i,o){this.resumeToken=t,this.current=s,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(t,s){return new dr(Ke.EMPTY_BYTE_STRING,s,_e(),_e(),_e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,s,r,i){this.O=t,this.removedTargetIds=s,this.key=r,this.F=i}}class Sd{constructor(t,s){this.targetId=t,this.$=s}}class Id{constructor(t,s,r=Ke.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=s,this.resumeToken=r,this.cause=i}}class du{constructor(){this.B=0,this.L=gu(),this.U=Ke.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return this.B!==0}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=_e(),s=_e(),r=_e();return this.L.forEach((i,o)=>{switch(o){case 0:t=t.add(i);break;case 2:s=s.add(i);break;case 1:r=r.add(i);break;default:G()}}),new dr(this.U,this.q,t,s,r)}J(){this.K=!1,this.L=gu()}Y(t,s){this.K=!0,this.L=this.L.insert(t,s)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class f0{constructor(t){this.nt=t,this.st=new Map,this.it=Cn(),this.rt=pu(),this.ot=new qe(ce)}ut(t){for(const s of t.O)t.F&&t.F.isFoundDocument()?this.at(s,t.F):this.ct(s,t.key,t.F);for(const s of t.removedTargetIds)this.ct(s,t.key,t.F)}ht(t){this.forEachTarget(t,s=>{const r=this.lt(s);switch(t.state){case 0:this.ft(s)&&r.W(t.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(t.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(s);break;case 3:this.ft(s)&&(r.et(),r.W(t.resumeToken));break;case 4:this.ft(s)&&(this.dt(s),r.W(t.resumeToken));break;default:G()}})}forEachTarget(t,s){t.targetIds.length>0?t.targetIds.forEach(s):this.st.forEach((r,i)=>{this.ft(i)&&s(i)})}_t(t){const s=t.targetId,r=t.$.count,i=this.wt(s);if(i){const o=i.target;if(oa(o))if(r===0){const a=new j(o.path);this.ct(s,a,Ge.newNoDocument(a,ee.min()))}else we(r===1);else this.gt(s)!==r&&(this.dt(s),this.ot=this.ot.add(s))}}yt(t){const s=new Map;this.st.forEach((o,a)=>{const c=this.wt(a);if(c){if(o.current&&oa(c.target)){const l=new j(c.target.path);this.it.get(l)!==null||this.It(a,l)||this.ct(a,l,Ge.newNoDocument(l,t))}o.j&&(s.set(a,o.H()),o.J())}});let r=_e();this.rt.forEach((o,a)=>{let c=!0;a.forEachWhile(l=>{const u=this.wt(l);return!u||u.purpose===2||(c=!1,!1)}),c&&(r=r.add(o))}),this.it.forEach((o,a)=>a.setReadTime(t));const i=new Hi(t,s,this.ot,this.it,r);return this.it=Cn(),this.rt=pu(),this.ot=new qe(ce),i}at(t,s){if(!this.ft(t))return;const r=this.It(t,s.key)?2:0;this.lt(t).Y(s.key,r),this.it=this.it.insert(s.key,s),this.rt=this.rt.insert(s.key,this.Tt(s.key).add(t))}ct(t,s,r){if(!this.ft(t))return;const i=this.lt(t);this.It(t,s)?i.Y(s,1):i.X(s),this.rt=this.rt.insert(s,this.Tt(s).delete(t)),r&&(this.it=this.it.insert(s,r))}removeTarget(t){this.st.delete(t)}gt(t){const s=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+s.addedDocuments.size-s.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let s=this.st.get(t);return s||(s=new du,this.st.set(t,s)),s}Tt(t){let s=this.rt.get(t);return s||(s=new qe(ce),this.rt=this.rt.insert(t,s)),s}ft(t){const s=this.wt(t)!==null;return s||F("WatchChangeAggregator","Detected inactive target",t),s}wt(t){const s=this.st.get(t);return s&&s.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new du),this.nt.getRemoteKeysForTarget(t).forEach(s=>{this.ct(t,s,null)})}It(t,s){return this.nt.getRemoteKeysForTarget(t).has(s)}}function pu(){return new Be(j.comparator)}function gu(){return new Be(j.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),p0=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))();class g0{constructor(t,s){this.databaseId=t,this.N=s}}function ai(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ad(n,t){return n.N?t.toBase64():t.toUint8Array()}function m0(n,t){return ai(n,t.toTimestamp())}function Bt(n){return we(!!n),ee.fromTimestamp(function(t){const s=en(t);return new Ye(s.seconds,s.nanos)}(n))}function Ec(n,t){return function(s){return new Ce(["projects",s.projectId,"databases",s.database])}(n).child("documents").child(t).canonicalString()}function Nd(n){const t=Ce.fromString(n);return we(Dd(t)),t}function ua(n,t){return Ec(n.databaseId,t.path)}function mo(n,t){const s=Nd(t);if(s.get(1)!==n.databaseId.projectId)throw new q(T.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+n.databaseId.projectId);if(s.get(3)!==n.databaseId.database)throw new q(T.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+n.databaseId.database);return new j(Rd(s))}function ha(n,t){return Ec(n.databaseId,t)}function y0(n){const t=Nd(n);return t.length===4?Ce.emptyPath():Rd(t)}function fa(n){return new Ce(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Rd(n){return we(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function mu(n,t,s){return{name:ua(n,t),fields:s.value.mapValue.fields}}function v0(n,t){let s;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:G()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(l,u){return l.N?(we(u===void 0||typeof u=="string"),Ke.fromBase64String(u||"")):(we(u===void 0||u instanceof Uint8Array),Ke.fromUint8Array(u||new Uint8Array))}(n,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(l){const u=l.code===void 0?T.UNKNOWN:Td(l.code);return new q(u,l.message||"")}(a);s=new Id(r,i,o,c||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=mo(n,r.document.name),o=Bt(r.document.updateTime),a=new Et({mapValue:{fields:r.document.fields}}),c=Ge.newFoundDocument(i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];s=new Lr(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=mo(n,r.document),o=r.readTime?Bt(r.readTime):ee.min(),a=Ge.newNoDocument(i,o),c=r.removedTargetIds||[];s=new Lr([],c,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=mo(n,r.document),o=r.removedTargetIds||[];s=new Lr([],o,i,null)}else{if(!("filter"in t))return G();{t.filter;const r=t.filter;r.targetId;const i=r.count||0,o=new i0(i),a=r.targetId;s=new Sd(a,o)}}return s}function w0(n,t){let s;if(t instanceof ji)s={update:mu(n,t.key,t.value)};else if(t instanceof s0)s={delete:ua(n,t.key)};else if(t instanceof fr)s={update:mu(n,t.key,t.data),updateMask:R0(t.fieldMask)};else{if(!(t instanceof r0))return G();s={verify:ua(n,t.key)}}return t.fieldTransforms.length>0&&(s.updateTransforms=t.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof ii)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof tr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof nr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oi)return{fieldPath:o.field.canonicalString(),increment:a.k};throw G()}(0,r))),t.precondition.isNone||(s.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:m0(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(n,t.precondition)),s}function E0(n,t){return n&&n.length>0?(we(t!==void 0),n.map(s=>function(r,i){let o=r.updateTime?Bt(r.updateTime):Bt(i);return o.isEqual(ee.min())&&(o=Bt(i)),new e0(o,r.transformResults||[])}(s,t))):[]}function _0(n,t){return{documents:[ha(n,t.path)]}}function b0(n,t){const s={structuredQuery:{}},r=t.path;t.collectionGroup!==null?(s.parent=ha(n,r),s.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s.parent=ha(n,r.popLast()),s.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(l){if(l.length===0)return;const u=l.map(h=>function(f){if(f.op==="=="){if(su(f.value))return{unaryFilter:{field:On(f.field),op:"IS_NAN"}};if(nu(f.value))return{unaryFilter:{field:On(f.field),op:"IS_NULL"}}}else if(f.op==="!="){if(su(f.value))return{unaryFilter:{field:On(f.field),op:"IS_NOT_NAN"}};if(nu(f.value))return{unaryFilter:{field:On(f.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:On(f.field),op:I0(f.op),value:f.value}}}(h));return u.length===1?u[0]:{compositeFilter:{op:"AND",filters:u}}}(t.filters);i&&(s.structuredQuery.where=i);const o=function(l){if(l.length!==0)return l.map(u=>function(h){return{field:On(h.field),direction:S0(h.dir)}}(u))}(t.orderBy);o&&(s.structuredQuery.orderBy=o);const a=function(l,u){return l.N||ms(u)?u:{value:u}}(n,t.limit);var c;return a!==null&&(s.structuredQuery.limit=a),t.startAt&&(s.structuredQuery.startAt={before:(c=t.startAt).inclusive,values:c.position}),t.endAt&&(s.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),s}function T0(n){let t=y0(n.parent);const s=n.structuredQuery,r=s.from?s.from.length:0;let i=null;if(r>0){we(r===1);const h=s.from[0];h.allDescendants?i=h.collectionId:t=t.child(h.collectionId)}let o=[];s.where&&(o=xd(s.where));let a=[];s.orderBy&&(a=s.orderBy.map(h=>function(f){return new Ls(Vn(f.field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(h)));let c=null;s.limit&&(c=function(h){let f;return f=typeof h=="object"?h.value:h,ms(f)?null:f}(s.limit));let l=null;s.startAt&&(l=function(h){const f=!!h.before,p=h.values||[];return new si(p,f)}(s.startAt));let u=null;return s.endAt&&(u=function(h){const f=!h.before,p=h.values||[];return new si(p,f)}(s.endAt)),HE(t,i,a,o,c,"F",l,u)}function C0(n,t){const s=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return G()}}(0,t.purpose);return s==null?null:{"goog-listen-tags":s}}function xd(n){return n?n.unaryFilter!==void 0?[N0(n)]:n.fieldFilter!==void 0?[A0(n)]:n.compositeFilter!==void 0?n.compositeFilter.filters.map(t=>xd(t)).reduce((t,s)=>t.concat(s)):G():[]}function S0(n){return d0[n]}function I0(n){return p0[n]}function On(n){return{fieldPath:n.canonicalString()}}function Vn(n){return rt.fromServerFormat(n.fieldPath)}function A0(n){return it.create(Vn(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}function N0(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Vn(n.unaryFilter.field);return it.create(t,"==",{doubleValue:NaN});case"IS_NULL":const s=Vn(n.unaryFilter.field);return it.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vn(n.unaryFilter.field);return it.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vn(n.unaryFilter.field);return it.create(i,"!=",{nullValue:"NULL_VALUE"});default:return G()}}function R0(n){const t=[];return n.fields.forEach(s=>t.push(s.canonicalString())),{fieldPaths:t}}function Dd(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(t){return this.next(void 0,t)}next(t,s){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(t,this.result):new A((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(t,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(s,o).next(r,i)}})}toPromise(){return new Promise((t,s)=>{this.next(t,s)})}wrapUserFunction(t){try{const s=t();return s instanceof A?s:A.resolve(s)}catch(s){return A.reject(s)}}wrapSuccess(t,s){return t?this.wrapUserFunction(()=>t(s)):A.resolve(s)}wrapFailure(t,s){return t?this.wrapUserFunction(()=>t(s)):A.reject(s)}static resolve(t){return new A((s,r)=>{s(t)})}static reject(t){return new A((s,r)=>{r(t)})}static waitFor(t){return new A((s,r)=>{let i=0,o=0,a=!1;t.forEach(c=>{++i,c.next(()=>{++o,a&&o===i&&s()},l=>r(l))}),a=!0,o===i&&s()})}static or(t){let s=A.resolve(!1);for(const r of t)s=s.next(i=>i?A.resolve(i):r());return s}static forEach(t,s){const r=[];return t.forEach((i,o)=>{r.push(s.call(this,i,o))}),this.waitFor(r)}}function pr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(t,s,r,i){this.batchId=t,this.localWriteTime=s,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,s){const r=s.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(t.key)&&t0(o,t,r[i])}}applyToLocalView(t){for(const s of this.baseMutations)s.key.isEqual(t.key)&&ca(s,t,this.localWriteTime);for(const s of this.mutations)s.key.isEqual(t.key)&&ca(s,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(s=>{const r=t.get(s.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ee.min())})}keys(){return this.mutations.reduce((t,s)=>t.add(s.key),_e())}isEqual(t){return this.batchId===t.batchId&&Jn(this.mutations,t.mutations,(s,r)=>cu(s,r))&&Jn(this.baseMutations,t.baseMutations,(s,r)=>cu(s,r))}}class _c{constructor(t,s,r,i){this.batch=t,this.commitVersion=s,this.mutationResults=r,this.docVersions=i}static from(t,s,r){we(t.mutations.length===r.length);let i=l0;const o=t.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new _c(t,s,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(t,s){this.largestBatchId=t,this.mutation=s}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,s,r,i,o=ee.min(),a=ee.min(),c=Ke.EMPTY_BYTE_STRING){this.target=t,this.targetId=s,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c}withSequenceNumber(t){return new mn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,s){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(t){this.Jt=t}}function M0(n){const t=T0({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?GE(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.qe=new F0}addToCollectionParentIndex(t,s){return this.qe.add(s),A.resolve()}getCollectionParents(t,s){return A.resolve(this.qe.getEntries(s))}addFieldIndex(t,s){return A.resolve()}deleteFieldIndex(t,s){return A.resolve()}getDocumentsMatchingTarget(t,s){return A.resolve(null)}getFieldIndex(t,s){return A.resolve(null)}getFieldIndexes(t,s){return A.resolve([])}getNextCollectionGroupToUpdate(t){return A.resolve(null)}updateCollectionGroup(t,s,r){return A.resolve()}updateIndexEntries(t,s){return A.resolve()}}class F0{constructor(){this.index={}}add(t){const s=t.lastSegment(),r=t.popLast(),i=this.index[s]||new qe(Ce.comparator),o=!i.has(r);return this.index[s]=i.add(r),o}has(t){const s=t.lastSegment(),r=t.popLast(),i=this.index[s];return i&&i.has(r)}getEntries(t){return(this.index[t]||new qe(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new ss(0)}static yn(){return new ss(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gr(n){if(n.code!==T.FAILED_PRECONDITION||n.message!==x0)throw n;F("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.changes=new ys(t=>t.toString(),(t,s)=>t.isEqual(s)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,s){this.assertNotApplied(),this.changes.set(t,Ge.newInvalidDocument(t).setReadTime(s))}getEntry(t,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?A.resolve(r):this.getFromCache(t,s)}getEntries(t,s){return this.getAllFromCache(t,s)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(t,s,r){this.ds=t,this.Bs=s,this.indexManager=r}Ls(t,s){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,s).next(r=>this.Us(t,s,r))}Us(t,s,r){return this.ds.getEntry(t,s).next(i=>{for(const o of r)o.applyToLocalView(i);return i})}qs(t,s){t.forEach((r,i)=>{for(const o of s)o.applyToLocalView(i)})}Ks(t,s){return this.ds.getEntries(t,s).next(r=>this.Gs(t,r).next(()=>r))}Gs(t,s){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,s).next(r=>this.qs(s,r))}Qs(t,s,r){return function(i){return j.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(s)?this.js(t,s.path):zE(s)?this.Ws(t,s,r):this.zs(t,s,r)}js(t,s){return this.Ls(t,new j(s)).next(r=>{let i=la();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(t,s,r){const i=s.collectionGroup;let o=la();return this.indexManager.getCollectionParents(t,i).next(a=>A.forEach(a,c=>{const l=function(u,h){return new Bi(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(s,c.child(i));return this.zs(t,l,r).next(u=>{u.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}zs(t,s,r){let i;return this.ds.getAllFromCollection(t,s.path,r).next(o=>(i=o,this.Bs.getAllMutationBatchesAffectingQuery(t,s))).next(o=>{for(const a of o)for(const c of a.mutations){const l=c.key;let u=i.get(l);u==null&&(u=Ge.newInvalidDocument(l),i=i.insert(l,u)),ca(c,u,a.localWriteTime),u.isFoundDocument()||(i=i.remove(l))}}).next(()=>(i.forEach((o,a)=>{wc(s,a)||(i=i.remove(o))}),i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(t,s,r,i){this.targetId=t,this.fromCache=s,this.Hs=r,this.Js=i}static Ys(t,s){let r=_e(),i=_e();for(const o of s.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new bc(t,s.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{Xs(t){this.Zs=t}Qs(t,s,r,i){return function(o){return o.filters.length===0&&o.limit===null&&o.startAt==null&&o.endAt==null&&(o.explicitOrderBy.length===0||o.explicitOrderBy.length===1&&o.explicitOrderBy[0].field.isKeyField())}(s)||r.isEqual(ee.min())?this.ti(t,s):this.Zs.Ks(t,i).next(o=>{const a=this.ei(s,o);return(Pr(s)||ri(s))&&this.ni(s.limitType,a,i,r)?this.ti(t,s):(Jl()<=ae.DEBUG&&F("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aa(s)),this.Zs.Qs(t,s,xE(r,-1)).next(c=>(a.forEach(l=>{c=c.insert(l.key,l)}),c)))})}ei(t,s){let r=new qe(gd(t));return s.forEach((i,o)=>{wc(t,o)&&(r=r.add(o))}),r}ni(t,s,r,i){if(r.size!==s.size)return!0;const o=t==="F"?s.last():s.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ti(t,s){return Jl()<=ae.DEBUG&&F("QueryEngine","Using full collection scan to execute query:",aa(s)),this.Zs.Qs(t,s,ns.min())}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(t,s,r,i){this.persistence=t,this.si=s,this.M=i,this.ii=new Be(ce),this.ri=new ys(o=>yc(o),vc),this.oi=new Map,this.ui=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.ai(r)}ai(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.ci=new V0(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>t.collect(s,this.ii))}}function j0(n,t,s,r){return new $0(n,t,s,r)}async function kd(n,t){const s=Y(n);return await s.persistence.runTransaction("Handle user change","readonly",r=>{let i;return s.Bs.getAllMutationBatches(r).next(o=>(i=o,s.ai(t),s.Bs.getAllMutationBatches(r))).next(o=>{const a=[],c=[];let l=_e();for(const u of i){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of o){c.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return s.ci.Ks(r,l).next(u=>({hi:u,removedBatchIds:a,addedBatchIds:c}))})})}function H0(n,t){const s=Y(n);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),o=s.ui.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){const h=l.batch,f=h.keys();let p=A.resolve();return f.forEach(m=>{p=p.next(()=>u.getEntry(c,m)).next(v=>{const S=l.docVersions.get(m);we(S!==null),v.version.compareTo(S)<0&&(h.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),u.addEntry(v)))})}),p.next(()=>a.Bs.removeMutationBatch(c,h))}(s,r,t,o).next(()=>o.apply(r)).next(()=>s.Bs.performConsistencyCheck(r)).next(()=>s.ci.Ks(r,i))})}function Od(n){const t=Y(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",s=>t.fs.getLastRemoteSnapshotVersion(s))}function q0(n,t){const s=Y(n),r=t.snapshotVersion;let i=s.ii;return s.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=s.ui.newChangeBuffer({trackRemovals:!0});i=s.ii;const c=[];t.targetChanges.forEach((u,h)=>{const f=i.get(h);if(!f)return;c.push(s.fs.removeMatchingKeys(o,u.removedDocuments,h).next(()=>s.fs.addMatchingKeys(o,u.addedDocuments,h)));let p=f.withSequenceNumber(o.currentSequenceNumber);t.targetMismatches.has(h)?p=p.withResumeToken(Ke.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),function(m,v,S){return m.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(f,p,u)&&c.push(s.fs.updateTargetData(o,p))});let l=Cn();if(t.documentUpdates.forEach(u=>{t.resolvedLimboDocuments.has(u)&&c.push(s.persistence.referenceDelegate.updateLimboDocument(o,u))}),c.push(K0(o,a,t.documentUpdates).next(u=>{l=u})),!r.isEqual(ee.min())){const u=s.fs.getLastRemoteSnapshotVersion(o).next(h=>s.fs.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(u)}return A.waitFor(c).next(()=>a.apply(o)).next(()=>s.ci.Gs(o,l)).next(()=>l)}).then(o=>(s.ii=i,o))}function K0(n,t,s){let r=_e();return s.forEach(i=>r=r.add(i)),t.getEntries(n,r).next(i=>{let o=Cn();return s.forEach((a,c)=>{const l=i.get(a);c.isNoDocument()&&c.version.isEqual(ee.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):F("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),o})}function z0(n,t){const s=Y(n);return s.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),s.Bs.getNextMutationBatchAfterBatchId(r,t)))}function G0(n,t){const s=Y(n);return s.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return s.fs.getTargetData(r,t).next(o=>o?(i=o,A.resolve(i)):s.fs.allocateTargetId(r).next(a=>(i=new mn(t,a,0,r.currentSequenceNumber),s.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=s.ii.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(s.ii=s.ii.insert(r.targetId,r),s.ri.set(t,r.targetId)),r})}async function da(n,t,s){const r=Y(n),i=r.ii.get(t),o=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!pr(a))throw a;F("LocalStore",`Failed to update sequence numbers for target ${t}: ${a}`)}r.ii=r.ii.remove(t),r.ri.delete(i.target)}function yu(n,t,s){const r=Y(n);let i=ee.min(),o=_e();return r.persistence.runTransaction("Execute query","readonly",a=>function(c,l,u){const h=Y(c),f=h.ri.get(u);return f!==void 0?A.resolve(h.ii.get(f)):h.fs.getTargetData(l,u)}(r,a,Tn(t)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(a,c.targetId).next(l=>{o=l})}).next(()=>r.si.Qs(a,t,s?i:ee.min(),s?o:_e())).next(c=>(W0(r,WE(t),c),{documents:c,li:o})))}function W0(n,t,s){let r=ee.min();s.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.oi.set(t,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t){this.M=t,this.wi=new Map,this.mi=new Map}getBundleMetadata(t,s){return A.resolve(this.wi.get(s))}saveBundleMetadata(t,s){var r;return this.wi.set(s.id,{id:(r=s).id,version:r.version,createTime:Bt(r.createTime)}),A.resolve()}getNamedQuery(t,s){return A.resolve(this.mi.get(s))}saveNamedQuery(t,s){return this.mi.set(s.name,function(r){return{name:r.name,query:M0(r.bundledQuery),readTime:Bt(r.readTime)}}(s)),A.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(){this.overlays=new Be(j.comparator),this.gi=new Map}getOverlay(t,s){return A.resolve(this.overlays.get(s))}saveOverlays(t,s,r){return r.forEach((i,o)=>{this.Xt(t,s,o)}),A.resolve()}removeOverlaysForBatchId(t,s,r){const i=this.gi.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.gi.delete(r)),A.resolve()}getOverlaysForCollection(t,s,r){const i=go(),o=s.length+1,a=new j(s.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const l=c.getNext().value,u=l.getKey();if(!s.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return A.resolve(i)}getOverlaysForCollectionGroup(t,s,r,i){let o=new Be((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===s&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=go(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const c=go(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>c.set(u,h)),!(c.size()>=i)););return A.resolve(c)}Xt(t,s,r){if(r===null)return;const i=this.overlays.get(r.key);if(i!==null){const a=this.gi.get(i.largestBatchId).delete(r.key);this.gi.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new O0(s,r));let o=this.gi.get(s);o===void 0&&(o=_e(),this.gi.set(s,o)),this.gi.set(s,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(){this.yi=new qe(Pe.pi),this.Ii=new qe(Pe.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(t,s){const r=new Pe(t,s);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(t,s){t.forEach(r=>this.addReference(r,s))}removeReference(t,s){this.Ai(new Pe(t,s))}Ri(t,s){t.forEach(r=>this.removeReference(r,s))}Pi(t){const s=new j(new Ce([])),r=new Pe(s,t),i=new Pe(s,t+1),o=[];return this.Ii.forEachInRange([r,i],a=>{this.Ai(a),o.push(a.key)}),o}bi(){this.yi.forEach(t=>this.Ai(t))}Ai(t){this.yi=this.yi.delete(t),this.Ii=this.Ii.delete(t)}Vi(t){const s=new j(new Ce([])),r=new Pe(s,t),i=new Pe(s,t+1);let o=_e();return this.Ii.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(t){const s=new Pe(t,0),r=this.yi.firstAfterOrEqual(s);return r!==null&&t.isEqual(r.key)}}class Pe{constructor(t,s){this.key=t,this.vi=s}static pi(t,s){return j.comparator(t.key,s.key)||ce(t.vi,s.vi)}static Ti(t,s){return ce(t.vi,s.vi)||j.comparator(t.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(t,s){this.indexManager=t,this.referenceDelegate=s,this.Bs=[],this.Si=1,this.Di=new qe(Pe.pi)}checkEmpty(t){return A.resolve(this.Bs.length===0)}addMutationBatch(t,s,r,i){const o=this.Si;this.Si++,this.Bs.length>0&&this.Bs[this.Bs.length-1];const a=new k0(o,s,r,i);this.Bs.push(a);for(const c of i)this.Di=this.Di.add(new Pe(c.key,o)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast());return A.resolve(a)}lookupMutationBatch(t,s){return A.resolve(this.Ci(s))}getNextMutationBatchAfterBatchId(t,s){const r=s+1,i=this.xi(r),o=i<0?0:i;return A.resolve(this.Bs.length>o?this.Bs[o]:null)}getHighestUnacknowledgedBatchId(){return A.resolve(this.Bs.length===0?-1:this.Si-1)}getAllMutationBatches(t){return A.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,s){const r=new Pe(s,0),i=new Pe(s,Number.POSITIVE_INFINITY),o=[];return this.Di.forEachInRange([r,i],a=>{const c=this.Ci(a.vi);o.push(c)}),A.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(t,s){let r=new qe(ce);return s.forEach(i=>{const o=new Pe(i,0),a=new Pe(i,Number.POSITIVE_INFINITY);this.Di.forEachInRange([o,a],c=>{r=r.add(c.vi)})}),A.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(t,s){const r=s.path,i=r.length+1;let o=r;j.isDocumentKey(o)||(o=o.child(""));const a=new Pe(new j(o),0);let c=new qe(ce);return this.Di.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(c=c.add(l.vi)),!0)},a),A.resolve(this.Ni(c))}Ni(t){const s=[];return t.forEach(r=>{const i=this.Ci(r);i!==null&&s.push(i)}),s}removeMutationBatch(t,s){we(this.ki(s.batchId,"removed")===0),this.Bs.shift();let r=this.Di;return A.forEach(s.mutations,i=>{const o=new Pe(i.key,s.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.Di=r})}_n(t){}containsKey(t,s){const r=new Pe(s,0),i=this.Di.firstAfterOrEqual(r);return A.resolve(s.isEqual(i&&i.key))}performConsistencyCheck(t){return this.Bs.length,A.resolve()}ki(t,s){return this.xi(t)}xi(t){return this.Bs.length===0?0:t-this.Bs[0].batchId}Ci(t){const s=this.xi(t);return s<0||s>=this.Bs.length?null:this.Bs[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(t){this.Mi=t,this.docs=new Be(j.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,s){const r=s.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mi(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const s=this.docs.get(t);s&&(this.docs=this.docs.remove(t),this.size-=s.size)}getEntry(t,s){const r=this.docs.get(s);return A.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(s))}getEntries(t,s){let r=Cn();return s.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ge.newInvalidDocument(i))}),A.resolve(r)}getAllFromCollection(t,s,r){let i=Cn();const o=new j(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:c,value:{document:l}}=a.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||kE(DE(l),r)<=0||(i=i.insert(l.key,l.mutableCopy()))}return A.resolve(i)}getAllFromCollectionGroup(t,s,r,i){G()}Oi(t,s){return A.forEach(this.docs,r=>s(r))}newChangeBuffer(t){return new Z0(this)}getSize(t){return A.resolve(this.size)}}class Z0 extends B0{constructor(t){super(),this.Kn=t}applyChanges(t){const s=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?s.push(this.Kn.addEntry(t,i)):this.Kn.removeEntry(r)}),A.waitFor(s)}getFromCache(t,s){return this.Kn.getEntry(t,s)}getAllFromCache(t,s){return this.Kn.getEntries(t,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(t){this.persistence=t,this.Fi=new ys(s=>yc(s),vc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.$i=0,this.Bi=new Tc,this.targetCount=0,this.Li=ss.gn()}forEachTarget(t,s){return this.Fi.forEach((r,i)=>s(i)),A.resolve()}getLastRemoteSnapshotVersion(t){return A.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return A.resolve(this.$i)}allocateTargetId(t){return this.highestTargetId=this.Li.next(),A.resolve(this.highestTargetId)}setTargetsMetadata(t,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.$i&&(this.$i=s),A.resolve()}Tn(t){this.Fi.set(t.target,t);const s=t.targetId;s>this.highestTargetId&&(this.Li=new ss(s),this.highestTargetId=s),t.sequenceNumber>this.$i&&(this.$i=t.sequenceNumber)}addTargetData(t,s){return this.Tn(s),this.targetCount+=1,A.resolve()}updateTargetData(t,s){return this.Tn(s),A.resolve()}removeTargetData(t,s){return this.Fi.delete(s.target),this.Bi.Pi(s.targetId),this.targetCount-=1,A.resolve()}removeTargets(t,s,r){let i=0;const o=[];return this.Fi.forEach((a,c)=>{c.sequenceNumber<=s&&r.get(c.targetId)===null&&(this.Fi.delete(a),o.push(this.removeMatchingKeysForTargetId(t,c.targetId)),i++)}),A.waitFor(o).next(()=>i)}getTargetCount(t){return A.resolve(this.targetCount)}getTargetData(t,s){const r=this.Fi.get(s)||null;return A.resolve(r)}addMatchingKeys(t,s,r){return this.Bi.Ei(s,r),A.resolve()}removeMatchingKeys(t,s,r){this.Bi.Ri(s,r);const i=this.persistence.referenceDelegate,o=[];return i&&s.forEach(a=>{o.push(i.markPotentiallyOrphaned(t,a))}),A.waitFor(o)}removeMatchingKeysForTargetId(t,s){return this.Bi.Pi(s),A.resolve()}getMatchingKeysForTargetId(t,s){const r=this.Bi.Vi(s);return A.resolve(r)}containsKey(t,s){return A.resolve(this.Bi.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t,s){this.Ui={},this.overlays={},this.es=new gc(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new e_(this),this.indexManager=new L0,this.ds=function(r){return new J0(r)}(r=>this.referenceDelegate.qi(r)),this.M=new P0(s),this._s=new Y0(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let s=this.overlays[t.toKey()];return s||(s=new X0,this.overlays[t.toKey()]=s),s}getMutationQueue(t,s){let r=this.Ui[t.toKey()];return r||(r=new Q0(s,this.referenceDelegate),this.Ui[t.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,s,r){F("MemoryPersistence","Starting transaction:",t);const i=new n_(this.es.next());return this.referenceDelegate.Ki(),r(i).next(o=>this.referenceDelegate.Gi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Qi(t,s){return A.or(Object.values(this.Ui).map(r=>()=>r.containsKey(t,s)))}}class n_ extends D0{constructor(t){super(),this.currentSequenceNumber=t}}class Cc{constructor(t){this.persistence=t,this.ji=new Tc,this.Wi=null}static zi(t){return new Cc(t)}get Hi(){if(this.Wi)return this.Wi;throw G()}addReference(t,s,r){return this.ji.addReference(r,s),this.Hi.delete(r.toString()),A.resolve()}removeReference(t,s,r){return this.ji.removeReference(r,s),this.Hi.add(r.toString()),A.resolve()}markPotentiallyOrphaned(t,s){return this.Hi.add(s.toString()),A.resolve()}removeTarget(t,s){this.ji.Pi(s.targetId).forEach(i=>this.Hi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,s.targetId).next(i=>{i.forEach(o=>this.Hi.add(o.toString()))}).next(()=>r.removeTargetData(t,s))}Ki(){this.Wi=new Set}Gi(t){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return A.forEach(this.Hi,r=>{const i=j.fromPath(r);return this.Ji(t,i).next(o=>{o||s.removeEntry(i,ee.min())})}).next(()=>(this.Wi=null,s.apply(t)))}updateLimboDocument(t,s){return this.Ji(t,s).next(r=>{r?this.Hi.delete(s.toString()):this.Hi.add(s.toString())})}qi(t){return 0}Ji(t,s){return A.or([()=>A.resolve(this.ji.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(t,s),()=>this.persistence.Qi(t,s)])}}class vu{constructor(){this.activeTargetIds=Cd()}Zi(t){this.activeTargetIds=this.activeTargetIds.add(t)}tr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Xi(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class s_{constructor(){this.$r=new vu,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,s,r){}addLocalQueryTarget(t){return this.$r.Zi(t),this.Br[t]||"not-current"}updateQueryState(t,s,r){this.Br[t]=s}removeLocalQueryTarget(t){this.$r.tr(t)}isLocalQueryTarget(t){return this.$r.activeTargetIds.has(t)}clearQueryState(t){delete this.Br[t]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(t){return this.$r.activeTargetIds.has(t)}start(){return this.$r=new vu,Promise.resolve()}handleUserChange(t,s,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{Lr(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(t){this.Qr.push(t)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){F("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.Qr)t(0)}Gr(){F("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.Qr)t(1)}static vt(){return typeof window!="undefined"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(t){this.Wr=t.Wr,this.zr=t.zr}Hr(t){this.Jr=t}Yr(t){this.Xr=t}onMessage(t){this.Zr=t}close(){this.zr()}send(t){this.Wr(t)}eo(){this.Jr()}no(t){this.Xr(t)}so(t){this.Zr(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_ extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http";this.io=s+"://"+t.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(t,s,r,i,o){const a=this.uo(t,s);F("RestConnection","Sending: ",a,r);const c={};return this.ao(c,i,o),this.co(t,a,c,r).then(l=>(F("RestConnection","Received: ",l),l),l=>{throw Zl("RestConnection",`${t} failed with error: `,l,"url: ",a,"request:",r),l})}ho(t,s,r,i,o){return this.oo(t,s,r,i,o)}ao(t,s,r){t["X-Goog-Api-Client"]="gl-js/ fire/"+ps,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((i,o)=>t[o]=i),r&&r.headers.forEach((i,o)=>t[o]=i)}uo(t,s){const r=i_[t];return`${this.io}/v1/${s}:${r}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}co(t,s,r,i){return new Promise((o,a)=>{const c=new mE;c.listenOnce(dE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case po.NO_ERROR:const u=c.getResponseJson();F("Connection","XHR received:",JSON.stringify(u)),o(u);break;case po.TIMEOUT:F("Connection",'RPC "'+t+'" timed out'),a(new q(T.DEADLINE_EXCEEDED,"Request time out"));break;case po.HTTP_ERROR:const h=c.getStatus();if(F("Connection",'RPC "'+t+'" failed with status:',h,"response text:",c.getResponseText()),h>0){const f=c.getResponseJson().error;if(f&&f.status&&f.message){const p=function(m){const v=m.toLowerCase().replace(/_/g,"-");return Object.values(T).indexOf(v)>=0?v:T.UNKNOWN}(f.status);a(new q(p,f.message))}else a(new q(T.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new q(T.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{F("Connection",'RPC "'+t+'" completed.')}});const l=JSON.stringify(i);c.send(s,"POST",l,r,15)})}lo(t,s,r){const i=[this.io,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=hE(),a=fE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(c.xmlHttpFactory=new gE({})),this.ao(c.initMessageHeaders,s,r),ev()||nv()||sv()||rv()||iv()||tv()||(c.httpHeadersOverwriteParam="$httpHeaders");const l=i.join("");F("Connection","Creating WebChannel: "+l,c);const u=o.createWebChannel(l,c);let h=!1,f=!1;const p=new o_({Wr:v=>{f?F("Connection","Not sending because WebChannel is closed:",v):(h||(F("Connection","Opening WebChannel transport."),u.open(),h=!0),F("Connection","WebChannel sending:",v),u.send(v))},zr:()=>u.close()}),m=(v,S,R)=>{v.listen(S,D=>{try{R(D)}catch(B){setTimeout(()=>{throw B},0)}})};return m(u,Ar.EventType.OPEN,()=>{f||F("Connection","WebChannel transport opened.")}),m(u,Ar.EventType.CLOSE,()=>{f||(f=!0,F("Connection","WebChannel transport closed"),p.no())}),m(u,Ar.EventType.ERROR,v=>{f||(f=!0,Zl("Connection","WebChannel transport errored:",v),p.no(new q(T.UNAVAILABLE,"The operation could not be completed")))}),m(u,Ar.EventType.MESSAGE,v=>{var S;if(!f){const R=v.data[0];we(!!R);const D=R,B=D.error||((S=D[0])===null||S===void 0?void 0:S.error);if(B){F("Connection","WebChannel received error:",B);const Q=B.status;let H=function(X){const P=Ae[X];if(P!==void 0)return Td(P)}(Q),oe=B.message;H===void 0&&(H=T.INTERNAL,oe="Unknown error status: "+Q+" with message "+B.message),f=!0,p.no(new q(H,oe)),u.close()}else F("Connection","WebChannel received:",R),p.so(R)}}),m(a,pE.STAT_EVENT,v=>{v.stat===Xl.PROXY?F("Connection","Detected buffering proxy"):v.stat===Xl.NOPROXY&&F("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.eo()},0),p}}function yo(){return typeof document!="undefined"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(n){return new g0(n,!0)}class Pd{constructor(t,s,r=1e3,i=1.5,o=6e4){this.Yn=t,this.timerId=s,this.fo=r,this._o=i,this.wo=o,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(t){this.cancel();const s=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),i=Math.max(0,s-r);i>0&&F("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.mo} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.po=Date.now(),t())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){this.yo!==null&&(this.yo.skipDelay(),this.yo=null)}cancel(){this.yo!==null&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(t,s,r,i,o,a,c,l){this.Yn=t,this.Ro=r,this.Po=i,this.bo=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new Pd(t,s)}Co(){return this.state===1||this.state===5||this.xo()}xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.No()}async stop(){this.Co()&&await this.close(0)}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&this.vo===null&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(t){this.$o(),this.stream.send(t)}async Oo(){if(this.xo())return this.close(0)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}async close(t,s){this.$o(),this.Bo(),this.Do.cancel(),this.Vo++,t!==4?this.Do.reset():s&&s.code===T.RESOURCE_EXHAUSTED?(Zt(s.toString()),Zt("Using maximum backoff delay to prevent overloading the backend."),this.Do.Io()):s&&s.code===T.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Lo(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Yr(s)}Lo(){}auth(){this.state=1;const t=this.Uo(this.Vo),s=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Vo===s&&this.qo(r,i)},r=>{t(()=>{const i=new q(T.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(i)})})}qo(t,s){const r=this.Uo(this.Vo);this.stream=this.Go(t,s),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(i=>{r(()=>this.Ko(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}No(){this.state=5,this.Do.To(async()=>{this.state=0,this.start()})}Ko(t){return F("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Uo(t){return s=>{this.Yn.enqueueAndForget(()=>this.Vo===t?s():(F("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class c_ extends Md{constructor(t,s,r,i,o,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,i,a),this.M=o}Go(t,s){return this.bo.lo("Listen",t,s)}onMessage(t){this.Do.reset();const s=v0(this.M,t),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Bt(o.readTime):ee.min()}(t);return this.listener.Qo(s,r)}jo(t){const s={};s.database=fa(this.M),s.addTarget=function(i,o){let a;const c=o.target;return a=oa(c)?{documents:_0(i,c)}:{query:b0(i,c)},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0?a.resumeToken=Ad(i,o.resumeToken):o.snapshotVersion.compareTo(ee.min())>0&&(a.readTime=ai(i,o.snapshotVersion.toTimestamp())),a}(this.M,t);const r=C0(this.M,t);r&&(s.labels=r),this.Fo(s)}Wo(t){const s={};s.database=fa(this.M),s.removeTarget=t,this.Fo(s)}}class l_ extends Md{constructor(t,s,r,i,o,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,i,a),this.M=o,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(t,s){return this.bo.lo("Write",t,s)}onMessage(t){if(we(!!t.streamToken),this.lastStreamToken=t.streamToken,this.zo){this.Do.reset();const s=E0(t.writeResults,t.commitTime),r=Bt(t.commitTime);return this.listener.Yo(r,s)}return we(!t.writeResults||t.writeResults.length===0),this.zo=!0,this.listener.Xo()}Zo(){const t={};t.database=fa(this.M),this.Fo(t)}Jo(t){const s={streamToken:this.lastStreamToken,writes:t.map(r=>w0(this.M,r))};this.Fo(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends class{}{constructor(t,s,r,i){super(),this.authCredentials=t,this.appCheckCredentials=s,this.bo=r,this.M=i,this.tu=!1}eu(){if(this.tu)throw new q(T.FAILED_PRECONDITION,"The client has already been terminated.")}oo(t,s,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.oo(t,s,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(T.UNKNOWN,i.toString())})}ho(t,s,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.bo.ho(t,s,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===T.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(T.UNKNOWN,i.toString())})}terminate(){this.tu=!0}}class h_{constructor(t,s){this.asyncQueue=t,this.onlineStateHandler=s,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){this.nu===0&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(t){this.state==="Online"?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ou("Offline")))}set(t){this.cu(),this.nu=0,t==="Online"&&(this.iu=!1),this.ou(t)}ou(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}uu(t){const s=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Zt(s),this.iu=!1):F("OnlineStateTracker",s)}cu(){this.su!==null&&(this.su.cancel(),this.su=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(t,s,r,i,o){this.localStore=t,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=o,this._u.Lr(a=>{r.enqueueAndForget(async()=>{In(this)&&(F("RemoteStore","Restarting streams for network reachability change."),await async function(c){const l=Y(c);l.fu.add(4),await mr(l),l.wu.set("Unknown"),l.fu.delete(4),await Ki(l)}(this))})}),this.wu=new h_(r,i)}}async function Ki(n){if(In(n))for(const t of n.du)await t(!0)}async function mr(n){for(const t of n.du)await t(!1)}function Ld(n,t){const s=Y(n);s.lu.has(t.targetId)||(s.lu.set(t.targetId,t),Ac(s)?Ic(s):vs(s).xo()&&Sc(s,t))}function Fd(n,t){const s=Y(n),r=vs(s);s.lu.delete(t),r.xo()&&Bd(s,t),s.lu.size===0&&(r.xo()?r.Mo():In(s)&&s.wu.set("Unknown"))}function Sc(n,t){n.mu.Z(t.targetId),vs(n).jo(t)}function Bd(n,t){n.mu.Z(t),vs(n).Wo(t)}function Ic(n){n.mu=new f0({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n.lu.get(t)||null}),vs(n).start(),n.wu.ru()}function Ac(n){return In(n)&&!vs(n).Co()&&n.lu.size>0}function In(n){return Y(n).fu.size===0}function Vd(n){n.mu=void 0}async function d_(n){n.lu.forEach((t,s)=>{Sc(n,t)})}async function p_(n,t){Vd(n),Ac(n)?(n.wu.au(t),Ic(n)):n.wu.set("Unknown")}async function g_(n,t,s){if(n.wu.set("Online"),t instanceof Id&&t.state===2&&t.cause)try{await async function(r,i){const o=i.cause;for(const a of i.targetIds)r.lu.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.lu.delete(a),r.mu.removeTarget(a))}(n,t)}catch(r){F("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await ci(n,r)}else if(t instanceof Lr?n.mu.ut(t):t instanceof Sd?n.mu._t(t):n.mu.ht(t),!s.isEqual(ee.min()))try{const r=await Od(n.localStore);s.compareTo(r)>=0&&await function(i,o){const a=i.mu.yt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){const u=i.lu.get(l);u&&i.lu.set(l,u.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach(c=>{const l=i.lu.get(c);if(!l)return;i.lu.set(c,l.withResumeToken(Ke.EMPTY_BYTE_STRING,l.snapshotVersion)),Bd(i,c);const u=new mn(l.target,c,1,l.sequenceNumber);Sc(i,u)}),i.remoteSyncer.applyRemoteEvent(a)}(n,s)}catch(r){F("RemoteStore","Failed to raise snapshot:",r),await ci(n,r)}}async function ci(n,t,s){if(!pr(t))throw t;n.fu.add(1),await mr(n),n.wu.set("Offline"),s||(s=()=>Od(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{F("RemoteStore","Retrying IndexedDB access"),await s(),n.fu.delete(1),await Ki(n)})}function Ud(n,t){return t().catch(s=>ci(n,s,t))}async function zi(n){const t=Y(n),s=tn(t);let r=t.hu.length>0?t.hu[t.hu.length-1].batchId:-1;for(;m_(t);)try{const i=await z0(t.localStore,r);if(i===null){t.hu.length===0&&s.Mo();break}r=i.batchId,y_(t,i)}catch(i){await ci(t,i)}$d(t)&&jd(t)}function m_(n){return In(n)&&n.hu.length<10}function y_(n,t){n.hu.push(t);const s=tn(n);s.xo()&&s.Ho&&s.Jo(t.mutations)}function $d(n){return In(n)&&!tn(n).Co()&&n.hu.length>0}function jd(n){tn(n).start()}async function v_(n){tn(n).Zo()}async function w_(n){const t=tn(n);for(const s of n.hu)t.Jo(s.mutations)}async function E_(n,t,s){const r=n.hu.shift(),i=_c.from(r,t,s);await Ud(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await zi(n)}async function __(n,t){t&&tn(n).Ho&&await async function(s,r){if(i=r.code,o0(i)&&i!==T.ABORTED){const o=s.hu.shift();tn(s).ko(),await Ud(s,()=>s.remoteSyncer.rejectFailedWrite(o.batchId,r)),await zi(s)}var i}(n,t),$d(n)&&jd(n)}async function Eu(n,t){const s=Y(n);s.asyncQueue.verifyOperationInProgress(),F("RemoteStore","RemoteStore received new credentials");const r=In(s);s.fu.add(3),await mr(s),r&&s.wu.set("Unknown"),await s.remoteSyncer.handleCredentialChange(t),s.fu.delete(3),await Ki(s)}async function b_(n,t){const s=Y(n);t?(s.fu.delete(2),await Ki(s)):t||(s.fu.add(2),await mr(s),s.wu.set("Unknown"))}function vs(n){return n.gu||(n.gu=function(t,s,r){const i=Y(t);return i.eu(),new c_(s,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:d_.bind(null,n),Yr:p_.bind(null,n),Qo:g_.bind(null,n)}),n.du.push(async t=>{t?(n.gu.ko(),Ac(n)?Ic(n):n.wu.set("Unknown")):(await n.gu.stop(),Vd(n))})),n.gu}function tn(n){return n.yu||(n.yu=function(t,s,r){const i=Y(t);return i.eu(),new l_(s,i.bo,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Hr:v_.bind(null,n),Yr:__.bind(null,n),Xo:w_.bind(null,n),Yo:E_.bind(null,n)}),n.du.push(async t=>{t?(n.yu.ko(),await zi(n)):(await n.yu.stop(),n.hu.length>0&&(F("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))})),n.yu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(t,s,r,i,o){this.asyncQueue=t,this.timerId=s,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Xt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(t,s,r,i,o){const a=Date.now()+r,c=new Nc(t,s,a,i,o);return c.start(r),c}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(T.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Rc(n,t){if(Zt("AsyncQueue",`${t}: ${n}`),pr(n))return new q(T.UNAVAILABLE,`${t}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(t){this.comparator=t?(s,r)=>t(s,r)||j.comparator(s.key,r.key):(s,r)=>j.comparator(s.key,r.key),this.keyedMap=la(),this.sortedSet=new Be(this.comparator)}static emptySet(t){return new Kn(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const s=this.keyedMap.get(t);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((s,r)=>(t(s),!1))}add(t){const s=this.delete(t.key);return s.copy(s.keyedMap.insert(t.key,t),s.sortedSet.insert(t,null))}delete(t){const s=this.get(t);return s?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(s)):this}isEqual(t){if(!(t instanceof Kn)||this.size!==t.size)return!1;const s=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;s.hasNext();){const i=s.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const t=[];return this.forEach(s=>{t.push(s.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,s){const r=new Kn;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(){this.pu=new Be(j.comparator)}track(t){const s=t.doc.key,r=this.pu.get(s);r?t.type!==0&&r.type===3?this.pu=this.pu.insert(s,t):t.type===3&&r.type!==1?this.pu=this.pu.insert(s,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.pu=this.pu.insert(s,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.pu=this.pu.insert(s,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.pu=this.pu.remove(s):t.type===1&&r.type===2?this.pu=this.pu.insert(s,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.pu=this.pu.insert(s,{type:2,doc:t.doc}):G():this.pu=this.pu.insert(s,t)}Iu(){const t=[];return this.pu.inorderTraversal((s,r)=>{t.push(r)}),t}}class rs{constructor(t,s,r,i,o,a,c,l){this.query=t,this.docs=s,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=l}static fromInitialDocuments(t,s,r,i){const o=[];return s.forEach(a=>{o.push({type:0,doc:a})}),new rs(t,s,Kn.emptySet(s),o,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Vi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const s=this.docChanges,r=t.docChanges;if(s.length!==r.length)return!1;for(let i=0;i<s.length;i++)if(s[i].type!==r[i].type||!s[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.Tu=void 0,this.listeners=[]}}class C_{constructor(){this.queries=new ys(t=>pd(t),Vi),this.onlineState="Unknown",this.Eu=new Set}}async function S_(n,t){const s=Y(n),r=t.query;let i=!1,o=s.queries.get(r);if(o||(i=!0,o=new T_),i)try{o.Tu=await s.onListen(r)}catch(a){const c=Rc(a,`Initialization of query '${aa(t.query)}' failed`);return void t.onError(c)}s.queries.set(r,o),o.listeners.push(t),t.Au(s.onlineState),o.Tu&&t.Ru(o.Tu)&&xc(s)}async function I_(n,t){const s=Y(n),r=t.query;let i=!1;const o=s.queries.get(r);if(o){const a=o.listeners.indexOf(t);a>=0&&(o.listeners.splice(a,1),i=o.listeners.length===0)}if(i)return s.queries.delete(r),s.onUnlisten(r)}function A_(n,t){const s=Y(n);let r=!1;for(const i of t){const o=i.query,a=s.queries.get(o);if(a){for(const c of a.listeners)c.Ru(i)&&(r=!0);a.Tu=i}}r&&xc(s)}function N_(n,t,s){const r=Y(n),i=r.queries.get(t);if(i)for(const o of i.listeners)o.onError(s);r.queries.delete(t)}function xc(n){n.Eu.forEach(t=>{t.next()})}class R_{constructor(t,s,r){this.query=t,this.Pu=s,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new rs(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let s=!1;return this.bu?this.vu(t)&&(this.Pu.next(t),s=!0):this.Su(t,this.onlineState)&&(this.Du(t),s=!0),this.Vu=t,s}onError(t){this.Pu.error(t)}Au(t){this.onlineState=t;let s=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,t)&&(this.Du(this.Vu),s=!0),s}Su(t,s){if(!t.fromCache)return!0;const r=s!=="Offline";return(!this.options.Cu||!r)&&(!t.docs.isEmpty()||s==="Offline")}vu(t){if(t.docChanges.length>0)return!0;const s=this.Vu&&this.Vu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Du(t){t=rs.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Pu.next(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(t){this.key=t}}class qd{constructor(t){this.key=t}}class x_{constructor(t,s){this.query=t,this.$u=s,this.Bu=null,this.current=!1,this.Lu=_e(),this.mutatedKeys=_e(),this.Uu=gd(t),this.qu=new Kn(this.Uu)}get Ku(){return this.$u}Gu(t,s){const r=s?s.Qu:new _u,i=s?s.qu:this.qu;let o=s?s.mutatedKeys:this.mutatedKeys,a=i,c=!1;const l=Pr(this.query)&&i.size===this.query.limit?i.last():null,u=ri(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((h,f)=>{const p=i.get(h),m=wc(this.query,f)?f:null,v=!!p&&this.mutatedKeys.has(p.key),S=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let R=!1;p&&m?p.data.isEqual(m.data)?v!==S&&(r.track({type:3,doc:m}),R=!0):this.ju(p,m)||(r.track({type:2,doc:m}),R=!0,(l&&this.Uu(m,l)>0||u&&this.Uu(m,u)<0)&&(c=!0)):!p&&m?(r.track({type:0,doc:m}),R=!0):p&&!m&&(r.track({type:1,doc:p}),R=!0,(l||u)&&(c=!0)),R&&(m?(a=a.add(m),o=S?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),Pr(this.query)||ri(this.query))for(;a.size>this.query.limit;){const h=Pr(this.query)?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{qu:a,Qu:r,ni:c,mutatedKeys:o}}ju(t,s){return t.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(t,s,r){const i=this.qu;this.qu=t.qu,this.mutatedKeys=t.mutatedKeys;const o=t.Qu.Iu();o.sort((u,h)=>function(f,p){const m=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return m(f)-m(p)}(u.type,h.type)||this.Uu(u.doc,h.doc)),this.Wu(r);const a=s?this.zu():[],c=this.Lu.size===0&&this.current?1:0,l=c!==this.Bu;return this.Bu=c,o.length!==0||l?{snapshot:new rs(this.query,t.qu,i,o,t.mutatedKeys,c===0,l,!1),Hu:a}:{Hu:a}}Au(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new _u,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(t){return!this.$u.has(t)&&!!this.qu.has(t)&&!this.qu.get(t).hasLocalMutations}Wu(t){t&&(t.addedDocuments.forEach(s=>this.$u=this.$u.add(s)),t.modifiedDocuments.forEach(s=>{}),t.removedDocuments.forEach(s=>this.$u=this.$u.delete(s)),this.current=t.current)}zu(){if(!this.current)return[];const t=this.Lu;this.Lu=_e(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const s=[];return t.forEach(r=>{this.Lu.has(r)||s.push(new qd(r))}),this.Lu.forEach(r=>{t.has(r)||s.push(new Hd(r))}),s}Yu(t){this.$u=t.li,this.Lu=_e();const s=this.Gu(t.documents);return this.applyChanges(s,!0)}Xu(){return rs.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,this.Bu===0)}}class D_{constructor(t,s,r){this.query=t,this.targetId=s,this.view=r}}class k_{constructor(t){this.key=t,this.Zu=!1}}class O_{constructor(t,s,r,i,o,a){this.localStore=t,this.remoteStore=s,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.ta={},this.ea=new ys(c=>pd(c),Vi),this.na=new Map,this.sa=new Set,this.ia=new Be(j.comparator),this.ra=new Map,this.oa=new Tc,this.ua={},this.aa=new Map,this.ca=ss.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return this.ha===!0}}async function P_(n,t){const s=q_(n);let r,i;const o=s.ea.get(t);if(o)r=o.targetId,s.sharedClientState.addLocalQueryTarget(r),i=o.view.Xu();else{const a=await G0(s.localStore,Tn(t));s.isPrimaryClient&&Ld(s.remoteStore,a);const c=s.sharedClientState.addLocalQueryTarget(a.targetId);r=a.targetId,i=await M_(s,t,r,c==="current")}return i}async function M_(n,t,s,r){n.la=(h,f,p)=>async function(m,v,S,R){let D=v.view.Gu(S);D.ni&&(D=await yu(m.localStore,v.query,!1).then(({documents:H})=>v.view.Gu(H,D)));const B=R&&R.targetChanges.get(v.targetId),Q=v.view.applyChanges(D,m.isPrimaryClient,B);return Tu(m,v.targetId,Q.Hu),Q.snapshot}(n,h,f,p);const i=await yu(n.localStore,t,!0),o=new x_(t,i.li),a=o.Gu(i.documents),c=dr.createSynthesizedTargetChangeForCurrentChange(s,r&&n.onlineState!=="Offline"),l=o.applyChanges(a,n.isPrimaryClient,c);Tu(n,s,l.Hu);const u=new D_(t,s,o);return n.ea.set(t,u),n.na.has(s)?n.na.get(s).push(t):n.na.set(s,[t]),l.snapshot}async function L_(n,t){const s=Y(n),r=s.ea.get(t),i=s.na.get(r.targetId);if(i.length>1)return s.na.set(r.targetId,i.filter(o=>!Vi(o,t))),void s.ea.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await da(s.localStore,r.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(r.targetId),Fd(s.remoteStore,r.targetId),pa(s,r.targetId)}).catch(gr)):(pa(s,r.targetId),await da(s.localStore,r.targetId,!0))}async function F_(n,t,s){const r=K_(n);try{const i=await function(o,a){const c=Y(o),l=Ye.now(),u=a.reduce((f,p)=>f.add(p.key),_e());let h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>c.ci.Ks(f,u).next(p=>{h=p;const m=[];for(const v of a){const S=n0(v,h.get(v.key));S!=null&&m.push(new fr(v.key,S,hd(S.value.mapValue),qn.exists(!0)))}return c.Bs.addMutationBatch(f,l,m,a)})).then(f=>(f.applyToLocalDocumentSet(h),{batchId:f.batchId,changes:h}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.ua[o.currentUser.toKey()];l||(l=new Be(ce)),l=l.insert(a,c),o.ua[o.currentUser.toKey()]=l}(r,i.batchId,s),await yr(r,i.changes),await zi(r.remoteStore)}catch(i){const o=Rc(i,"Failed to persist write");s.reject(o)}}async function Kd(n,t){const s=Y(n);try{const r=await q0(s.localStore,t);t.targetChanges.forEach((i,o)=>{const a=s.ra.get(o);a&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.Zu=!0:i.modifiedDocuments.size>0?we(a.Zu):i.removedDocuments.size>0&&(we(a.Zu),a.Zu=!1))}),await yr(s,r,t)}catch(r){await gr(r)}}function bu(n,t,s){const r=Y(n);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const i=[];r.ea.forEach((o,a)=>{const c=a.view.Au(t);c.snapshot&&i.push(c.snapshot)}),function(o,a){const c=Y(o);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(const f of h.listeners)f.Au(a)&&(l=!0)}),l&&xc(c)}(r.eventManager,t),i.length&&r.ta.Qo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function B_(n,t,s){const r=Y(n);r.sharedClientState.updateQueryState(t,"rejected",s);const i=r.ra.get(t),o=i&&i.key;if(o){let a=new Be(j.comparator);a=a.insert(o,Ge.newNoDocument(o,ee.min()));const c=_e().add(o),l=new Hi(ee.min(),new Map,new qe(ce),a,c);await Kd(r,l),r.ia=r.ia.remove(o),r.ra.delete(t),Dc(r)}else await da(r.localStore,t,!1).then(()=>pa(r,t,s)).catch(gr)}async function V_(n,t){const s=Y(n),r=t.batch.batchId;try{const i=await H0(s.localStore,t);Gd(s,r,null),zd(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await yr(s,i)}catch(i){await gr(i)}}async function U_(n,t,s){const r=Y(n);try{const i=await function(o,a){const c=Y(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.Bs.lookupMutationBatch(l,a).next(h=>(we(h!==null),u=h.keys(),c.Bs.removeMutationBatch(l,h))).next(()=>c.Bs.performConsistencyCheck(l)).next(()=>c.ci.Ks(l,u))})}(r.localStore,t);Gd(r,t,s),zd(r,t),r.sharedClientState.updateMutationState(t,"rejected",s),await yr(r,i)}catch(i){await gr(i)}}function zd(n,t){(n.aa.get(t)||[]).forEach(s=>{s.resolve()}),n.aa.delete(t)}function Gd(n,t,s){const r=Y(n);let i=r.ua[r.currentUser.toKey()];if(i){const o=i.get(t);o&&(s?o.reject(s):o.resolve(),i=i.remove(t)),r.ua[r.currentUser.toKey()]=i}}function pa(n,t,s=null){n.sharedClientState.removeLocalQueryTarget(t);for(const r of n.na.get(t))n.ea.delete(r),s&&n.ta.fa(r,s);n.na.delete(t),n.isPrimaryClient&&n.oa.Pi(t).forEach(r=>{n.oa.containsKey(r)||Wd(n,r)})}function Wd(n,t){n.sa.delete(t.path.canonicalString());const s=n.ia.get(t);s!==null&&(Fd(n.remoteStore,s),n.ia=n.ia.remove(t),n.ra.delete(s),Dc(n))}function Tu(n,t,s){for(const r of s)r instanceof Hd?(n.oa.addReference(r.key,t),$_(n,r)):r instanceof qd?(F("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,t),n.oa.containsKey(r.key)||Wd(n,r.key)):G()}function $_(n,t){const s=t.key,r=s.path.canonicalString();n.ia.get(s)||n.sa.has(r)||(F("SyncEngine","New document in limbo: "+s),n.sa.add(r),Dc(n))}function Dc(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const t=n.sa.values().next().value;n.sa.delete(t);const s=new j(Ce.fromString(t)),r=n.ca.next();n.ra.set(r,new k_(s)),n.ia=n.ia.insert(s,r),Ld(n.remoteStore,new mn(Tn(dd(s.path)),r,2,gc.A))}}async function yr(n,t,s){const r=Y(n),i=[],o=[],a=[];r.ea.isEmpty()||(r.ea.forEach((c,l)=>{a.push(r.la(l,t,s).then(u=>{if(u){r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u.fromCache?"not-current":"current"),i.push(u);const h=bc.Ys(l.targetId,u);o.push(h)}}))}),await Promise.all(a),r.ta.Qo(i),await async function(c,l){const u=Y(c);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>A.forEach(l,f=>A.forEach(f.Hs,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>A.forEach(f.Js,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!pr(h))throw h;F("LocalStore","Failed to update sequence numbers: "+h)}for(const h of l){const f=h.targetId;if(!h.fromCache){const p=u.ii.get(f),m=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(m);u.ii=u.ii.insert(f,v)}}}(r.localStore,o))}async function j_(n,t){const s=Y(n);if(!s.currentUser.isEqual(t)){F("SyncEngine","User change. New user:",t.toKey());const r=await kd(s.localStore,t);s.currentUser=t,function(i,o){i.aa.forEach(a=>{a.forEach(c=>{c.reject(new q(T.CANCELLED,o))})}),i.aa.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await yr(s,r.hi)}}function H_(n,t){const s=Y(n),r=s.ra.get(t);if(r&&r.Zu)return _e().add(r.key);{let i=_e();const o=s.na.get(t);if(!o)return i;for(const a of o){const c=s.ea.get(a);i=i.unionWith(c.view.Ku)}return i}}function q_(n){const t=Y(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=Kd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=H_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=B_.bind(null,t),t.ta.Qo=A_.bind(null,t.eventManager),t.ta.fa=N_.bind(null,t.eventManager),t}function K_(n){const t=Y(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=V_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=U_.bind(null,t),t}class z_{constructor(){this.synchronizeTabs=!1}async initialize(t){this.M=qi(t.databaseInfo.databaseId),this.sharedClientState=this._a(t),this.persistence=this.wa(t),await this.persistence.start(),this.gcScheduler=this.ma(t),this.localStore=this.ga(t)}ma(t){return null}ga(t){return j0(this.persistence,new U0,t.initialUser,this.M)}wa(t){return new t_(Cc.zi,this.M)}_a(t){return new s_}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class G_{async initialize(t,s){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>bu(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=j_.bind(null,this.syncEngine),await b_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return new C_}createDatastore(t){const s=qi(t.databaseInfo.databaseId),r=(i=t.databaseInfo,new a_(i));var i;return function(o,a,c,l){return new u_(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,r,s)}createRemoteStore(t){return s=this.localStore,r=this.datastore,i=t.asyncQueue,o=c=>bu(this.syncEngine,c,0),a=wu.vt()?new wu:new r_,new f_(s,r,i,o,a);var s,r,i,o,a}createSyncEngine(t,s){return function(r,i,o,a,c,l,u){const h=new O_(r,i,o,a,c,l);return u&&(h.ha=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,s)}terminate(){return async function(t){const s=Y(t);F("RemoteStore","RemoteStore shutting down."),s.fu.add(5),await mr(s),s._u.shutdown(),s.wu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.pa(this.observer.next,t)}error(t){this.observer.error?this.pa(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Ia(){this.muted=!0}pa(t,s){this.muted||setTimeout(()=>{this.muted||t(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(t,s,r,i){this.authCredentials=t,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=ad.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{F("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(F("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(T.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Xt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(s){const r=Rc(s,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function X_(n,t){n.asyncQueue.verifyOperationInProgress(),F("FirestoreClient","Initializing OfflineComponentProvider");const s=await n.getConfiguration();await t.initialize(s);let r=s.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await kd(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}async function Q_(n,t){n.asyncQueue.verifyOperationInProgress();const s=await J_(n);F("FirestoreClient","Initializing OnlineComponentProvider");const r=await n.getConfiguration();await t.initialize(s,r),n.setCredentialChangeListener(i=>Eu(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,o)=>Eu(t.remoteStore,o)),n.onlineComponents=t}async function J_(n){return n.offlineComponents||(F("FirestoreClient","Using default OfflineComponentProvider"),await X_(n,new z_)),n.offlineComponents}async function Yd(n){return n.onlineComponents||(F("FirestoreClient","Using default OnlineComponentProvider"),await Q_(n,new G_)),n.onlineComponents}function Z_(n){return Yd(n).then(t=>t.syncEngine)}async function eb(n){const t=await Yd(n),s=t.eventManager;return s.onListen=P_.bind(null,t.syncEngine),s.onUnlisten=L_.bind(null,t.syncEngine),s}function tb(n,t,s={}){const r=new Xt;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,c,l){const u=new W_({next:f=>{o.enqueueAndForget(()=>I_(i,h)),f.fromCache&&c.source==="server"?l.reject(new q(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new R_(a,u,{includeMetadataChanges:!0,Cu:!0});return S_(i,h)}(await eb(n),n.asyncQueue,t,s,r)),r.promise}const Cu=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(n,t,s){if(!s)throw new q(T.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function nb(n,t,s,r){if(t===!0&&r===!0)throw new q(T.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function Su(n){if(!j.isDocumentKey(n))throw new q(T.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Iu(n){if(j.isDocumentKey(n))throw new q(T.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function kc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":G()}function ga(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new q(T.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=kc(n);throw new q(T.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t){var s;if(t.host===void 0){if(t.ssl!==void 0)throw new q(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(s=t.ssl)===null||s===void 0||s;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new q(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,nb("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(t,s,r){this._authCredentials=s,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Au({}),this._settingsFrozen=!1,t instanceof es?this._databaseId=t:(this._app=t,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new q(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new es(i.options.projectId)}(t))}get app(){if(!this._app)throw new q(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new q(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Au(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new vE;switch(s.type){case"gapi":const r=s.client;return we(!(typeof r!="object"||r===null||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new _E(r,s.sessionIndex||"0",s.iamToken||null);case"provider":return s.client;default:throw new q(T.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=Cu.get(t);s&&(F("ComponentProvider","Removing Datastore"),Cu.delete(t),s.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qt(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Tt(this.firestore,t,this._key)}}class Gi{constructor(t,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Gi(this.firestore,t,this._query)}}class Qt extends Gi{constructor(t,s,r){super(t,s,dd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Tt(this.firestore,null,new j(t))}withConverter(t){return new Qt(this.firestore,t,this._path)}}function Qd(n,t,...s){if(n=Hs(n),Xd("collection","path",t),n instanceof Oc){const r=Ce.fromString(t,...s);return Iu(r),new Qt(n,null,r)}{if(!(n instanceof Tt||n instanceof Qt))throw new q(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ce.fromString(t,...s));return Iu(r),new Qt(n.firestore,null,r)}}function sb(n,t,...s){if(n=Hs(n),arguments.length===1&&(t=ad.R()),Xd("doc","path",t),n instanceof Oc){const r=Ce.fromString(t,...s);return Su(r),new Tt(n,null,new j(r))}{if(!(n instanceof Tt||n instanceof Qt))throw new q(T.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Ce.fromString(t,...s));return Su(r),new Tt(n.firestore,n instanceof Qt?n.converter:null,new j(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new Pd(this,"async_queue_retry"),this.qa=()=>{const s=yo();s&&F("AsyncQueue","Visibility state changed to "+s.visibilityState),this.Do.Ao()};const t=yo();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ka(),this.Ga(t)}enterRestrictedMode(t){if(!this.Oa){this.Oa=!0,this.La=t||!1;const s=yo();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.qa)}}enqueue(t){if(this.Ka(),this.Oa)return new Promise(()=>{});const s=new Xt;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(t().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Ma.push(t),this.Qa()))}async Qa(){if(this.Ma.length!==0){try{await this.Ma[0](),this.Ma.shift(),this.Do.reset()}catch(t){if(!pr(t))throw t;F("AsyncQueue","Operation failed with retryable error: "+t)}this.Ma.length>0&&this.Do.To(()=>this.Qa())}}Ga(t){const s=this.ka.then(()=>(this.Ba=!0,t().catch(r=>{this.$a=r,this.Ba=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Zt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ba=!1,r))));return this.ka=s,s}enqueueAfterDelay(t,s,r){this.Ka(),this.Ua.indexOf(t)>-1&&(s=0);const i=Nc.createAndSchedule(this,t,s,r,o=>this.ja(o));return this.Fa.push(i),i}Ka(){this.$a&&G()}verifyOperationInProgress(){}async Wa(){let t;do t=this.ka,await t;while(t!==this.ka)}za(t){for(const s of this.Fa)if(s.timerId===t)return!0;return!1}Ha(t){return this.Wa().then(()=>{this.Fa.sort((s,r)=>s.targetTimeMs-r.targetTimeMs);for(const s of this.Fa)if(s.skipDelay(),t!=="all"&&s.timerId===t)break;return this.Wa()})}Ja(t){this.Ua.push(t)}ja(t){const s=this.Fa.indexOf(t);this.Fa.splice(s,1)}}class Pc extends Oc{constructor(t,s,r){super(t,s,r),this.type="firestore",this._queue=new rb,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Zd(this),this._firestoreClient.terminate()}}function ib(n=ew()){return Yv(n,"firestore").getImmediate()}function Jd(n){return n._firestoreClient||Zd(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Zd(n){var t;const s=n._freezeSettings(),r=function(i,o,a,c){return new AE(i,o,a,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,c.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,s);n._firestoreClient=new Y_(n._authCredentials,n._appCheckCredentials,n._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(...t){for(let s=0;s<t.length;++s)if(t[s].length===0)throw new q(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t){this._byteString=t}static fromBase64String(t){try{return new is(Ke.fromBase64String(t))}catch(s){throw new q(T.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(t){return new is(Ke.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(t,s){if(!isFinite(t)||t<-90||t>90)throw new q(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(s)||s<-180||s>180)throw new q(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=t,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ce(this._lat,t._lat)||ce(this._long,t._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=/^__.*__$/;class ab{constructor(t,s,r){this.data=t,this.fieldMask=s,this.fieldTransforms=r}toMutation(t,s){return this.fieldMask!==null?new fr(t,this.data,this.fieldMask,s,this.fieldTransforms):new ji(t,this.data,s,this.fieldTransforms)}}function tp(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Fc{constructor(t,s,r,i,o,a){this.settings=t,this.databaseId=s,this.M=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ya(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(t){return new Fc(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(t){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(t),i=this.Za({path:r,ec:!1});return i.nc(t),i}sc(t){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(t),i=this.Za({path:r,ec:!1});return i.Ya(),i}ic(t){return this.Za({path:void 0,ec:!0})}rc(t){return li(t,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(t){return this.fieldMask.find(s=>t.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>t.isPrefixOf(s.field))!==void 0}Ya(){if(this.path)for(let t=0;t<this.path.length;t++)this.nc(this.path.get(t))}nc(t){if(t.length===0)throw this.rc("Document fields must not be empty");if(tp(this.Xa)&&ob.test(t))throw this.rc('Document fields cannot begin and end with "__"')}}class cb{constructor(t,s,r){this.databaseId=t,this.ignoreUndefinedProperties=s,this.M=r||qi(t)}ac(t,s,r,i=!1){return new Fc({Xa:t,methodName:s,uc:r,path:rt.emptyPath(),ec:!1,oc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function lb(n){const t=n._freezeSettings(),s=qi(n._databaseId);return new cb(n._databaseId,!!t.ignoreUndefinedProperties,s)}function ub(n,t,s,r,i,o={}){const a=n.ac(o.merge||o.mergeFields?2:0,t,s,i);ip("Data must be an object, but it was:",a,r);const c=sp(r,a);let l,u;if(o.merge)l=new sa(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const p=hb(t,f,s);if(!a.contains(p))throw new q(T.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);db(h,p)||h.push(p)}l=new sa(h),u=a.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=a.fieldTransforms;return new ab(new Et(c),l,u)}function np(n,t){if(rp(n=Hs(n)))return ip("Unsupported field value:",t,n),sp(n,t);if(n instanceof ep)return function(s,r){if(!tp(r.Xa))throw r.rc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ec&&t.Xa!==4)throw t.rc("Nested arrays are not supported");return function(s,r){const i=[];let o=0;for(const a of s){let c=np(a,r.ic(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,t)}return function(s,r){if((s=Hs(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return XE(r.M,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=Ye.fromDate(s);return{timestampValue:ai(r.M,i)}}if(s instanceof Ye){const i=new Ye(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ai(r.M,i)}}if(s instanceof Lc)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof is)return{bytesValue:Ad(r.M,s._byteString)};if(s instanceof Tt){const i=r.databaseId,o=s.firestore._databaseId;if(!o.isEqual(i))throw r.rc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ec(s.firestore._databaseId||r.databaseId,s._key.path)}}throw r.rc(`Unsupported field value: ${kc(s)}`)}(n,t)}function sp(n,t){const s={};return cd(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gs(n,(r,i)=>{const o=np(i,t.tc(r));o!=null&&(s[r]=o)}),{mapValue:{fields:s}}}function rp(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof Lc||n instanceof is||n instanceof Tt||n instanceof ep)}function ip(n,t,s){if(!rp(s)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(s)){const r=kc(s);throw r==="an object"?t.rc(n+" a custom object"):t.rc(n+" "+r)}}function hb(n,t,s){if((t=Hs(t))instanceof Mc)return t._internalPath;if(typeof t=="string")return op(n,t);throw li("Field path arguments must be of type string or ",n,!1,void 0,s)}const fb=new RegExp("[~\\*/\\[\\]]");function op(n,t,s){if(t.search(fb)>=0)throw li(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,s);try{return new Mc(...t.split("."))._internalPath}catch{throw li(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,s)}}function li(n,t,s,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let c=`Function ${t}() called with invalid data`;s&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new q(T.INVALID_ARGUMENT,c+n+l)}function db(n,t){return n.some(s=>s.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t,s,r,i,o){this._firestore=t,this._userDataWriter=s,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new pb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const s=this._document.data.field(cp("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s)}}}class pb extends ap{data(){return super.data()}}function cp(n,t){return typeof t=="string"?op(n,t):t instanceof Mc?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t,s){this.hasPendingWrites=t,this.fromCache=s}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class gb extends ap{constructor(t,s,r,i,o,a){super(t,s,r,i,a),this._firestore=t,this._firestoreImpl=t,this.metadata=o}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const s=new Fr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,s={}){if(this._document){const r=this._document.data.field(cp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}}class Fr extends gb{data(t={}){return super.data(t)}}class mb{constructor(t,s,r,i){this._firestore=t,this._userDataWriter=s,this._snapshot=i,this.metadata=new Rr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(s=>t.push(s)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,s){this._snapshot.docs.forEach(r=>{t.call(s,new Fr(this._firestore,this._userDataWriter,r.key,r,new Rr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const s=!!t.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new q(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>({type:"added",doc:new Fr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Rr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:o++}))}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const c=new Fr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Rr(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:yb(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function yb(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n){if(ri(n)&&n.explicitOrderBy.length===0)throw new q(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{convertValue(t,s="none"){switch(bn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ne(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,s);case 5:return t.stringValue;case 6:return this.convertBytes(Zn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,s);case 10:return this.convertObject(t.mapValue,s);default:throw G()}}convertObject(t,s){const r={};return gs(t.fields,(i,o)=>{r[i]=this.convertValue(o,s)}),r}convertGeoPoint(t){return new Lc(Ne(t.latitude),Ne(t.longitude))}convertArray(t,s){return(t.values||[]).map(r=>this.convertValue(r,s))}convertServerTimestamp(t,s){switch(s){case"previous":const r=ud(t);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(Js(t));default:return null}}convertTimestamp(t){const s=en(t);return new Ye(s.seconds,s.nanos)}convertDocumentKey(t,s){const r=Ce.fromString(t);we(Dd(r));const i=new es(r.get(1),r.get(3)),o=new j(r.popFirst(5));return i.isEqual(s)||Zt(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eb(n,t,s){let r;return r=n?s&&(s.merge||s.mergeFields)?n.toFirestore(t,s):n.toFirestore(t):t,r}class _b extends wb{constructor(t){super(),this.firestore=t}convertBytes(t){return new is(t)}convertReference(t){const s=this.convertDocumentKey(t,this.firestore._databaseId);return new Tt(this.firestore,null,s)}}function bb(n){n=ga(n,Gi);const t=ga(n.firestore,Pc),s=Jd(t),r=new _b(t);return vb(n._query),tb(s,n._query).then(i=>new mb(t,r,n,i))}function Tb(n,t){const s=ga(n.firestore,Pc),r=sb(n),i=Eb(n.converter,t);return Cb(s,[ub(lb(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,qn.exists(!1))]).then(()=>r)}function Cb(n,t){return function(s,r){const i=new Xt;return s.asyncQueue.enqueueAndForget(async()=>F_(await Z_(s),r,i)),i.promise}(Jd(n),t)}(function(n,t=!0){(function(s){ps=s})(Jv),zr(new qs("firestore",(s,{options:r})=>{const i=s.getProvider("app").getImmediate(),o=new Pc(i,new wE(s.getProvider("auth-internal")),new TE(s.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC")),jn(Ql,"3.4.8",n),jn(Ql,"3.4.8","esm2017")})();var Sb="firebase",Ib="9.6.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn(Sb,Ib,"app");const Ab={apiKey:"AIzaSyDa_fhL81iuhkpDIxtk-rsOaMoGUJ4eLKI",authDomain:"vue-auth-test-9896f.firebaseapp.com",projectId:"vue-auth-test-9896f",storageBucket:"vue-auth-test-9896f.appspot.com",messagingSenderId:"1010891411797",appId:"1:1010891411797:web:9ba6a304cc87e57179dfdc"},Nb=Zv(Ab),lp=ib(Nb),Rb=async n=>{try{const t=await Tb(Qd(lp,"activities"),n);console.log("Document written with ID: ",t.id)}catch(t){console.error("Error adding document: ",t)}},xb=()=>{try{return bb(Qd(lp,"activities"))}catch{return console.error("Error getting documents ",e)}};const vr=n=>(lh("data-v-ff1f41fa"),n=n(),uh(),n),Db={class:"title form-content"},kb=vr(()=>ye("label",{for:"titleForm"},"Title",-1)),Ob=["value"],Pb={class:"description form-content"},Mb=vr(()=>ye("label",{for:"descriptionForm"},"Description",-1)),Lb=["value"],Fb={class:"date form-content"},Bb=vr(()=>ye("label",{for:"dateForm"},"Date",-1)),Vb=["value"],Ub={class:"time form-content"},$b=vr(()=>ye("label",{for:"fromTimeForm"},"From",-1)),jb=["value"],Hb=vr(()=>ye("label",{for:"toTimeForm"},"To",-1)),qb={setup(n){const t=pi({}),s=r=>{r.preventDefault(),Rb(t.value),console.table(t.value)};return(r,i)=>(yt(),Nt("form",null,[ye("div",Db,[kb,ye("input",{type:"text",id:"titleForm",placeholder:"Necesito acompa\xF1ante",value:t.value.title,onChange:i[0]||(i[0]=o=>t.value.title=o.target.value)},null,40,Ob)]),ye("div",Pb,[Mb,ye("textarea",{name:"descriptionForm",id:"descriptionForm",rows:"6",placeholder:"Necesito acompa\xF1ante para ir a....",value:t.value.description,onChange:i[1]||(i[1]=o=>t.value.description=o.target.value)},`
      `,40,Lb)]),ye("div",Fb,[Bb,ye("input",{type:"date",name:"dateForm",id:"dateForm",value:t.value.date,onChange:i[2]||(i[2]=o=>t.value.date=o.target.value)},null,40,Vb)]),ye("div",Ub,[$b,ye("input",{type:"time",name:"fromTimeForm",id:"fromTimeForm",value:t.value.from,onChange:i[3]||(i[3]=o=>t.value.from=o.target.value)},null,40,jb),Hb,ye("input",{type:"time",name:"toTimeForm",id:"toTimeForm",value:"newActivity.to",onChange:i[4]||(i[4]=o=>t.value.to=o.target.value)},null,32)]),ye("button",{onClick:s},"Enviar")]))}};var Kb=ja(qb,[["__scopeId","data-v-ff1f41fa"]]);const zb={class:"content"},Gb={setup(n){return(t,s)=>(yt(),Nt("main",null,[ye("section",zb,[Me(Kb)])]))}},Nu=Um("activities",{id:"activities",state:()=>({activities:[],activity:null,loading:!1,error:null}),getters:{getActivities(){return this.activities}},actions:{async fetchActivities(){this.posts=[],this.loading=!0;try{const n=[];(await xb()).forEach(s=>{n.push(s.data())}),this.activities=n}catch(n){this.error=n}finally{this.loading=!1}}}});const Wb=n=>(lh("data-v-10a44271"),n=n(),uh(),n),Yb={class:"activities"},Xb=Wb(()=>ye("h1",null,"Activities",-1)),Qb={key:0},Jb={key:1},Zb={class:"activity"},eT={key:2},tT={setup(n){const{activities:t,loading:s,error:r}=$m(Nu()),{fetchActivities:i}=Nu();return i(),(o,a)=>(yt(),Nt("div",Yb,[Xb,pt(s)?(yt(),Nt("p",Qb,"Loading posts...")):(yt(),Nt("ul",Jb,[(yt(!0),Nt(dt,null,Zg(pt(t),c=>(yt(),Nt("li",{key:c.id},[ye("div",Zb,[ye("h2",null,xn(c.title),1),ye("p",null,xn(c.description),1),ye("p",null,"Fecha: "+xn(c.date),1),ye("p",null,"Desde: "+xn(c.from)+" hasta "+xn(c.to),1)])]))),128))])),pt(r)?(yt(),Nt("p",eT,xn(pt(r).message),1)):Qg("",!0)]))}};var nT=ja(tT,[["__scopeId","data-v-10a44271"]]);const sT=jy({history:oy("/vue-firestore-crud-test/"),routes:[{path:"/",name:"home",component:Gb},{path:"/activities",name:"activities",component:nT}]}),Bc=km(Yy);Bc.use(Mm());Bc.use(sT);Bc.mount("#app");
